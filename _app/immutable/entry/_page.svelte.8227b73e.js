import{S as Be,i as Ve,s as Ge,k as E,q as N,a as w,l as S,m as I,r as P,c as R,h as d,n as c,b as q,G as h,u as Y,H as oe,J as O,K as st,e as lt,L as Le,M as Z,N as $,p as re,O as de,y as Ue,z as He,A as Xe,g as Oe,d as Je,B as We}from"../chunks/index.0927561f.js";import{w as tn}from"../chunks/index.6d3ad0ca.js";const F=(e,t)=>{const n=e%t;return n<0?n+t:n},cn=e=>{if(isNaN(e))return"NaN";const t=String(+e).split("")??[],n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let l="",o=3;for(;o--;)l=(n[+(t.pop()??"")+o*10]||"")+l;return Array(+t.join("")+1).join("M")+l},G=(e,t,n)=>{let l=0;for(let o=e;o<t;o++)l+=n[F(o,n.length)];return l},un=e=>{const t=e%10,n=e%100;return t===1&&n!==11?e+"st":t===2&&n!==12?e+"nd":t===3&&n!==13?e+"rd":e+"th"},fn=220,hn=96,mn=e=>{const t=[];let n="α";for(let l=0;l<e;l++)t.push({sharpNote:n,flatNote:n,defaultOctaveFrequency:fn*2**(l/e)}),n=String.fromCharCode(n.charCodeAt(0)+1);return t},ye=mn(hn),X=[2,2,1,2,2,2,1],se=[2,2,3,2,3],_e=[3,2,1,1,3,2],dn=[1,256/243,9/8,32/27,81/64,4/3,1024/729,3/2,128/81,27/16,16/9,243/128],_n=e=>{const t=[];for(let n=0;n<e;n++)t.push(2**(n/e));return t},gn=_n(ye.length),Ae=e=>{const t=[];for(let n=0;n<e;n++)t.push(.9/e);return t[0]+=.1,t},et={pentatonic:[.3,.05,.05,.2,.1],diatonic:[.3,.05,.15,.05,.075,.05,.03],hexatonic:[.3,.075,.15,.075,.075,.05],mitchChromatic:Ae(ye.length)},tt={pentatonic:[.5,.05,.15,.2,.05],diatonic:[.5,.02,.05,.1,.1,.05,.02],hexatonic:[.5,.02,.05,.1,.1,.05],mitchChromatic:Ae(ye.length)},Re=.25,vn=["perfect","major","minor","augmented","diminished"],nn=(e,t)=>e===4&&t===7?"major":e===3&&t===7?"minor":e===3&&t===6?"diminished":"bizarre",Vt=(e,t)=>{const n=[{...t[e]},{...t[F(e+2,t.length)]},{...t[F(e+4,t.length)]}];return nn(n[1].semitonesFromRoot,n[1].semitonesFromRoot+n[2].semitonesFromRoot)},Tt=e=>nn(e.firstInterval.semitonesFromRoot,e.secondInterval.semitonesFromRoot),bn=(e,t)=>({firstInterval:{semitonesFromRoot:G(e,e+2,t)},secondInterval:{semitonesFromRoot:G(e,e+4,t)}}),ln=(e,t,n)=>{const l=[{...t[e]},{...t[F(e+2,t.length)]},{...t[F(e+4,t.length)]}];return l.forEach((o,s)=>{s<=0||o.semitonesFromRoot<l[s-1].semitonesFromRoot&&(o.semitonesFromRoot+=n.length)}),l},In=(e,t,n)=>{const l=cn(F(e+1,n.length+1)),o=e+t,s=Tt(bn(o,n));return s==="major"?l:s==="minor"?l.toLowerCase():s==="diminished"?`${l.toLowerCase()}°`:l},j=(e,t)=>{const n=[];for(let l=0;l<t.length;l++)n.push({semitonesFromRoot:G(e,e+l,t),label:In(l,e,t)});return n},pn=j(0,X),kn=j(1,X),yn=j(2,X),Tn=j(3,X),En=j(4,X),Sn=j(5,X),Mn=j(6,X),Cn=[{name:"Ionian / Major",scale:pn,rootIntervalToIonian:G(0,0,X)},{name:"Dorian",scale:kn,rootIntervalToIonian:G(0,1,X)},{name:"Phrygian",scale:yn,rootIntervalToIonian:G(0,2,X)},{name:"Lydian",scale:Tn,rootIntervalToIonian:G(0,3,X)},{name:"Mixolydian",scale:En,rootIntervalToIonian:G(0,4,X)},{name:"Aeolian / Natural Minor",scale:Sn,rootIntervalToIonian:G(0,5,X)},{name:"Locrian",scale:Mn,rootIntervalToIonian:G(0,6,X)}],Nn=j(0,se),Pn=j(1,se),Dn=j(2,se),Fn=j(3,se),wn=j(4,se),Rn=[{name:"Major",scale:Nn,rootIntervalToIonian:G(0,0,se)},{name:"Suspended / Egyptian",scale:Pn,rootIntervalToIonian:G(0,1,se)},{name:"Blues minor / Man Gong",scale:Dn,rootIntervalToIonian:G(0,2,se)},{name:"Blues major",scale:Fn,rootIntervalToIonian:G(0,3,se)},{name:"Minor",scale:wn,rootIntervalToIonian:G(0,4,se)}],on=e=>{const t=[];for(let n=0;n<e;n++)t.push(1);return t},An=j(0,on(ye.length)),Ln=j(0,_e),Bn=j(1,_e);j(2,_e);j(3,_e);j(4,_e);j(5,_e);const Vn=[{name:"Minor",scale:Ln,rootIntervalToIonian:G(0,0,_e)},{name:"Major",scale:Bn,rootIntervalToIonian:G(0,1,_e)}],Gn=[{name:"Minor",scale:An,rootIntervalToIonian:G(0,0,on(ye.length))}],ot=[3,2,3,2,3,2,3,3,4,2,4],qn=[{name:"t31Harmonics",scale:j(0,ot),rootIntervalToIonian:G(0,0,ot)}],rt=[6,3,3,3,1,2,2,1,2,2,2,1,3,4,1,4,4,3,5,4,5,4,6,4,3,2,1,2,1,3,4,1,4],jn=[{name:"t96Harmonics",scale:j(0,rt),rootIntervalToIonian:G(0,0,rt)}],Et=[{label:"Diatonic",modes:Cn,probabilityDistributions:{bass:tt.diatonic,melody:et.diatonic}},{label:"Pentatonic",modes:Rn,probabilityDistributions:{bass:tt.pentatonic,melody:et.pentatonic}},{label:"Hexatonic (blues)",modes:Vn,probabilityDistributions:{bass:tt.hexatonic,melody:et.hexatonic}},{label:"Mitch chromatic",modes:Gn,probabilityDistributions:{bass:tt.mitchChromatic,melody:et.mitchChromatic}},{label:"T31 Scale",modes:qn,probabilityDistributions:{bass:Ae(ot.length+1),melody:Ae(ot.length+1)}},{label:"T96 Scale",modes:jn,probabilityDistributions:{bass:Ae(rt.length+1),melody:Ae(rt.length+1)}}],x=e=>e.preferSharp?e.sharpNote:e.flatNote,Gt=(e,t,n,l)=>{let o=F(e-t,l);return o<0&&(o=o+l),n.some(s=>s.semitonesFromRoot===o)},rn=(e,t)=>{if(e===1)return"augmented";if([1,4,5].includes(t)){if(e===0)return"perfect";if(e===-1)return"diminished"}if(e===0)return"major";if(e===-1)return"minor";if(e===-2)return"diminished"},qt=(e,t)=>`${e} ${un(t)}`,sn=(e,t)=>{if(e==="augmented")return`A${t}`;if(e==="perfect")return`P${t}`;if(e==="diminished")return`d${t}`;if(e==="major")return`M${t}`;if(e==="minor")return`m${t}`},zn=(e,t)=>{const n=t+1,l=rn(e,n);if(l)return sn(l,n)},an=e=>{const t=[];let n=0;for(;n<X.length;){const l=n+1,o=e-G(0,n,X),s=rn(o,l);s&&t.push({intervalType:s,intervalN:l}),n++}return t},nt=(e,t)=>{const n=e.semitonesFromRoot-G(0,t,X),l=zn(n,t);if(l)return l;const o=an(e.semitonesFromRoot);for(const s of vn)for(const r of o)if(r.intervalType===s)return sn(r.intervalType,r.intervalN);return`${e.semitonesFromRoot}s`};function Un(e){let t,n=x(e[2][F(e[0],e[2].length)])+"",l,o,s;return{c(){t=E("h1"),l=N(n),o=w(),s=N(e[1]),this.h()},l(r){t=S(r,"H1",{class:!0});var a=I(t);l=P(a,n),o=R(a),s=P(a,e[1]),a.forEach(d),this.h()},h(){c(t,"class","svelte-1j0u2fz")},m(r,a){q(r,t,a),h(t,l),h(t,o),h(t,s)},p(r,[a]){a&5&&n!==(n=x(r[2][F(r[0],r[2].length)])+"")&&Y(l,n),a&2&&Y(s,r[1])},i:oe,o:oe,d(r){r&&d(t)}}}function Hn(e,t,n){let{rootNoteIndex:l}=t,{selectedScaleName:o}=t,{chromaticNotes:s}=t;return e.$$set=r=>{"rootNoteIndex"in r&&n(0,l=r.rootNoteIndex),"selectedScaleName"in r&&n(1,o=r.selectedScaleName),"chromaticNotes"in r&&n(2,s=r.chromaticNotes)},[l,o,s]}class Xn extends Be{constructor(t){super(),Ve(this,t,Hn,Un,Ge,{rootNoteIndex:0,selectedScaleName:1,chromaticNotes:2})}}const St=tn({}),Mt=tn({}),qe=300,Ke=.75,On=12,Jn=1e-6,Wn={attackTime:.1,decayTime:.3,releaseTime:.5,maxSustainTime:.2,maxGain:.1,sustainGainRatio:.1,oscillatorType:"sine"},Kn=(e,t,n)=>{let l=1;for(;t<0;)t=t+n.length,l=l*.5;for(;t>=n.length;)t=t-n.length,l=l*2;return l=l*n[t],e.defaultOctaveFrequency*l},U=(e,t,n,l,o,s={})=>{const r=n.length===ye.length?gn:dn;if(o<l){console.log("Warning: note end time earlier than start time");return}const a={...Wn,...s};let{attackTime:f,decayTime:i}={...a};const{releaseTime:u,maxSustainTime:_,maxGain:g,sustainGainRatio:p,oscillatorType:v="triangle"}={...a},M=g*p,k=new AudioContext,L=k.createOscillator(),b=k.createGain(),B=k.createDynamicsCompressor();b.gain.value=.001,L.type=v,L.frequency.value=Kn(e,t,r),L.connect(b).connect(B).connect(k.destination);const y=o-l;f>y/(2*1e3)&&(f=y/(2*1e3)),i+f>y/1e3&&(i=y/1e3-f);let C=_??1e4;C>y/1e3-f-i&&(C=y/1e3-f-i),setTimeout(function(){const Q=k.currentTime+f;b.gain.exponentialRampToValueAtTime(g,Q),St.update(ee=>({...ee,[F(t,n.length)]:(ee[`${F(t,n.length)}`]??0)+1})),L.start(),setTimeout(()=>{b.gain.exponentialRampToValueAtTime(M,k.currentTime+i),setTimeout(()=>{b.gain.exponentialRampToValueAtTime(Jn,k.currentTime+u),St.update(ee=>{const ge=Math.max((ee[`${F(t,n.length)}`]??0)-1,0);return{...ee,[F(t,n.length)]:ge}}),setTimeout(function(){L.stop(),k.close()},u*1e3+2e3)},C*1e3)},f*1e3)},l)},Qn=(e,t,n,l,o=qe,s=Ke)=>{const r=o*.5*s,a=o*.5-r,f=o*.5,i=ln(t,l,n);console.log("mapped scale notes",i),[...i].forEach((u,_)=>{U(n[e],u.semitonesFromRoot,n,_*f+a,_*f+a+r+f)}),[...i].forEach(u=>{U(n[e],u.semitonesFromRoot,n,(i.length+1)*f+a,(i.length+1)*f+a+(r+f)*2)})},Yn=(e,t,n,l=qe,o=Ke)=>{const s=l*.5*o,r=l*.5-s,a=l*.5;[...[{semitonesFromRoot:0},e]].forEach((i,u)=>{U(n[t],i.semitonesFromRoot,n,u*a+r,u*a+r+s+a)})},Zn=(e,t,n,l=qe,o=Ke)=>{const s=l*.5*o,r=l*.5-s,a=l*.5;[...e].forEach((f,i)=>{i===0?U(n[t],f.semitonesFromRoot,n,i*2*a+r,i*2*a+r+s+a):(U(n[t],0,n,i*2*a+r,i*2*a+r+s),U(n[t],f.semitonesFromRoot,n,(i*2+1)*a+r,(i*2+1)*a+r+s))}),U(n[t],0,n,e.length*2*a+r,e.length*2*a+r+s),U(n[t],n.length,n,(e.length*2+1)*a+r,(e.length*2+1)*a+r+s)},$n=(e,t,n,l=qe,o=Ke)=>{const s=l*.5*o,r=l*.5-s,a=l*.5;U(n[t],e[0].semitonesFromRoot,n,r,a+r+s+a),[...e].forEach((f,i)=>{U(n[t],f.semitonesFromRoot,n,(i+2)*a+r,(i+2)*a+r+s+a)}),U(n[t],n.length,n,(e.length+2)*a+r,(e.length+2)*a+r+s),[...e].reverse().forEach((f,i)=>{U(n[t],f.semitonesFromRoot,n,(i+e.length+3)*a+r,(i+e.length+3)*a+r+s+a)})},xn=(e,t,n,l=qe,o=Ke)=>{const s=l*.5*o,r=l*.5-s,a=l*.5;U(n[t],0,n,r,r+a*(e.length*2+3),{maxSustainTime:a*(e.length*2+2),oscillatorType:"sine",sustainGainRatio:.5,maxGain:.0125}),[...e].forEach((f,i)=>{U(n[t],f.semitonesFromRoot,n,(i+2)*a+r,(i+2)*a+r+s+a)}),U(n[t],n.length,n,(e.length+2)*a+r,(e.length+2)*a+r+s),[...e].reverse().forEach((f,i)=>{U(n[t],f.semitonesFromRoot,n,(i+e.length+3)*a+r,(i+e.length+3)*a+r+s+a)})},el=(e,t,n,l,o,s=qe,r=On)=>{let a=0;for(;a<=r;)e.forEach((i,u)=>{if(!(u>=l.length)&&Math.random()<l[u]){const _=Math.random();let g=1;_>.8&&(g=2),_>.9&&(g=4),_>.95&&(g=6),_>.97&&(g=3),_>.99&&(g=8),U(n[t],i.semitonesFromRoot+n.length,n,s*a,s*a+s*Re*g),a+=Re}}),a+=Re;let f=0;for(;f<=r;)e.forEach((i,u)=>{if(!(u>=o.length)&&Math.random()<o[u]){const _=Math.random();let g=1;_>.8&&(g=2),_>.9&&(g=4),_>.95&&(g=6),_>.97&&(g=3),_>.99&&(g=8),U(n[t],i.semitonesFromRoot,n,s*f,s*f+s*2*Re*g),f+=2*Re}}),f+=2*Re};function tl(e){let t,n,l,o,s,r,a,f,i,u,_,g,p,v;return{c(){t=E("div"),n=E("button"),l=N("▶ Scale"),o=w(),s=E("button"),r=N("▶ Scale + Pedal"),a=w(),f=E("button"),i=N("▶ Scale + Drone"),u=w(),_=E("button"),g=N("▶ Jam")},l(M){t=S(M,"DIV",{});var k=I(t);n=S(k,"BUTTON",{});var L=I(n);l=P(L,"▶ Scale"),L.forEach(d),o=R(k),s=S(k,"BUTTON",{});var b=I(s);r=P(b,"▶ Scale + Pedal"),b.forEach(d),a=R(k),f=S(k,"BUTTON",{});var B=I(f);i=P(B,"▶ Scale + Drone"),B.forEach(d),u=R(k),_=S(k,"BUTTON",{});var y=I(_);g=P(y,"▶ Jam"),y.forEach(d),k.forEach(d)},m(M,k){q(M,t,k),h(t,n),h(n,l),h(t,o),h(t,s),h(s,r),h(t,a),h(t,f),h(f,i),h(t,u),h(t,_),h(_,g),p||(v=[O(n,"click",e[5]),O(s,"click",e[6]),O(f,"click",e[7]),O(_,"click",e[8])],p=!0)},p:oe,i:oe,o:oe,d(M){M&&d(t),p=!1,st(v)}}}function nl(e,t,n){let{rootNoteIndex:l}=t,{bpm:o}=t,{selectedScaleNotes:s}=t,{selectedModesGroup:r}=t,{chromaticNotes:a}=t;const f=()=>{$n(s,l,a,60*1e3/o)},i=()=>{Zn(s,l,a,60*1e3/o)},u=()=>{xn(s,l,a,60*1e3/o)},_=()=>{el(s,l,a,r.probabilityDistributions.melody,r.probabilityDistributions.bass,60*1e3/o)};return e.$$set=g=>{"rootNoteIndex"in g&&n(0,l=g.rootNoteIndex),"bpm"in g&&n(1,o=g.bpm),"selectedScaleNotes"in g&&n(2,s=g.selectedScaleNotes),"selectedModesGroup"in g&&n(3,r=g.selectedModesGroup),"chromaticNotes"in g&&n(4,a=g.chromaticNotes)},[l,o,s,r,a,f,i,u,_]}class ll extends Be{constructor(t){super(),Ve(this,t,nl,tl,Ge,{rootNoteIndex:0,bpm:1,selectedScaleNotes:2,selectedModesGroup:3,chromaticNotes:4})}}const jt=(e,t,n,l)=>({x:n.xCentre+n.radius*Math.cos((e.semitonesFromRoot+t)*2*Math.PI/l-.5*Math.PI),y:n.yCentre+n.radius*Math.sin((e.semitonesFromRoot+t)*2*Math.PI/l-.5*Math.PI)}),Ct=(e,t,n)=>({x:t.xCentre+t.radius*Math.cos(e*2*Math.PI/n-.5*Math.PI),y:t.yCentre+t.radius*Math.sin(e*2*Math.PI/n-.5*Math.PI)});function zt(e,t,n){const l=e.slice();l[7]=t[n],l[10]=n;const o=Ct(l[10],l[0],l[3].length);return l[8]=o,l}function Ut(e){let t,n,l,o,s,r,a,f,i,u=x(e[7])+"",_,g,p,v,M,k,L;function b(){return e[5](e[10])}function B(...y){return e[6](e[10],...y)}return{c(){t=Z("g"),n=Z("circle"),s=Z("circle"),i=Z("text"),_=N(u),this.h()},l(y){t=$(y,"g",{class:!0,tabindex:!0,"aria-label":!0,role:!0});var C=I(t);n=$(C,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0}),I(n).forEach(d),s=$(C,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0,opacity:!0,class:!0}),I(s).forEach(d),i=$(C,"text",{x:!0,y:!0,class:!0,"text-anchor":!0,dy:!0});var Q=I(i);_=P(Q,u),Q.forEach(d),C.forEach(d),this.h()},h(){re(n,"stroke-width","1.6871"),re(n,"stroke-miterlimit","10"),c(n,"cx",0),c(n,"cy",0),c(n,"r",30),c(n,"transform",l=`translate(${e[8].x} ${e[8].y})`),c(n,"stroke","transparent"),c(n,"fill",o=e[10]===e[1]?"yellow":"var(--base-background-color)"),re(s,"stroke-width","1.6871"),re(s,"stroke-miterlimit","10"),c(s,"cx",0),c(s,"cy",0),c(s,"r",30),c(s,"transform",r=`translate(${e[8].x} ${e[8].y})`),c(s,"stroke","transparent"),c(s,"fill",a=e[4][`${F(e[10]-e[1],e[3].length)}`]>0?"blue":"var(--base-background-color)"),c(s,"opacity",f=(e[4][`${F(e[10]-e[1],e[3].length)}`]??0)/3),c(s,"class","transitionAllQuick svelte-bfkdcb"),c(i,"x",g=e[8].x),c(i,"y",p=e[8].y),c(i,"class",v=de(`svgNoteName ${Gt(e[10],e[1],e[2],e[3].length)?"svgSelectedNoteName":""}`)+" svelte-bfkdcb"),c(i,"text-anchor","middle"),c(i,"dy",".3em"),c(t,"class","clickable"),c(t,"tabindex","0"),c(t,"aria-label",M=`Play ${x(e[7])}`),c(t,"role","button")},m(y,C){q(y,t,C),h(t,n),h(t,s),h(t,i),h(i,_),k||(L=[O(t,"click",b),O(t,"keydown",B)],k=!0)},p(y,C){e=y,C&9&&l!==(l=`translate(${e[8].x} ${e[8].y})`)&&c(n,"transform",l),C&2&&o!==(o=e[10]===e[1]?"yellow":"var(--base-background-color)")&&c(n,"fill",o),C&9&&r!==(r=`translate(${e[8].x} ${e[8].y})`)&&c(s,"transform",r),C&26&&a!==(a=e[4][`${F(e[10]-e[1],e[3].length)}`]>0?"blue":"var(--base-background-color)")&&c(s,"fill",a),C&26&&f!==(f=(e[4][`${F(e[10]-e[1],e[3].length)}`]??0)/3)&&c(s,"opacity",f),C&8&&u!==(u=x(e[7])+"")&&Y(_,u),C&9&&g!==(g=e[8].x)&&c(i,"x",g),C&9&&p!==(p=e[8].y)&&c(i,"y",p),C&14&&v!==(v=de(`svgNoteName ${Gt(e[10],e[1],e[2],e[3].length)?"svgSelectedNoteName":""}`)+" svelte-bfkdcb")&&c(i,"class",v),C&8&&M!==(M=`Play ${x(e[7])}`)&&c(t,"aria-label",M)},d(y){y&&d(t),k=!1,st(L)}}}function ol(e){let t,n=[...e[3]],l=[];for(let o=0;o<n.length;o+=1)l[o]=Ut(zt(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=lt()},l(o){for(let s=0;s<l.length;s+=1)l[s].l(o);t=lt()},m(o,s){for(let r=0;r<l.length;r+=1)l[r].m(o,s);q(o,t,s)},p(o,[s]){if(s&31){n=[...o[3]];let r;for(r=0;r<n.length;r+=1){const a=zt(o,n,r);l[r]?l[r].p(a,s):(l[r]=Ut(a),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},i:oe,o:oe,d(o){Le(l,o),o&&d(t)}}}function rl(e,t,n){let{notePositionCircle:l}=t,{rootNoteIndex:o}=t,{selectedScaleNotes:s}=t,{chromaticNotes:r}=t,a={};St.subscribe(u=>{n(4,a=u)});const f=u=>U(r[o],F(u-o,r.length),r,0,500),i=(u,_)=>_.key==="Enter"&&U(r[o],F(u-o,r.length),r,0,500);return e.$$set=u=>{"notePositionCircle"in u&&n(0,l=u.notePositionCircle),"rootNoteIndex"in u&&n(1,o=u.rootNoteIndex),"selectedScaleNotes"in u&&n(2,s=u.selectedScaleNotes),"chromaticNotes"in u&&n(3,r=u.chromaticNotes)},[l,o,s,r,a,f,i]}class sl extends Be{constructor(t){super(),Ve(this,t,rl,ol,Ge,{notePositionCircle:0,rootNoteIndex:1,selectedScaleNotes:2,chromaticNotes:3})}}function Ht(e,t,n){const l=e.slice();l[15]=t[n],l[20]=n;const o=l[3]?Ct(l[0].scale[F(l[20]-l[2].findIndex(a=>a===l[0]),l[0].scale.length)].semitonesFromRoot+l[1],l[4],l[7].length):Ct(l[15].semitonesFromRoot+l[1],l[4],l[7].length);l[16]=o;const s=jt(l[15],l[1],l[6],l[7].length);l[17]=s;const r=jt(l[15],l[1],l[5],l[7].length);return l[18]=r,l}function Xt(e){let t,n,l,o,s,r,a,f,i=e[15].label+"",u,_,g,p,v,M,k,L=nt(e[15],e[20])+"",b,B,y,C,Q;function ee(){return e[11](e[20])}function ge(...A){return e[12](e[20],...A)}function ae(){return e[13](e[15])}function ve(...A){return e[14](e[15],...A)}return{c(){t=Z("circle"),l=w(),o=Z("g"),s=Z("g"),r=Z("circle"),f=Z("text"),u=N(i),p=Z("g"),v=Z("circle"),k=Z("text"),b=N(L),this.h()},l(A){t=$(A,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0,class:!0}),I(t).forEach(d),l=R(A),o=$(A,"g",{class:!0});var V=I(o);s=$(V,"g",{class:!0,tabindex:!0,"aria-label":!0,role:!0});var be=I(s);r=$(be,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0}),I(r).forEach(d),f=$(be,"text",{x:!0,y:!0,"text-anchor":!0,dy:!0,transform:!0,class:!0});var ce=I(f);u=P(ce,i),ce.forEach(d),be.forEach(d),p=$(V,"g",{class:!0,tabindex:!0,"aria-label":!0,role:!0});var ue=I(p);v=$(ue,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0}),I(v).forEach(d),k=$(ue,"text",{x:!0,y:!0,"text-anchor":!0,dy:!0,transform:!0,class:!0});var Te=I(k);b=P(Te,L),Te.forEach(d),ue.forEach(d),V.forEach(d),this.h()},h(){re(t,"stroke-width","1.6871"),re(t,"stroke-miterlimit","10"),c(t,"cx",0),c(t,"cy",0),c(t,"r",30),c(t,"transform",n=`translate(${e[16].x} ${e[16].y})`),c(t,"stroke","black"),c(t,"fill","transparent"),c(t,"class","transitionAll"),re(r,"stroke-width","1.6871"),re(r,"stroke-miterlimit","10"),c(r,"cx",0),c(r,"cy",0),c(r,"r",30),c(r,"transform",a=`translate(${e[17].x} ${e[17].y})`),c(r,"stroke","transparent"),c(r,"fill","transparent"),c(f,"x",0),c(f,"y",0),c(f,"text-anchor","middle"),c(f,"dy",".3em"),c(f,"transform",_=`translate(${e[17].x} ${e[17].y})`),c(f,"class","svgNoteName scaleNote transitionAll"),c(s,"class","clickable"),c(s,"tabindex","0"),c(s,"aria-label",g=`Play ${e[7][F(e[1]+e[15].semitonesFromRoot,e[7].length)]} ${Vt(e[20],e[0].scale)} triad`),c(s,"role","button"),re(v,"stroke-width","1.6871"),re(v,"stroke-miterlimit","10"),c(v,"cx",0),c(v,"cy",0),c(v,"r",30),c(v,"transform",M=`translate(${e[18].x} ${e[18].y})`),c(v,"stroke","transparent"),c(v,"fill","transparent"),c(k,"x",0),c(k,"y",0),c(k,"text-anchor","middle"),c(k,"dy",".3em"),c(k,"transform",B=`translate(${e[18].x} ${e[18].y})`),c(k,"class","svgNoteName scaleNote transitionAll"),c(p,"class","clickable"),c(p,"tabindex","0"),c(p,"aria-label",y=`Play ${nt(e[15],e[20])} interval`),c(p,"role","button"),c(o,"class","transitionNote")},m(A,V){q(A,t,V),q(A,l,V),q(A,o,V),h(o,s),h(s,r),h(s,f),h(f,u),h(o,p),h(p,v),h(p,k),h(k,b),C||(Q=[O(s,"click",ee),O(s,"keydown",ge),O(p,"click",ae),O(p,"keydown",ve)],C=!0)},p(A,V){e=A,V&159&&n!==(n=`translate(${e[16].x} ${e[16].y})`)&&c(t,"transform",n),V&195&&a!==(a=`translate(${e[17].x} ${e[17].y})`)&&c(r,"transform",a),V&1&&i!==(i=e[15].label+"")&&Y(u,i),V&195&&_!==(_=`translate(${e[17].x} ${e[17].y})`)&&c(f,"transform",_),V&131&&g!==(g=`Play ${e[7][F(e[1]+e[15].semitonesFromRoot,e[7].length)]} ${Vt(e[20],e[0].scale)} triad`)&&c(s,"aria-label",g),V&163&&M!==(M=`translate(${e[18].x} ${e[18].y})`)&&c(v,"transform",M),V&1&&L!==(L=nt(e[15],e[20])+"")&&Y(b,L),V&163&&B!==(B=`translate(${e[18].x} ${e[18].y})`)&&c(k,"transform",B),V&1&&y!==(y=`Play ${nt(e[15],e[20])} interval`)&&c(p,"aria-label",y)},d(A){A&&d(t),A&&d(l),A&&d(o),C=!1,st(Q)}}}function al(e){let t,n=[...e[0].scale],l=[];for(let o=0;o<n.length;o+=1)l[o]=Xt(Ht(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=lt()},l(o){for(let s=0;s<l.length;s+=1)l[s].l(o);t=lt()},m(o,s){for(let r=0;r<l.length;r+=1)l[r].m(o,s);q(o,t,s)},p(o,[s]){if(s&1023){n=[...o[0].scale];let r;for(r=0;r<n.length;r+=1){const a=Ht(o,n,r);l[r]?l[r].p(a,s):(l[r]=Xt(a),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},i:oe,o:oe,d(o){Le(l,o),o&&d(t)}}}function il(e,t,n){let{selectedScale:l}=t,{rootNoteIndex:o}=t,{availableModes:s}=t,{isEquivalentModing:r}=t,{notePositionCircle:a}=t,{intervalPositionCircle:f}=t,{scaleNotePositionCircle:i}=t,{bpm:u}=t,{chromaticNotes:_}=t;const g=b=>{Yn(b,o,_,60*1e3/u),Mt.update(B=>({interval:b}))},p=b=>{Qn(o,b,_,l.scale,60*1e3/u),Mt.update(B=>{const y=ln(b,l.scale,_);return{triad:{rootNote:_[F(o+l.scale[b].semitonesFromRoot,_.length)],firstInterval:{semitonesFromRoot:y[1].semitonesFromRoot-y[0].semitonesFromRoot},secondInterval:{semitonesFromRoot:y[2].semitonesFromRoot-y[0].semitonesFromRoot}}}})},v=b=>p(b),M=(b,B)=>B.key==="Enter"&&p(b),k=b=>g(b),L=(b,B)=>B.key==="Enter"&&g(b);return e.$$set=b=>{"selectedScale"in b&&n(0,l=b.selectedScale),"rootNoteIndex"in b&&n(1,o=b.rootNoteIndex),"availableModes"in b&&n(2,s=b.availableModes),"isEquivalentModing"in b&&n(3,r=b.isEquivalentModing),"notePositionCircle"in b&&n(4,a=b.notePositionCircle),"intervalPositionCircle"in b&&n(5,f=b.intervalPositionCircle),"scaleNotePositionCircle"in b&&n(6,i=b.scaleNotePositionCircle),"bpm"in b&&n(10,u=b.bpm),"chromaticNotes"in b&&n(7,_=b.chromaticNotes)},[l,o,s,r,a,f,i,_,g,p,u,v,M,k,L]}class cl extends Be{constructor(t){super(),Ve(this,t,il,al,Ge,{selectedScale:0,rootNoteIndex:1,availableModes:2,isEquivalentModing:3,notePositionCircle:4,intervalPositionCircle:5,scaleNotePositionCircle:6,bpm:10,chromaticNotes:7})}}function Ot(e,t,n){const l=e.slice();return l[2]=t[n],l}function yt(e){const t=e.slice(),n=an(t[0].interval.semitonesFromRoot);return t[1]=n,t}function Jt(e){let t,n,l,o,s=e[1],r=[];for(let a=0;a<s.length;a+=1)r[a]=Wt(Ot(e,s,a));return{c(){t=E("h3"),n=N("Equivalent intervals:"),l=w(),o=E("div");for(let a=0;a<r.length;a+=1)r[a].c()},l(a){t=S(a,"H3",{});var f=I(t);n=P(f,"Equivalent intervals:"),f.forEach(d),l=R(a),o=S(a,"DIV",{});var i=I(o);for(let u=0;u<r.length;u+=1)r[u].l(i);i.forEach(d)},m(a,f){q(a,t,f),h(t,n),q(a,l,f),q(a,o,f);for(let i=0;i<r.length;i+=1)r[i].m(o,null)},p(a,f){if(f&1){s=a[1];let i;for(i=0;i<s.length;i+=1){const u=Ot(a,s,i);r[i]?r[i].p(u,f):(r[i]=Wt(u),r[i].c(),r[i].m(o,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=s.length}},d(a){a&&d(t),a&&d(l),a&&d(o),Le(r,a)}}}function Wt(e){let t,n=qt(e[2].intervalType,e[2].intervalN)+"",l,o;return{c(){t=E("span"),l=N(n),o=N("; ")},l(s){t=S(s,"SPAN",{});var r=I(t);l=P(r,n),o=P(r,"; "),r.forEach(d)},m(s,r){q(s,t,r),h(t,l),h(t,o)},p(s,r){r&1&&n!==(n=qt(s[2].intervalType,s[2].intervalN)+"")&&Y(l,n)},d(s){s&&d(t)}}}function Kt(e){let t,n,l,o,s=x(e[0].triad.rootNote)+"",r,a,f=Tt(e[0].triad)+"",i;return{c(){t=E("h3"),n=N("Triad:"),l=w(),o=E("div"),r=N(s),a=w(),i=N(f)},l(u){t=S(u,"H3",{});var _=I(t);n=P(_,"Triad:"),_.forEach(d),l=R(u),o=S(u,"DIV",{});var g=I(o);r=P(g,s),a=R(g),i=P(g,f),g.forEach(d)},m(u,_){q(u,t,_),h(t,n),q(u,l,_),q(u,o,_),h(o,r),h(o,a),h(o,i)},p(u,_){_&1&&s!==(s=x(u[0].triad.rootNote)+"")&&Y(r,s),_&1&&f!==(f=Tt(u[0].triad)+"")&&Y(i,f)},d(u){u&&d(t),u&&d(l),u&&d(o)}}}function ul(e){let t,n,l=e[0].interval&&Jt(yt(e)),o=e[0].triad&&Kt(e);return{c(){t=E("div"),l&&l.c(),n=w(),o&&o.c(),this.h()},l(s){t=S(s,"DIV",{class:!0});var r=I(t);l&&l.l(r),n=R(r),o&&o.l(r),r.forEach(d),this.h()},h(){c(t,"class","focussedItemDetails svelte-1upnrae")},m(s,r){q(s,t,r),l&&l.m(t,null),h(t,n),o&&o.m(t,null)},p(s,[r]){s[0].interval?l?l.p(yt(s),r):(l=Jt(yt(s)),l.c(),l.m(t,n)):l&&(l.d(1),l=null),s[0].triad?o?o.p(s,r):(o=Kt(s),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i:oe,o:oe,d(s){s&&d(t),l&&l.d(),o&&o.d()}}}function fl(e,t,n){let l={};return Mt.subscribe(o=>{n(0,l={...o})}),[l]}class hl extends Be{constructor(t){super(),Ve(this,t,fl,ul,Ge,{})}}function Qt(e,t,n){const l=e.slice();l[17]=t[n];const o=l[1];return l[18]=o,l}function Yt(e,t,n){const l=e.slice();l[17]=t[n];const o=l[1]+l[17].rootIntervalToIonian-l[3].rootIntervalToIonian;return l[18]=o,l}function Zt(e,t,n){const l=e.slice();return l[23]=t[n],l}function $t(e){let t,n=e[23].label+"",l,o,s,r,a;function f(){return e[12](e[23])}return{c(){t=E("button"),l=N(n),o=w(),this.h()},l(i){t=S(i,"BUTTON",{class:!0});var u=I(t);l=P(u,n),o=R(u),u.forEach(d),this.h()},h(){c(t,"class",s=de(e[2]===e[23]?"selectedTab":"")+" svelte-eln2zd")},m(i,u){q(i,t,u),h(t,l),h(t,o),r||(a=O(t,"click",f),r=!0)},p(i,u){e=i,u&4&&s!==(s=de(e[2]===e[23]?"selectedTab":"")+" svelte-eln2zd")&&c(t,"class",s)},d(i){i&&d(t),r=!1,a()}}}function xt(e){let t,n,l=x(e[5][F(e[18],e[5].length)])+"",o,s,r=e[17].name+"",a,f,i,u,_;function g(){return e[13](e[17],e[18])}return{c(){t=E("button"),n=E("span"),o=N(l),s=w(),a=N(r),f=w(),this.h()},l(p){t=S(p,"BUTTON",{class:!0});var v=I(t);n=S(v,"SPAN",{class:!0});var M=I(n);o=P(M,l),M.forEach(d),s=R(v),a=P(v,r),f=R(v),v.forEach(d),this.h()},h(){c(n,"class","noteLabel svelte-eln2zd"),c(t,"class",i=de(e[17]===e[3]&&e[0]?"selectedTab":"")+" svelte-eln2zd")},m(p,v){q(p,t,v),h(t,n),h(n,o),h(t,s),h(t,a),h(t,f),u||(_=O(t,"click",g),u=!0)},p(p,v){e=p,v&14&&l!==(l=x(e[5][F(e[18],e[5].length)])+"")&&Y(o,l),v&4&&r!==(r=e[17].name+"")&&Y(a,r),v&13&&i!==(i=de(e[17]===e[3]&&e[0]?"selectedTab":"")+" svelte-eln2zd")&&c(t,"class",i)},d(p){p&&d(t),u=!1,_()}}}function en(e){let t,n,l=x(e[5][F(e[18],e[5].length)])+"",o,s,r=e[17].name+"",a,f,i,u,_;function g(){return e[14](e[17],e[18])}return{c(){t=E("button"),n=E("span"),o=N(l),s=w(),a=N(r),f=w(),this.h()},l(p){t=S(p,"BUTTON",{class:!0});var v=I(t);n=S(v,"SPAN",{class:!0});var M=I(n);o=P(M,l),M.forEach(d),s=R(v),a=P(v,r),f=R(v),v.forEach(d),this.h()},h(){c(n,"class","noteLabel svelte-eln2zd"),c(t,"class",i=de(e[17]===e[3]&&!e[0]?"selectedTab":"")+" svelte-eln2zd")},m(p,v){q(p,t,v),h(t,n),h(n,o),h(t,s),h(t,a),h(t,f),u||(_=O(t,"click",g),u=!0)},p(p,v){e=p,v&2&&l!==(l=x(e[5][F(e[18],e[5].length)])+"")&&Y(o,l),v&4&&r!==(r=e[17].name+"")&&Y(a,r),v&13&&i!==(i=de(e[17]===e[3]&&!e[0]?"selectedTab":"")+" svelte-eln2zd")&&c(t,"class",i)},d(p){p&&d(t),u=!1,_()}}}function ml(e){let t,n,l,o,s,r,a,f,i,u,_,g,p,v,M,k=x(e[5][F(e[1],e[5].length)])+"",L,b,B,y,C,Q,ee,ge,ae,ve,A,V,be,ce=e[2].label+"",ue,Te,at,it,je,fe,ze,ct,ut,ft,Ee,he,ht,Se,Me,ie,Ce,mt,dt,Ie,Qe,_t,gt,Ne,vt,bt,pe,ke,It,Nt;t=new Xn({props:{rootNoteIndex:e[1],selectedScaleName:e[3].name,chromaticNotes:e[5]}}),r=new cl({props:{selectedScale:e[3],bpm:e[4],rootNoteIndex:e[1],intervalPositionCircle:e[9],scaleNotePositionCircle:e[8],availableModes:e[2].modes,isEquivalentModing:e[0],notePositionCircle:e[7],chromaticNotes:e[5]}}),a=new sl({props:{notePositionCircle:e[7],rootNoteIndex:e[1],selectedScaleNotes:e[3].scale,chromaticNotes:e[5]}});let Pe=Et,J=[];for(let m=0;m<Pe.length;m+=1)J[m]=$t(Zt(e,Pe,m));let De=e[2].modes,W=[];for(let m=0;m<De.length;m+=1)W[m]=xt(Yt(e,De,m));let Fe=e[2].modes,K=[];for(let m=0;m<Fe.length;m+=1)K[m]=en(Qt(e,Fe,m));return he=new ll({props:{bpm:e[4],rootNoteIndex:e[1],selectedModesGroup:e[2],selectedScaleNotes:e[3].scale,chromaticNotes:e[5]}}),pe=new hl({}),{c(){Ue(t.$$.fragment),n=w(),l=E("div"),o=Z("svg"),s=Z("circle"),Ue(r.$$.fragment),Ue(a.$$.fragment),f=w(),i=E("div"),u=E("div"),_=N(`Root note
			`),g=E("button"),p=N("-"),v=w(),M=E("span"),L=N(k),b=w(),B=E("button"),y=N("+"),C=w(),Q=E("div"),ee=N(`Mode type
			`);for(let m=0;m<J.length;m+=1)J[m].c();ge=w(),ae=E("div"),ve=E("div"),A=E("div"),V=E("h2"),be=N("Equivalent "),ue=N(ce),Te=N(" modes"),at=w();for(let m=0;m<W.length;m+=1)W[m].c();it=w(),je=E("div"),fe=E("div"),ze=E("h2"),ct=N("Modes by modification"),ut=w();for(let m=0;m<K.length;m+=1)K[m].c();ft=w(),Ee=E("div"),Ue(he.$$.fragment),ht=w(),Se=E("div"),Me=E("div"),ie=E("div"),Ce=E("button"),mt=N("-"),dt=w(),Ie=E("span"),Qe=N(e[4]),_t=N(" bpm"),gt=w(),Ne=E("button"),vt=N("+"),bt=w(),Ue(pe.$$.fragment),this.h()},l(m){He(t.$$.fragment,m),n=R(m),l=S(m,"DIV",{class:!0,"data-sveltekit-preload-data":!0});var D=I(l);o=$(D,"svg",{id:!0,viewBox:!0,xmlns:!0,class:!0});var z=I(o);s=$(z,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,class:!0}),I(s).forEach(d),He(r.$$.fragment,z),He(a.$$.fragment,z),z.forEach(d),f=R(D),i=S(D,"DIV",{class:!0});var H=I(i);u=S(H,"DIV",{});var te=I(u);_=P(te,`Root note
			`),g=S(te,"BUTTON",{});var me=I(g);p=P(me,"-"),me.forEach(d),v=R(te),M=S(te,"SPAN",{class:!0});var T=I(M);L=P(T,k),T.forEach(d),b=R(te),B=S(te,"BUTTON",{});var ne=I(B);y=P(ne,"+"),ne.forEach(d),te.forEach(d),C=R(H),Q=S(H,"DIV",{});var pt=I(Q);ee=P(pt,`Mode type
			`);for(let le=0;le<J.length;le+=1)J[le].l(pt);pt.forEach(d),ge=R(H),ae=S(H,"DIV",{});var Ye=I(ae);ve=S(Ye,"DIV",{});var Pt=I(ve);A=S(Pt,"DIV",{});var Ze=I(A);V=S(Ze,"H2",{});var $e=I(V);be=P($e,"Equivalent "),ue=P($e,ce),Te=P($e," modes"),$e.forEach(d),at=R(Ze);for(let le=0;le<W.length;le+=1)W[le].l(Ze);Ze.forEach(d),Pt.forEach(d),it=R(Ye),je=S(Ye,"DIV",{});var Dt=I(je);fe=S(Dt,"DIV",{});var xe=I(fe);ze=S(xe,"H2",{});var Ft=I(ze);ct=P(Ft,"Modes by modification"),Ft.forEach(d),ut=R(xe);for(let le=0;le<K.length;le+=1)K[le].l(xe);xe.forEach(d),Dt.forEach(d),Ye.forEach(d),ft=R(H),Ee=S(H,"DIV",{class:!0});var wt=I(Ee);He(he.$$.fragment,wt),wt.forEach(d),ht=R(H),Se=S(H,"DIV",{class:!0});var Rt=I(Se);Me=S(Rt,"DIV",{class:!0});var At=I(Me);ie=S(At,"DIV",{});var we=I(ie);Ce=S(we,"BUTTON",{});var Lt=I(Ce);mt=P(Lt,"-"),Lt.forEach(d),dt=R(we),Ie=S(we,"SPAN",{class:!0});var kt=I(Ie);Qe=P(kt,e[4]),_t=P(kt," bpm"),kt.forEach(d),gt=R(we),Ne=S(we,"BUTTON",{});var Bt=I(Ne);vt=P(Bt,"+"),Bt.forEach(d),we.forEach(d),At.forEach(d),Rt.forEach(d),bt=R(H),He(pe.$$.fragment,H),H.forEach(d),D.forEach(d),this.h()},h(){c(s,"cx",e[6].xCentre),c(s,"cy",e[6].yCentre),c(s,"r",e[6].radius),c(s,"stroke","grey"),c(s,"stroke-width",1),c(s,"fill","var(--base-background-color)"),c(s,"class","background svelte-eln2zd"),c(o,"id","boxOfNotes"),c(o,"viewBox","0 0 800 800"),c(o,"xmlns","http://www.w3.org/2000/svg"),c(o,"class","svelte-eln2zd"),c(M,"class","noteLabel svelte-eln2zd"),c(Ee,"class","musicControls svelte-eln2zd"),c(Ie,"class","noteLabel svelte-eln2zd"),c(Me,"class","svelte-eln2zd"),c(Se,"class","musicControls svelte-eln2zd"),c(i,"class","boxOfButtons svelte-eln2zd"),c(l,"class","appContainer svelte-eln2zd"),c(l,"data-sveltekit-preload-data","hover")},m(m,D){Xe(t,m,D),q(m,n,D),q(m,l,D),h(l,o),h(o,s),Xe(r,o,null),Xe(a,o,null),h(l,f),h(l,i),h(i,u),h(u,_),h(u,g),h(g,p),h(u,v),h(u,M),h(M,L),h(u,b),h(u,B),h(B,y),h(i,C),h(i,Q),h(Q,ee);for(let z=0;z<J.length;z+=1)J[z].m(Q,null);h(i,ge),h(i,ae),h(ae,ve),h(ve,A),h(A,V),h(V,be),h(V,ue),h(V,Te),h(A,at);for(let z=0;z<W.length;z+=1)W[z].m(A,null);h(ae,it),h(ae,je),h(je,fe),h(fe,ze),h(ze,ct),h(fe,ut);for(let z=0;z<K.length;z+=1)K[z].m(fe,null);h(i,ft),h(i,Ee),Xe(he,Ee,null),h(i,ht),h(i,Se),h(Se,Me),h(Me,ie),h(ie,Ce),h(Ce,mt),h(ie,dt),h(ie,Ie),h(Ie,Qe),h(Ie,_t),h(ie,gt),h(ie,Ne),h(Ne,vt),h(i,bt),Xe(pe,i,null),ke=!0,It||(Nt=[O(g,"click",e[10]),O(B,"click",e[11]),O(Ce,"click",e[15]),O(Ne,"click",e[16])],It=!0)},p(m,[D]){const z={};D&2&&(z.rootNoteIndex=m[1]),D&8&&(z.selectedScaleName=m[3].name),t.$set(z);const H={};D&8&&(H.selectedScale=m[3]),D&16&&(H.bpm=m[4]),D&2&&(H.rootNoteIndex=m[1]),D&4&&(H.availableModes=m[2].modes),D&1&&(H.isEquivalentModing=m[0]),r.$set(H);const te={};if(D&2&&(te.rootNoteIndex=m[1]),D&8&&(te.selectedScaleNotes=m[3].scale),a.$set(te),(!ke||D&2)&&k!==(k=x(m[5][F(m[1],m[5].length)])+"")&&Y(L,k),D&12){Pe=Et;let T;for(T=0;T<Pe.length;T+=1){const ne=Zt(m,Pe,T);J[T]?J[T].p(ne,D):(J[T]=$t(ne),J[T].c(),J[T].m(Q,null))}for(;T<J.length;T+=1)J[T].d(1);J.length=Pe.length}if((!ke||D&4)&&ce!==(ce=m[2].label+"")&&Y(ue,ce),D&47){De=m[2].modes;let T;for(T=0;T<De.length;T+=1){const ne=Yt(m,De,T);W[T]?W[T].p(ne,D):(W[T]=xt(ne),W[T].c(),W[T].m(A,null))}for(;T<W.length;T+=1)W[T].d(1);W.length=De.length}if(D&47){Fe=m[2].modes;let T;for(T=0;T<Fe.length;T+=1){const ne=Qt(m,Fe,T);K[T]?K[T].p(ne,D):(K[T]=en(ne),K[T].c(),K[T].m(fe,null))}for(;T<K.length;T+=1)K[T].d(1);K.length=Fe.length}const me={};D&16&&(me.bpm=m[4]),D&2&&(me.rootNoteIndex=m[1]),D&4&&(me.selectedModesGroup=m[2]),D&8&&(me.selectedScaleNotes=m[3].scale),he.$set(me),(!ke||D&16)&&Y(Qe,m[4])},i(m){ke||(Oe(t.$$.fragment,m),Oe(r.$$.fragment,m),Oe(a.$$.fragment,m),Oe(he.$$.fragment,m),Oe(pe.$$.fragment,m),ke=!0)},o(m){Je(t.$$.fragment,m),Je(r.$$.fragment,m),Je(a.$$.fragment,m),Je(he.$$.fragment,m),Je(pe.$$.fragment,m),ke=!1},d(m){We(t,m),m&&d(n),m&&d(l),We(r),We(a),Le(J,m),Le(W,m),Le(K,m),We(he),We(pe),It=!1,st(Nt)}}}function dl(e,t,n){const l=ye,o={xCentre:800,yCentre:800,radius:600};let s=!0;const r={...o,radius:o.radius},a={...o,radius:o.radius-70},f={...o,radius:o.radius+70};let i=0,u=Et[0],_=u.modes[0],g=70;return[s,i,u,_,g,l,o,r,a,f,()=>{n(1,i=i-1),i<0&&n(1,i=i+12)},()=>{n(1,i=i+1),i>=12&&n(1,i=i-12)},y=>{u!==y&&(n(2,u=y),n(3,_=y.modes[0]))},(y,C)=>{n(3,_=y),n(1,i=F(C,l.length)),n(0,s=!0)},(y,C)=>{n(3,_=y),n(1,i=F(C,l.length)),n(0,s=!1)},()=>{g>10&&n(4,g=g-20)},()=>{n(4,g=g+20)}]}class vl extends Be{constructor(t){super(),Ve(this,t,dl,ml,Ge,{})}}export{vl as default};

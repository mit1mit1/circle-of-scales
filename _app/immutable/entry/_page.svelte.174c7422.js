import{S as ke,i as Se,s as be,k as $,q as w,a as L,J as A,e as ue,l as V,m as b,r as D,c as R,h as N,K as F,n as a,b as Z,G as c,L as ne,u as Y,H as fe,M as oe,N as Ce,p as Q,O as me}from"../chunks/index.9fc21f1b.js";const X=(e,l)=>{const t=e%l;return t<0?t+l:t},Ee=e=>{if(isNaN(e))return"NaN";const l=String(+e).split("")??[],t=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let r="",n=3;for(;n--;)r=(t[+(l.pop()??"")+n*10]||"")+r;return Array(+l.join("")+1).join("M")+r},p=[{sharpNote:"C",flatNote:"C"},{sharpNote:"C#",flatNote:"D♭",preferSharp:!0},{sharpNote:"D",flatNote:"D"},{sharpNote:"D#",flatNote:"E♭",preferSharp:!1},{sharpNote:"E",flatNote:"E"},{sharpNote:"F",flatNote:"F"},{sharpNote:"F#",flatNote:"G♭",preferSharp:!0},{sharpNote:"G",flatNote:"G"},{sharpNote:"G#",flatNote:"A♭",preferSharp:!1},{sharpNote:"A",flatNote:"A"},{sharpNote:"A#",flatNote:"B♭",preferSharp:!1},{sharpNote:"A",flatNote:"B"}],T=[2,2,1,2,2,2,1],P=(e,l,t)=>{let r=0;for(let n=e;n<l;n++)r+=t[X(n,t.length)];return r},Me=(e,l)=>e===4&&l===7?"major":e===3&&l===7?"minor":e===3&&l===6?"diminished":"bizarre",Te=(e,l,t)=>{const r=Ee(X(e+1,t.length+1)),n=e+l,g=Me(P(n,n+2,t),P(n,n+4,t));return g==="major"?r:g==="minor"?r.toLowerCase():g==="diminished"?`${r.toLowerCase()}°`:r},B=e=>{const l=[];for(let t=0;t<T.length;t++)l.push({semitonesFromRoot:P(e,e+t,T),label:Te(t,e,T)});return l},Pe=B(0),Xe=B(1),we=B(2),De=B(3),Ae=B(4),Ie=B(5),ye=B(6);console.log(ye);console.log(Ie);const ae=[{name:"Ionian / Major",scale:Pe,rootIntervalToIonian:P(0,0,T)},{name:"Dorian",scale:Xe,rootIntervalToIonian:P(0,1,T)},{name:"Phrygian",scale:we,rootIntervalToIonian:P(0,2,T)},{name:"Lydian",scale:De,rootIntervalToIonian:P(0,3,T)},{name:"Mixolydian",scale:Ae,rootIntervalToIonian:P(0,4,T)},{name:"Aeolian / Natural Minor",scale:Ie,rootIntervalToIonian:P(0,5,T)},{name:"Locrian",scale:ye,rootIntervalToIonian:P(0,6,T)}];function _e(e,l,t){const r=e.slice();r[10]=l[t];const n=r[0]+r[10].rootIntervalToIonian-r[1].rootIntervalToIonian;return r[11]=n,r}function ge(e,l,t){const r=e.slice();return r[14]=l[t],r}function de(e,l,t){const r=e.slice();return r[17]=l[t],r[19]=t,r}function pe(e){let l,t,r,n=e[3](e[17])+"",g,h;return{c(){l=A("g"),t=A("circle"),r=A("text"),g=w(n),this.h()},l(u){l=F(u,"g",{class:!0});var d=b(l);t=F(d,"circle",{style:!0,cx:!0,cy:!0,r:!0,stroke:!0,fill:!0,class:!0}),b(t).forEach(N),r=F(d,"text",{x:!0,y:!0,class:!0,"text-anchor":!0,dy:!0});var f=b(r);g=D(f,n),f.forEach(N),d.forEach(N),this.h()},h(){Q(t,"stroke-width","1.6871"),Q(t,"stroke-miterlimit","10"),a(t,"cx",e[4](e[19]).x),a(t,"cy",e[4](e[19]).y),a(t,"r",30),a(t,"stroke","black"),a(t,"fill","transparent"),a(t,"class","hidden transitionAll svelte-pnmlzq"),a(r,"x",e[4](e[19]).x),a(r,"y",e[4](e[19]).y),a(r,"class",h=me(`svgNoteName transitionAll ${e[6](e[19],e[0],e[1].scale)?"svgSelectedNoteName":""}`)+" svelte-pnmlzq"),a(r,"text-anchor","middle"),a(r,"dy",".3em"),a(l,"class","transitionAll svelte-pnmlzq")},m(u,d){Z(u,l,d),c(l,t),c(l,r),c(r,g)},p(u,d){d&3&&h!==(h=me(`svgNoteName transitionAll ${u[6](u[19],u[0],u[1].scale)?"svgSelectedNoteName":""}`)+" svelte-pnmlzq")&&a(r,"class",h)},d(u){u&&N(l)}}}function ve(e){let l,t,r,n,g,h,u=e[14].label+"",d,f;return{c(){l=A("g"),t=A("circle"),n=A("circle"),h=A("text"),d=w(u),this.h()},l(i){l=F(i,"g",{class:!0});var m=b(l);t=F(m,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0,class:!0}),b(t).forEach(N),n=F(m,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,class:!0,fill:!0}),b(n).forEach(N),h=F(m,"text",{x:!0,y:!0,"text-anchor":!0,dy:!0,transform:!0,class:!0});var I=b(h);d=D(I,u),I.forEach(N),m.forEach(N),this.h()},h(){Q(t,"stroke-width","1.6871"),Q(t,"stroke-miterlimit","10"),a(t,"cx",0),a(t,"cy",0),a(t,"r",30),a(t,"transform",r=`translate(${e[4](e[14].semitonesFromRoot+e[0]).x} ${e[4](e[14].semitonesFromRoot+e[0]).y})`),a(t,"stroke","black"),a(t,"fill","transparent"),a(t,"class","transitionAll svelte-pnmlzq"),Q(n,"stroke-width","1.6871"),Q(n,"stroke-miterlimit","10"),a(n,"cx",0),a(n,"cy",0),a(n,"r",30),a(n,"transform",g=`translate(${e[5](e[14],e[0]).x} ${e[5](e[14],e[0]).y})`),a(n,"class","hidden svelte-pnmlzq"),a(n,"fill","transparent"),a(h,"x",0),a(h,"y",0),a(h,"text-anchor","middle"),a(h,"dy",".3em"),a(h,"transform",f=`translate(${e[5](e[14],e[0]).x} ${e[5](e[14],e[0]).y})`),a(h,"class","svgNoteName scaleNote transitionAll svelte-pnmlzq"),a(l,"class","transitionNote")},m(i,m){Z(i,l,m),c(l,t),c(l,n),c(l,h),c(h,d)},p(i,m){m&3&&r!==(r=`translate(${i[4](i[14].semitonesFromRoot+i[0]).x} ${i[4](i[14].semitonesFromRoot+i[0]).y})`)&&a(t,"transform",r),m&3&&g!==(g=`translate(${i[5](i[14],i[0]).x} ${i[5](i[14],i[0]).y})`)&&a(n,"transform",g),m&2&&u!==(u=i[14].label+"")&&Y(d,u),m&3&&f!==(f=`translate(${i[5](i[14],i[0]).x} ${i[5](i[14],i[0]).y})`)&&a(h,"transform",f)},d(i){i&&N(l)}}}function Ne(e){let l,t=e[3](p[X(e[11],p.length)])+"",r,n,g=e[10].name+"",h,u,d,f;function i(){return e[9](e[10],e[11])}return{c(){l=$("button"),r=w(t),n=L(),h=w(g),u=L()},l(m){l=V(m,"BUTTON",{});var I=b(l);r=D(I,t),n=R(I),h=D(I,g),u=R(I),I.forEach(N)},m(m,I){Z(m,l,I),c(l,r),c(l,n),c(l,h),c(l,u),d||(f=ne(l,"click",i),d=!0)},p(m,I){e=m,I&3&&t!==(t=e[3](p[X(e[11],p.length)])+"")&&Y(r,t)},d(m){m&&N(l),d=!1,f()}}}function Fe(e){let l,t,r=e[3](p[X(e[0],p.length)])+"",n,g,h=e[1].name+"",u,d,f,i,m,I,_,E=e[3](p[X(e[0],p.length)])+"",j,q,z,x,ee,G,te,le,O,re,se,U=[...p],y=[];for(let s=0;s<U.length;s+=1)y[s]=pe(de(e,U,s));let H=[...e[1].scale],k=[];for(let s=0;s<H.length;s+=1)k[s]=ve(ge(e,H,s));let J=ae,S=[];for(let s=0;s<J.length;s+=1)S[s]=Ne(_e(e,J,s));return{c(){l=$("div"),t=$("h1"),n=w(r),g=L(),u=w(h),d=L(),f=A("svg"),i=A("circle");for(let s=0;s<y.length;s+=1)y[s].c();m=ue();for(let s=0;s<k.length;s+=1)k[s].c();I=L(),_=$("div"),j=w(E),q=L(),z=$("button"),x=w("-"),ee=L(),G=$("button"),te=w("+"),le=L(),O=$("div");for(let s=0;s<S.length;s+=1)S[s].c();this.h()},l(s){l=V(s,"DIV",{class:!0,"data-sveltekit-preload-data":!0});var v=b(l);t=V(v,"H1",{});var o=b(t);n=D(o,r),g=R(o),u=D(o,h),o.forEach(N),d=R(v),f=F(v,"svg",{id:!0,viewBox:!0,xmlns:!0,class:!0});var C=b(f);i=F(C,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),b(i).forEach(N);for(let M=0;M<y.length;M+=1)y[M].l(C);m=ue();for(let M=0;M<k.length;M+=1)k[M].l(C);C.forEach(N),I=R(v),_=V(v,"DIV",{});var K=b(_);j=D(K,E),q=R(K),z=V(K,"BUTTON",{});var ie=b(z);x=D(ie,"-"),ie.forEach(N),ee=R(K),G=V(K,"BUTTON",{});var ce=b(G);te=D(ce,"+"),ce.forEach(N),K.forEach(N),le=R(v),O=V(v,"DIV",{});var he=b(O);for(let M=0;M<S.length;M+=1)S[M].l(he);he.forEach(N),v.forEach(N),this.h()},h(){a(i,"cx",e[2].x),a(i,"cy",e[2].y),a(i,"r",W+30),a(i,"stroke","grey"),a(i,"stroke-width",1),a(i,"fill","transparent"),a(f,"id","boxOfNotes"),a(f,"viewBox","0 0 800 800"),a(f,"xmlns","http://www.w3.org/2000/svg"),a(f,"class","svelte-pnmlzq"),a(l,"class","appContainer svelte-pnmlzq"),a(l,"data-sveltekit-preload-data","hover")},m(s,v){Z(s,l,v),c(l,t),c(t,n),c(t,g),c(t,u),c(l,d),c(l,f),c(f,i);for(let o=0;o<y.length;o+=1)y[o].m(f,null);c(f,m);for(let o=0;o<k.length;o+=1)k[o].m(f,null);c(l,I),c(l,_),c(_,j),c(_,q),c(_,z),c(z,x),c(_,ee),c(_,G),c(G,te),c(l,le),c(l,O);for(let o=0;o<S.length;o+=1)S[o].m(O,null);re||(se=[ne(z,"click",e[7]),ne(G,"click",e[8])],re=!0)},p(s,[v]){if(v&1&&r!==(r=s[3](p[X(s[0],p.length)])+"")&&Y(n,r),v&2&&h!==(h=s[1].name+"")&&Y(u,h),v&91){U=[...p];let o;for(o=0;o<U.length;o+=1){const C=de(s,U,o);y[o]?y[o].p(C,v):(y[o]=pe(C),y[o].c(),y[o].m(f,m))}for(;o<y.length;o+=1)y[o].d(1);y.length=U.length}if(v&51){H=[...s[1].scale];let o;for(o=0;o<H.length;o+=1){const C=ge(s,H,o);k[o]?k[o].p(C,v):(k[o]=ve(C),k[o].c(),k[o].m(f,null))}for(;o<k.length;o+=1)k[o].d(1);k.length=H.length}if(v&1&&E!==(E=s[3](p[X(s[0],p.length)])+"")&&Y(j,E),v&11){J=ae;let o;for(o=0;o<J.length;o+=1){const C=_e(s,J,o);S[o]?S[o].p(C,v):(S[o]=Ne(C),S[o].c(),S[o].m(O,null))}for(;o<S.length;o+=1)S[o].d(1);S.length=J.length}},i:fe,o:fe,d(s){s&&N(l),oe(y,s),oe(k,s),oe(S,s),re=!1,Ce(se)}}}const W=330;function qe(e,l,t){const r={x:400,y:400};let n=0,g=ae[0];return[n,g,r,_=>_.preferSharp?_.sharpNote:_.flatNote,_=>({x:r.x+(W-10)*Math.cos(_*2*Math.PI/p.length-.5*Math.PI),y:r.y+(W-10)*Math.sin(_*2*Math.PI/p.length-.5*Math.PI)}),(_,E)=>({x:r.x+(W-80)*Math.cos((_.semitonesFromRoot+E)*2*Math.PI/p.length-.5*Math.PI),y:r.y+(W-80)*Math.sin((_.semitonesFromRoot+E)*2*Math.PI/p.length-.5*Math.PI)}),(_,E,j)=>{let q=X(_-E,p.length);return q<0&&(q=q+p.length),j.some(z=>z.semitonesFromRoot===q)},()=>{t(0,n=n-1),n<0&&t(0,n=n+12)},()=>{t(0,n=n+1),n>=12&&t(0,n=n-12)},(_,E)=>{t(1,g=_),t(0,n=X(E,p.length))}]}class Le extends ke{constructor(l){super(),Se(this,l,qe,Fe,be,{})}}export{Le as default};

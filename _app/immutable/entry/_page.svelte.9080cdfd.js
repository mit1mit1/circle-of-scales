import{S as ke,i as Se,s as be,k as X,q as D,a as B,J as F,e as me,l as w,m as I,r as L,c as j,h as g,K as R,n as o,b as Q,G as u,L as ae,u as x,H as _e,M as oe,N as Ce,p as K,O as de}from"../chunks/index.9fc21f1b.js";const A=(e,l)=>{const t=e%l;return t<0?t+l:t},Ee=e=>{if(isNaN(e))return"NaN";const l=String(+e).split("")??[],t=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let r="",a=3;for(;a--;)r=(t[+(l.pop()??"")+a*10]||"")+r;return Array(+l.join("")+1).join("M")+r},p=[{sharpNote:"C",flatNote:"C"},{sharpNote:"C#",flatNote:"D♭",preferSharp:!0},{sharpNote:"D",flatNote:"D"},{sharpNote:"D#",flatNote:"E♭",preferSharp:!1},{sharpNote:"E",flatNote:"E"},{sharpNote:"F",flatNote:"F"},{sharpNote:"F#",flatNote:"G♭",preferSharp:!0},{sharpNote:"G",flatNote:"G"},{sharpNote:"G#",flatNote:"A♭",preferSharp:!1},{sharpNote:"A",flatNote:"A"},{sharpNote:"A#",flatNote:"B♭",preferSharp:!1},{sharpNote:"A",flatNote:"B"}],P=[2,2,1,2,2,2,1],T=(e,l,t)=>{let r=0;for(let a=e;a<l;a++)r+=t[A(a,t.length)];return r},Me=(e,l)=>e===4&&l===7?"major":e===3&&l===7?"minor":e===3&&l===6?"diminished":"bizarre",Pe=(e,l,t)=>{const r=Ee(A(e+1,t.length+1)),a=e+l,d=Me(T(a,a+2,t),T(a,a+4,t));return d==="major"?r:d==="minor"?r.toLowerCase():d==="diminished"?`${r.toLowerCase()}°`:r},O=e=>{const l=[];for(let t=0;t<P.length;t++)l.push({semitonesFromRoot:T(e,e+t,P),label:Pe(t,e,P)});return l},Te=O(0),Ae=O(1),Xe=O(2),we=O(3),De=O(4),Le=O(5),Fe=O(6),ne=[{name:"Ionian / Major",scale:Te,rootIntervalToIonian:T(0,0,P)},{name:"Dorian",scale:Ae,rootIntervalToIonian:T(0,1,P)},{name:"Phrygian",scale:Xe,rootIntervalToIonian:T(0,2,P)},{name:"Lydian",scale:we,rootIntervalToIonian:T(0,3,P)},{name:"Mixolydian",scale:De,rootIntervalToIonian:T(0,4,P)},{name:"Aeolian / Natural Minor",scale:Le,rootIntervalToIonian:T(0,5,P)},{name:"Locrian",scale:Fe,rootIntervalToIonian:T(0,6,P)}];function ge(e,l,t){const r=e.slice();r[10]=l[t];const a=r[0]+r[10].rootIntervalToIonian-r[1].rootIntervalToIonian;return r[11]=a,r}function pe(e,l,t){const r=e.slice();return r[14]=l[t],r}function ve(e,l,t){const r=e.slice();return r[17]=l[t],r[19]=t,r}function Ne(e){let l,t,r,a=e[3](e[17])+"",d,m;return{c(){l=F("g"),t=F("circle"),r=F("text"),d=D(a),this.h()},l(_){l=R(_,"g",{class:!0});var h=I(l);t=R(h,"circle",{style:!0,cx:!0,cy:!0,r:!0,stroke:!0,fill:!0,class:!0}),I(t).forEach(g),r=R(h,"text",{x:!0,y:!0,class:!0,"text-anchor":!0,dy:!0});var f=I(r);d=L(f,a),f.forEach(g),h.forEach(g),this.h()},h(){K(t,"stroke-width","1.6871"),K(t,"stroke-miterlimit","10"),o(t,"cx",e[4](e[19]).x),o(t,"cy",e[4](e[19]).y),o(t,"r",30),o(t,"stroke","black"),o(t,"fill","transparent"),o(t,"class","hidden transitionAll svelte-r86e1m"),o(r,"x",e[4](e[19]).x),o(r,"y",e[4](e[19]).y),o(r,"class",m=de(`svgNoteName transitionAll ${e[6](e[19],e[0],e[1].scale)?"svgSelectedNoteName":""}`)+" svelte-r86e1m"),o(r,"text-anchor","middle"),o(r,"dy",".3em"),o(l,"class","transitionAll svelte-r86e1m")},m(_,h){Q(_,l,h),u(l,t),u(l,r),u(r,d)},p(_,h){h&3&&m!==(m=de(`svgNoteName transitionAll ${_[6](_[19],_[0],_[1].scale)?"svgSelectedNoteName":""}`)+" svelte-r86e1m")&&o(r,"class",m)},d(_){_&&g(l)}}}function Ie(e){let l,t,r,a,d,m,_=e[14].label+"",h,f;return{c(){l=F("g"),t=F("circle"),a=F("circle"),m=F("text"),h=D(_),this.h()},l(i){l=R(i,"g",{class:!0});var v=I(l);t=R(v,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0,class:!0}),I(t).forEach(g),a=R(v,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,class:!0,fill:!0}),I(a).forEach(g),m=R(v,"text",{x:!0,y:!0,"text-anchor":!0,dy:!0,transform:!0,class:!0});var C=I(m);h=L(C,_),C.forEach(g),v.forEach(g),this.h()},h(){K(t,"stroke-width","1.6871"),K(t,"stroke-miterlimit","10"),o(t,"cx",0),o(t,"cy",0),o(t,"r",30),o(t,"transform",r=`translate(${e[4](e[14].semitonesFromRoot+e[0]).x} ${e[4](e[14].semitonesFromRoot+e[0]).y})`),o(t,"stroke","black"),o(t,"fill","transparent"),o(t,"class","transitionAll svelte-r86e1m"),K(a,"stroke-width","1.6871"),K(a,"stroke-miterlimit","10"),o(a,"cx",0),o(a,"cy",0),o(a,"r",30),o(a,"transform",d=`translate(${e[5](e[14],e[0]).x} ${e[5](e[14],e[0]).y})`),o(a,"class","hidden svelte-r86e1m"),o(a,"fill","transparent"),o(m,"x",0),o(m,"y",0),o(m,"text-anchor","middle"),o(m,"dy",".3em"),o(m,"transform",f=`translate(${e[5](e[14],e[0]).x} ${e[5](e[14],e[0]).y})`),o(m,"class","svgNoteName scaleNote transitionAll svelte-r86e1m"),o(l,"class","transitionNote")},m(i,v){Q(i,l,v),u(l,t),u(l,a),u(l,m),u(m,h)},p(i,v){v&3&&r!==(r=`translate(${i[4](i[14].semitonesFromRoot+i[0]).x} ${i[4](i[14].semitonesFromRoot+i[0]).y})`)&&o(t,"transform",r),v&3&&d!==(d=`translate(${i[5](i[14],i[0]).x} ${i[5](i[14],i[0]).y})`)&&o(a,"transform",d),v&2&&_!==(_=i[14].label+"")&&x(h,_),v&3&&f!==(f=`translate(${i[5](i[14],i[0]).x} ${i[5](i[14],i[0]).y})`)&&o(m,"transform",f)},d(i){i&&g(l)}}}function ye(e){let l,t,r=e[3](p[A(e[11],p.length)])+"",a,d,m=e[10].name+"",_,h,f,i;function v(){return e[9](e[10],e[11])}return{c(){l=X("button"),t=X("span"),a=D(r),d=B(),_=D(m),h=B(),this.h()},l(C){l=w(C,"BUTTON",{class:!0});var c=I(l);t=w(c,"SPAN",{class:!0});var y=I(t);a=L(y,r),y.forEach(g),d=j(c),_=L(c,m),h=j(c),c.forEach(g),this.h()},h(){o(t,"class","noteLabel svelte-r86e1m"),o(l,"class","svelte-r86e1m")},m(C,c){Q(C,l,c),u(l,t),u(t,a),u(l,d),u(l,_),u(l,h),f||(i=ae(l,"click",v),f=!0)},p(C,c){e=C,c&3&&r!==(r=e[3](p[A(e[11],p.length)])+"")&&x(a,r)},d(C){C&&g(l),f=!1,i()}}}function Re(e){let l,t=e[3](p[A(e[0],p.length)])+"",r,a,d=e[1].name+"",m,_,h,f,i,v,C,c,y,W,$,V,Y=e[3](p[A(e[0],p.length)])+"",ee,te,G,le,re,U,se,ie,q=[...p],k=[];for(let n=0;n<q.length;n+=1)k[n]=Ne(ve(e,q,n));let z=[...e[1].scale],S=[];for(let n=0;n<z.length;n+=1)S[n]=Ie(pe(e,z,n));let H=ne,b=[];for(let n=0;n<H.length;n+=1)b[n]=ye(ge(e,H,n));return{c(){l=X("h1"),r=D(t),a=B(),m=D(d),_=B(),h=X("div"),f=F("svg"),i=F("circle");for(let n=0;n<k.length;n+=1)k[n].c();v=me();for(let n=0;n<S.length;n+=1)S[n].c();C=B(),c=X("div"),y=X("button"),W=D("-"),$=B(),V=X("span"),ee=D(Y),te=B(),G=X("button"),le=D("+"),re=B(),U=X("div");for(let n=0;n<b.length;n+=1)b[n].c();this.h()},l(n){l=w(n,"H1",{class:!0});var N=I(l);r=L(N,t),a=j(N),m=L(N,d),N.forEach(g),_=j(n),h=w(n,"DIV",{class:!0,"data-sveltekit-preload-data":!0});var s=I(h);f=R(s,"svg",{id:!0,viewBox:!0,xmlns:!0,class:!0});var E=I(f);i=R(E,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),I(i).forEach(g);for(let M=0;M<k.length;M+=1)k[M].l(E);v=me();for(let M=0;M<S.length;M+=1)S[M].l(E);E.forEach(g),C=j(s),c=w(s,"DIV",{});var J=I(c);y=w(J,"BUTTON",{class:!0});var ce=I(y);W=L(ce,"-"),ce.forEach(g),$=j(J),V=w(J,"SPAN",{class:!0});var he=I(V);ee=L(he,Y),he.forEach(g),te=j(J),G=w(J,"BUTTON",{class:!0});var ue=I(G);le=L(ue,"+"),ue.forEach(g),J.forEach(g),re=j(s),U=w(s,"DIV",{});var fe=I(U);for(let M=0;M<b.length;M+=1)b[M].l(fe);fe.forEach(g),s.forEach(g),this.h()},h(){o(l,"class","svelte-r86e1m"),o(i,"cx",e[2].x),o(i,"cy",e[2].y),o(i,"r",Z+30),o(i,"stroke","grey"),o(i,"stroke-width",1),o(i,"fill","transparent"),o(f,"id","boxOfNotes"),o(f,"viewBox","0 0 800 800"),o(f,"xmlns","http://www.w3.org/2000/svg"),o(f,"class","svelte-r86e1m"),o(y,"class","svelte-r86e1m"),o(V,"class","noteLabel svelte-r86e1m"),o(G,"class","svelte-r86e1m"),o(h,"class","appContainer svelte-r86e1m"),o(h,"data-sveltekit-preload-data","hover")},m(n,N){Q(n,l,N),u(l,r),u(l,a),u(l,m),Q(n,_,N),Q(n,h,N),u(h,f),u(f,i);for(let s=0;s<k.length;s+=1)k[s].m(f,null);u(f,v);for(let s=0;s<S.length;s+=1)S[s].m(f,null);u(h,C),u(h,c),u(c,y),u(y,W),u(c,$),u(c,V),u(V,ee),u(c,te),u(c,G),u(G,le),u(h,re),u(h,U);for(let s=0;s<b.length;s+=1)b[s].m(U,null);se||(ie=[ae(y,"click",e[7]),ae(G,"click",e[8])],se=!0)},p(n,[N]){if(N&1&&t!==(t=n[3](p[A(n[0],p.length)])+"")&&x(r,t),N&2&&d!==(d=n[1].name+"")&&x(m,d),N&91){q=[...p];let s;for(s=0;s<q.length;s+=1){const E=ve(n,q,s);k[s]?k[s].p(E,N):(k[s]=Ne(E),k[s].c(),k[s].m(f,v))}for(;s<k.length;s+=1)k[s].d(1);k.length=q.length}if(N&51){z=[...n[1].scale];let s;for(s=0;s<z.length;s+=1){const E=pe(n,z,s);S[s]?S[s].p(E,N):(S[s]=Ie(E),S[s].c(),S[s].m(f,null))}for(;s<S.length;s+=1)S[s].d(1);S.length=z.length}if(N&1&&Y!==(Y=n[3](p[A(n[0],p.length)])+"")&&x(ee,Y),N&11){H=ne;let s;for(s=0;s<H.length;s+=1){const E=ge(n,H,s);b[s]?b[s].p(E,N):(b[s]=ye(E),b[s].c(),b[s].m(U,null))}for(;s<b.length;s+=1)b[s].d(1);b.length=H.length}},i:_e,o:_e,d(n){n&&g(l),n&&g(_),n&&g(h),oe(k,n),oe(S,n),oe(b,n),se=!1,Ce(ie)}}}const Z=330;function $e(e,l,t){const r={x:400,y:400};let a=0,d=ne[0];return[a,d,r,c=>c.preferSharp?c.sharpNote:c.flatNote,c=>({x:r.x+(Z-10)*Math.cos(c*2*Math.PI/p.length-.5*Math.PI),y:r.y+(Z-10)*Math.sin(c*2*Math.PI/p.length-.5*Math.PI)}),(c,y)=>({x:r.x+(Z-80)*Math.cos((c.semitonesFromRoot+y)*2*Math.PI/p.length-.5*Math.PI),y:r.y+(Z-80)*Math.sin((c.semitonesFromRoot+y)*2*Math.PI/p.length-.5*Math.PI)}),(c,y,W)=>{let $=A(c-y,p.length);return $<0&&($=$+p.length),W.some(V=>V.semitonesFromRoot===$)},()=>{t(0,a=a-1),a<0&&t(0,a=a+12)},()=>{t(0,a=a+1),a>=12&&t(0,a=a-12)},(c,y)=>{t(1,d=c),t(0,a=A(y,p.length))}]}class Be extends ke{constructor(l){super(),Se(this,l,$e,Re,be,{})}}export{Be as default};

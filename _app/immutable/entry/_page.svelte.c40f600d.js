import{S as Ae,i as qe,s as Ge,k as E,q as C,a as w,l as S,m as p,r as F,c as R,h as d,n as c,b as O,G as h,u as Y,H as oe,J as X,K as nt,e as et,L as Re,M as Z,N as $,p as re,O as de,y as je,z as ze,A as Ue,g as He,d as Xe,B as Je}from"../chunks/index.0927561f.js";import{w as tn}from"../chunks/index.6d3ad0ca.js";const P=(e,t)=>{const n=e%t;return n<0?n+t:n},un=e=>{if(isNaN(e))return"NaN";const t=String(+e).split("")??[],n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let l="",o=3;for(;o--;)l=(n[+(t.pop()??"")+o*10]||"")+l;return Array(+t.join("")+1).join("M")+l},B=(e,t,n)=>{let l=0;for(let o=e;o<t;o++)l+=n[P(o,n.length)];return l},fn=e=>{const t=e%10,n=e%100;return t===1&&n!==11?e+"st":t===2&&n!==12?e+"nd":t===3&&n!==13?e+"rd":e+"th"},hn=[{sharpNote:"C",flatNote:"C",defaultOctaveFrequency:261.63},{sharpNote:"C#",flatNote:"D♭",preferSharp:!0,defaultOctaveFrequency:277.18},{sharpNote:"D",flatNote:"D",defaultOctaveFrequency:293.66},{sharpNote:"D#",flatNote:"E♭",preferSharp:!1,defaultOctaveFrequency:311.13},{sharpNote:"E",flatNote:"E",defaultOctaveFrequency:329.63},{sharpNote:"F",flatNote:"F",defaultOctaveFrequency:349.23},{sharpNote:"F#",flatNote:"G♭",preferSharp:!0,defaultOctaveFrequency:185},{sharpNote:"G",flatNote:"G",defaultOctaveFrequency:196},{sharpNote:"G#",flatNote:"A♭",preferSharp:!1,defaultOctaveFrequency:207.65},{sharpNote:"A",flatNote:"A",defaultOctaveFrequency:220},{sharpNote:"A#",flatNote:"B♭",preferSharp:!1,defaultOctaveFrequency:233.08},{sharpNote:"A",flatNote:"B",defaultOctaveFrequency:246.94}],mn=110,dn=6,tt=[1,1+1/5,1+2/5,1+3/5,1+4/5,2],_n=e=>{const t=[];let n="α";for(let l=0;l<e;l++)t.push({sharpNote:n,flatNote:n,defaultOctaveFrequency:mn*(1+tt[P(l,tt.length)])}),n=String.fromCharCode(n.charCodeAt(0)+1);return t},Le=_n(dn),H=[2,2,1,2,2,2,1],ae=[2,2,3,2,3],_e=[3,2,1,1,3,2],vn=[1,256/243,9/8,32/27,81/64,4/3,1024/729,3/2,128/81,27/16,16/9,243/128],gn=e=>{const t=[];for(let n=0;n<e;n++)t.push(1+tt[P(n,tt.length)]);return t},bn=gn(Le.length),nn=e=>{const t=[];for(let n=0;n<e;n++)t.push(.7/e);return t[0]+=.3,t},bt={pentatonic:[.3,.05,.05,.2,.1],diatonic:[.3,.05,.15,.05,.075,.05,.03],hexatonic:[.3,.075,.15,.075,.075,.05],mitchChromatic:nn(Le.length)},pt={pentatonic:[.5,.05,.15,.2,.05],diatonic:[.5,.02,.05,.1,.1,.05,.02],hexatonic:[.5,.02,.05,.1,.1,.05],mitchChromatic:nn(Le.length)},we=.25,pn=["perfect","major","minor","augmented","diminished"],ln=(e,t)=>e===4&&t===7?"major":e===3&&t===7?"minor":e===3&&t===6?"diminished":"bizarre",qt=(e,t)=>{const n=[{...t[e]},{...t[P(e+2,t.length)]},{...t[P(e+4,t.length)]}];return ln(n[1].semitonesFromRoot,n[1].semitonesFromRoot+n[2].semitonesFromRoot)},It=e=>ln(e.firstInterval.semitonesFromRoot,e.secondInterval.semitonesFromRoot),yn=(e,t)=>({firstInterval:{semitonesFromRoot:B(e,e+2,t)},secondInterval:{semitonesFromRoot:B(e,e+4,t)}}),on=(e,t,n)=>{const l=[{...t[e]},{...t[P(e+2,t.length)]},{...t[P(e+4,t.length)]}];return l.forEach((o,a)=>{a<=0||o.semitonesFromRoot<l[a-1].semitonesFromRoot&&(o.semitonesFromRoot+=n.length)}),l},In=(e,t,n)=>{const l=un(P(e+1,n.length+1)),o=e+t,a=It(yn(o,n));return a==="major"?l:a==="minor"?l.toLowerCase():a==="diminished"?`${l.toLowerCase()}°`:l},V=(e,t)=>{const n=[];for(let l=0;l<t.length;l++)n.push({semitonesFromRoot:B(e,e+l,t),label:In(l,e,t)});return n},kn=V(0,H),Tn=V(1,H),En=V(2,H),Sn=V(3,H),Nn=V(4,H),Mn=V(5,H),Cn=V(6,H),Fn=[{name:"Ionian / Major",scale:kn,rootIntervalToIonian:B(0,0,H)},{name:"Dorian",scale:Tn,rootIntervalToIonian:B(0,1,H)},{name:"Phrygian",scale:En,rootIntervalToIonian:B(0,2,H)},{name:"Lydian",scale:Sn,rootIntervalToIonian:B(0,3,H)},{name:"Mixolydian",scale:Nn,rootIntervalToIonian:B(0,4,H)},{name:"Aeolian / Natural Minor",scale:Mn,rootIntervalToIonian:B(0,5,H)},{name:"Locrian",scale:Cn,rootIntervalToIonian:B(0,6,H)}],Pn=V(0,ae),Dn=V(1,ae),wn=V(2,ae),Rn=V(3,ae),An=V(4,ae),qn=[{name:"Major",scale:Pn,rootIntervalToIonian:B(0,0,ae)},{name:"Suspended / Egyptian",scale:Dn,rootIntervalToIonian:B(0,1,ae)},{name:"Blues minor / Man Gong",scale:wn,rootIntervalToIonian:B(0,2,ae)},{name:"Blues major",scale:Rn,rootIntervalToIonian:B(0,3,ae)},{name:"Minor",scale:An,rootIntervalToIonian:B(0,4,ae)}],rn=e=>{const t=[];for(let n=0;n<e;n++)t.push(1);return t},Gn=V(0,rn(Le.length)),Ln=V(0,_e),Bn=V(1,_e);V(2,_e);V(3,_e);V(4,_e);V(5,_e);const On=[{name:"Minor",scale:Ln,rootIntervalToIonian:B(0,0,_e)},{name:"Major",scale:Bn,rootIntervalToIonian:B(0,1,_e)}];B(0,0,rn(Le.length));const Gt=[3,2,3,2,3,2,3,3,4,2,4];V(0,Gt),B(0,0,Gt);const Lt=[6,3,3,3,1,2,2,1,2,2,2,1,3,4,1,4,4,3,5,4,5,4,6,4,3,2,1,2,1,3,4,1,4];V(0,Lt),B(0,0,Lt);const kt=[{label:"Diatonic",modes:Fn,probabilityDistributions:{bass:pt.diatonic,melody:bt.diatonic}},{label:"Pentatonic",modes:qn,probabilityDistributions:{bass:pt.pentatonic,melody:bt.pentatonic}},{label:"Hexatonic (blues)",modes:On,probabilityDistributions:{bass:pt.hexatonic,melody:bt.hexatonic}}],x=e=>e.preferSharp?e.sharpNote:e.flatNote,Bt=(e,t,n,l)=>{let o=P(e-t,l);return o<0&&(o=o+l),n.some(a=>a.semitonesFromRoot===o)},an=(e,t)=>{if(e===1)return"augmented";if([1,4,5].includes(t)){if(e===0)return"perfect";if(e===-1)return"diminished"}if(e===0)return"major";if(e===-1)return"minor";if(e===-2)return"diminished"},Ot=(e,t)=>`${e} ${fn(t)}`,sn=(e,t)=>{if(e==="augmented")return`A${t}`;if(e==="perfect")return`P${t}`;if(e==="diminished")return`d${t}`;if(e==="major")return`M${t}`;if(e==="minor")return`m${t}`},Vn=(e,t)=>{const n=t+1,l=an(e,n);if(l)return sn(l,n)},cn=e=>{const t=[];let n=0;for(;n<H.length;){const l=n+1,o=e-B(0,n,H),a=an(o,l);a&&t.push({intervalType:a,intervalN:l}),n++}return t},xe=(e,t)=>{const n=e.semitonesFromRoot-B(0,t,H),l=Vn(n,t);if(l)return l;const o=cn(e.semitonesFromRoot);for(const a of pn)for(const r of o)if(r.intervalType===a)return sn(r.intervalType,r.intervalN);return`${e.semitonesFromRoot}s`};function jn(e){let t,n=x(e[2][P(e[0],e[2].length)])+"",l,o,a;return{c(){t=E("h1"),l=C(n),o=w(),a=C(e[1]),this.h()},l(r){t=S(r,"H1",{class:!0});var s=p(t);l=F(s,n),o=R(s),a=F(s,e[1]),s.forEach(d),this.h()},h(){c(t,"class","svelte-1j0u2fz")},m(r,s){O(r,t,s),h(t,l),h(t,o),h(t,a)},p(r,[s]){s&5&&n!==(n=x(r[2][P(r[0],r[2].length)])+"")&&Y(l,n),s&2&&Y(a,r[1])},i:oe,o:oe,d(r){r&&d(t)}}}function zn(e,t,n){let{rootNoteIndex:l}=t,{selectedScaleName:o}=t,{chromaticNotes:a}=t;return e.$$set=r=>{"rootNoteIndex"in r&&n(0,l=r.rootNoteIndex),"selectedScaleName"in r&&n(1,o=r.selectedScaleName),"chromaticNotes"in r&&n(2,a=r.chromaticNotes)},[l,o,a]}class Un extends Ae{constructor(t){super(),qe(this,t,zn,jn,Ge,{rootNoteIndex:0,selectedScaleName:1,chromaticNotes:2})}}const Tt=tn({}),Et=tn({}),Be=300,We=.75,Hn=240,Xn=1e-6,Jn={attackTime:.1,decayTime:.3,releaseTime:.5,maxSustainTime:.2,maxGain:.1,sustainGainRatio:.1,oscillatorType:"sine"},Wn=(e,t,n)=>{let l=1;for(;t<0;)t=t+n.length,l=l*.5;for(;t>=n.length;)t=t-n.length,l=l*2;return l=l*n[t],e.defaultOctaveFrequency*l},z=(e,t,n,l,o,a={})=>{const r=n.length===Le.length?bn:vn;if(o<l){console.log("Warning: note end time earlier than start time");return}const s={...Jn,...a};let{attackTime:f,decayTime:i}={...s};const{releaseTime:u,maxSustainTime:_,maxGain:v,sustainGainRatio:y,oscillatorType:g="triangle"}={...s},N=v*y,I=new AudioContext,q=I.createOscillator(),b=I.createGain(),G=I.createDynamicsCompressor();b.gain.value=.001,q.type=g,q.frequency.value=Wn(e,t,r),q.connect(b).connect(G).connect(I.destination);const k=o-l;f>k/(2*1e3)&&(f=k/(2*1e3)),i+f>k/1e3&&(i=k/1e3-f);let M=_??1e4;M>k/1e3-f-i&&(M=k/1e3-f-i),setTimeout(function(){const Q=I.currentTime+f;b.gain.exponentialRampToValueAtTime(v,Q),Tt.update(ee=>({...ee,[P(t,n.length)]:(ee[`${P(t,n.length)}`]??0)+1})),q.start(),setTimeout(()=>{b.gain.exponentialRampToValueAtTime(N,I.currentTime+i),setTimeout(()=>{b.gain.exponentialRampToValueAtTime(Xn,I.currentTime+u),Tt.update(ee=>{const ve=Math.max((ee[`${P(t,n.length)}`]??0)-1,0);return{...ee,[P(t,n.length)]:ve}}),setTimeout(function(){q.stop(),I.close()},u*1e3+2e3)},M*1e3)},f*1e3)},l)},Kn=(e,t,n,l,o=Be,a=We)=>{const r=o*.5*a,s=o*.5-r,f=o*.5,i=on(t,l,n);console.log("mapped scale notes",i),[...i].forEach((u,_)=>{z(n[e],u.semitonesFromRoot,n,_*f+s,_*f+s+r+f)}),[...i].forEach(u=>{z(n[e],u.semitonesFromRoot,n,(i.length+1)*f+s,(i.length+1)*f+s+(r+f)*2)})},Qn=(e,t,n,l=Be,o=We)=>{const a=l*.5*o,r=l*.5-a,s=l*.5;[...[{semitonesFromRoot:0},e]].forEach((i,u)=>{z(n[t],i.semitonesFromRoot,n,u*s+r,u*s+r+a+s)})},Yn=(e,t,n,l=Be,o=We)=>{const a=l*.5*o,r=l*.5-a,s=l*.5;[...e].forEach((f,i)=>{i===0?z(n[t],f.semitonesFromRoot,n,i*2*s+r,i*2*s+r+a+s):(z(n[t],0,n,i*2*s+r,i*2*s+r+a),z(n[t],f.semitonesFromRoot,n,(i*2+1)*s+r,(i*2+1)*s+r+a))}),z(n[t],0,n,e.length*2*s+r,e.length*2*s+r+a),z(n[t],n.length,n,(e.length*2+1)*s+r,(e.length*2+1)*s+r+a)},Zn=(e,t,n,l=Be,o=We)=>{const a=l*.5*o,r=l*.5-a,s=l*.5;z(n[t],e[0].semitonesFromRoot,n,r,s+r+a+s),[...e].forEach((f,i)=>{z(n[t],f.semitonesFromRoot,n,(i+2)*s+r,(i+2)*s+r+a+s)}),z(n[t],n.length,n,(e.length+2)*s+r,(e.length+2)*s+r+a),[...e].reverse().forEach((f,i)=>{z(n[t],f.semitonesFromRoot,n,(i+e.length+3)*s+r,(i+e.length+3)*s+r+a+s)})},$n=(e,t,n,l=Be,o=We)=>{const a=l*.5*o,r=l*.5-a,s=l*.5;z(n[t],0,n,r,r+s*(e.length*2+3),{maxSustainTime:s*(e.length*2+2),oscillatorType:"sine",sustainGainRatio:.5,maxGain:.0125}),[...e].forEach((f,i)=>{z(n[t],f.semitonesFromRoot,n,(i+2)*s+r,(i+2)*s+r+a+s)}),z(n[t],n.length,n,(e.length+2)*s+r,(e.length+2)*s+r+a),[...e].reverse().forEach((f,i)=>{z(n[t],f.semitonesFromRoot,n,(i+e.length+3)*s+r,(i+e.length+3)*s+r+a+s)})},xn=(e,t,n,l,o,a=Be,r=Hn)=>{let s=0;for(;s<=r;)e.forEach((i,u)=>{if(!(u>=l.length)&&Math.random()<l[u]){const _=Math.random();let v=1;_>.6&&(v=2),_>.8&&(v=4),_>.9&&(v=6),_>.95&&(v=3),_>.97&&(v=8),z(n[t],i.semitonesFromRoot,n,a*s,a*s+a*we*2*v,{attackTime:.6,maxGain:.1,sustainGainRatio:.1,oscillatorType:"sine",decayTime:.5,releaseTime:1.2,maxSustainTime:2.8}),s+=we}}),s+=we;let f=0;for(;f<=r;)e.forEach((i,u)=>{if(!(u>=o.length)&&Math.random()<o[u]){const _=Math.random();let v=1;_>.8&&(v=2),_>.9&&(v=4),_>.95&&(v=6),_>.97&&(v=3),_>.99&&(v=8),z(n[t],i.semitonesFromRoot,n,a*f,a*f+a*2*we*v,{attackTime:.3,maxGain:.1,sustainGainRatio:.1,oscillatorType:"sine",decayTime:.5,releaseTime:1.2,maxSustainTime:2.8}),f+=2*we}}),f+=2*we};function el(e){let t,n,l,o,a,r,s,f,i,u,_,v,y,g;return{c(){t=E("div"),n=E("button"),l=C("▶ Scale"),o=w(),a=E("button"),r=C("▶ Scale + Pedal"),s=w(),f=E("button"),i=C("▶ Scale + Drone"),u=w(),_=E("button"),v=C("▶ Jam")},l(N){t=S(N,"DIV",{});var I=p(t);n=S(I,"BUTTON",{});var q=p(n);l=F(q,"▶ Scale"),q.forEach(d),o=R(I),a=S(I,"BUTTON",{});var b=p(a);r=F(b,"▶ Scale + Pedal"),b.forEach(d),s=R(I),f=S(I,"BUTTON",{});var G=p(f);i=F(G,"▶ Scale + Drone"),G.forEach(d),u=R(I),_=S(I,"BUTTON",{});var k=p(_);v=F(k,"▶ Jam"),k.forEach(d),I.forEach(d)},m(N,I){O(N,t,I),h(t,n),h(n,l),h(t,o),h(t,a),h(a,r),h(t,s),h(t,f),h(f,i),h(t,u),h(t,_),h(_,v),y||(g=[X(n,"click",e[5]),X(a,"click",e[6]),X(f,"click",e[7]),X(_,"click",e[8])],y=!0)},p:oe,i:oe,o:oe,d(N){N&&d(t),y=!1,nt(g)}}}function tl(e,t,n){let{rootNoteIndex:l}=t,{bpm:o}=t,{selectedScaleNotes:a}=t,{selectedModesGroup:r}=t,{chromaticNotes:s}=t;const f=()=>{Zn(a,l,s,60*1e3/o)},i=()=>{Yn(a,l,s,60*1e3/o)},u=()=>{$n(a,l,s,60*1e3/o)},_=()=>{xn(a,l,s,r.probabilityDistributions.melody,r.probabilityDistributions.bass,60*1e3/o)};return e.$$set=v=>{"rootNoteIndex"in v&&n(0,l=v.rootNoteIndex),"bpm"in v&&n(1,o=v.bpm),"selectedScaleNotes"in v&&n(2,a=v.selectedScaleNotes),"selectedModesGroup"in v&&n(3,r=v.selectedModesGroup),"chromaticNotes"in v&&n(4,s=v.chromaticNotes)},[l,o,a,r,s,f,i,u,_]}class nl extends Ae{constructor(t){super(),qe(this,t,tl,el,Ge,{rootNoteIndex:0,bpm:1,selectedScaleNotes:2,selectedModesGroup:3,chromaticNotes:4})}}const Vt=(e,t,n,l)=>({x:n.xCentre+n.radius*Math.cos((e.semitonesFromRoot+t)*2*Math.PI/l-.5*Math.PI),y:n.yCentre+n.radius*Math.sin((e.semitonesFromRoot+t)*2*Math.PI/l-.5*Math.PI)}),St=(e,t,n)=>({x:t.xCentre+t.radius*Math.cos(e*2*Math.PI/n-.5*Math.PI),y:t.yCentre+t.radius*Math.sin(e*2*Math.PI/n-.5*Math.PI)});function jt(e,t,n){const l=e.slice();l[7]=t[n],l[10]=n;const o=St(l[10],l[0],l[3].length);return l[8]=o,l}function zt(e){let t,n,l,o,a,r,s,f,i,u=x(e[7])+"",_,v,y,g,N,I,q;function b(){return e[5](e[10])}function G(...k){return e[6](e[10],...k)}return{c(){t=Z("g"),n=Z("circle"),a=Z("circle"),i=Z("text"),_=C(u),this.h()},l(k){t=$(k,"g",{class:!0,tabindex:!0,"aria-label":!0,role:!0});var M=p(t);n=$(M,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0}),p(n).forEach(d),a=$(M,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0,opacity:!0,class:!0}),p(a).forEach(d),i=$(M,"text",{x:!0,y:!0,class:!0,"text-anchor":!0,dy:!0});var Q=p(i);_=F(Q,u),Q.forEach(d),M.forEach(d),this.h()},h(){re(n,"stroke-width","1.6871"),re(n,"stroke-miterlimit","10"),c(n,"cx",0),c(n,"cy",0),c(n,"r",30),c(n,"transform",l=`translate(${e[8].x} ${e[8].y})`),c(n,"stroke","transparent"),c(n,"fill",o=e[10]===e[1]?"yellow":"var(--base-background-color)"),re(a,"stroke-width","1.6871"),re(a,"stroke-miterlimit","10"),c(a,"cx",0),c(a,"cy",0),c(a,"r",30),c(a,"transform",r=`translate(${e[8].x} ${e[8].y})`),c(a,"stroke","transparent"),c(a,"fill",s=e[4][`${P(e[10]-e[1],e[3].length)}`]>0?"blue":"var(--base-background-color)"),c(a,"opacity",f=(e[4][`${P(e[10]-e[1],e[3].length)}`]??0)/3),c(a,"class","transitionAllQuick svelte-bfkdcb"),c(i,"x",v=e[8].x),c(i,"y",y=e[8].y),c(i,"class",g=de(`svgNoteName ${Bt(e[10],e[1],e[2],e[3].length)?"svgSelectedNoteName":""}`)+" svelte-bfkdcb"),c(i,"text-anchor","middle"),c(i,"dy",".3em"),c(t,"class","clickable"),c(t,"tabindex","0"),c(t,"aria-label",N=`Play ${x(e[7])}`),c(t,"role","button")},m(k,M){O(k,t,M),h(t,n),h(t,a),h(t,i),h(i,_),I||(q=[X(t,"click",b),X(t,"keydown",G)],I=!0)},p(k,M){e=k,M&9&&l!==(l=`translate(${e[8].x} ${e[8].y})`)&&c(n,"transform",l),M&2&&o!==(o=e[10]===e[1]?"yellow":"var(--base-background-color)")&&c(n,"fill",o),M&9&&r!==(r=`translate(${e[8].x} ${e[8].y})`)&&c(a,"transform",r),M&26&&s!==(s=e[4][`${P(e[10]-e[1],e[3].length)}`]>0?"blue":"var(--base-background-color)")&&c(a,"fill",s),M&26&&f!==(f=(e[4][`${P(e[10]-e[1],e[3].length)}`]??0)/3)&&c(a,"opacity",f),M&8&&u!==(u=x(e[7])+"")&&Y(_,u),M&9&&v!==(v=e[8].x)&&c(i,"x",v),M&9&&y!==(y=e[8].y)&&c(i,"y",y),M&14&&g!==(g=de(`svgNoteName ${Bt(e[10],e[1],e[2],e[3].length)?"svgSelectedNoteName":""}`)+" svelte-bfkdcb")&&c(i,"class",g),M&8&&N!==(N=`Play ${x(e[7])}`)&&c(t,"aria-label",N)},d(k){k&&d(t),I=!1,nt(q)}}}function ll(e){let t,n=[...e[3]],l=[];for(let o=0;o<n.length;o+=1)l[o]=zt(jt(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=et()},l(o){for(let a=0;a<l.length;a+=1)l[a].l(o);t=et()},m(o,a){for(let r=0;r<l.length;r+=1)l[r].m(o,a);O(o,t,a)},p(o,[a]){if(a&31){n=[...o[3]];let r;for(r=0;r<n.length;r+=1){const s=jt(o,n,r);l[r]?l[r].p(s,a):(l[r]=zt(s),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},i:oe,o:oe,d(o){Re(l,o),o&&d(t)}}}function ol(e,t,n){let{notePositionCircle:l}=t,{rootNoteIndex:o}=t,{selectedScaleNotes:a}=t,{chromaticNotes:r}=t,s={};Tt.subscribe(u=>{n(4,s=u)});const f=u=>z(r[o],P(u-o,r.length),r,0,500),i=(u,_)=>_.key==="Enter"&&z(r[o],P(u-o,r.length),r,0,500);return e.$$set=u=>{"notePositionCircle"in u&&n(0,l=u.notePositionCircle),"rootNoteIndex"in u&&n(1,o=u.rootNoteIndex),"selectedScaleNotes"in u&&n(2,a=u.selectedScaleNotes),"chromaticNotes"in u&&n(3,r=u.chromaticNotes)},[l,o,a,r,s,f,i]}class rl extends Ae{constructor(t){super(),qe(this,t,ol,ll,Ge,{notePositionCircle:0,rootNoteIndex:1,selectedScaleNotes:2,chromaticNotes:3})}}function Ut(e,t,n){const l=e.slice();l[15]=t[n],l[20]=n;const o=l[3]?St(l[0].scale[P(l[20]-l[2].findIndex(s=>s===l[0]),l[0].scale.length)].semitonesFromRoot+l[1],l[4],l[7].length):St(l[15].semitonesFromRoot+l[1],l[4],l[7].length);l[16]=o;const a=Vt(l[15],l[1],l[6],l[7].length);l[17]=a;const r=Vt(l[15],l[1],l[5],l[7].length);return l[18]=r,l}function Ht(e){let t,n,l,o,a,r,s,f,i=e[15].label+"",u,_,v,y,g,N,I,q=xe(e[15],e[20])+"",b,G,k,M,Q;function ee(){return e[11](e[20])}function ve(...A){return e[12](e[20],...A)}function se(){return e[13](e[15])}function ge(...A){return e[14](e[15],...A)}return{c(){t=Z("circle"),l=w(),o=Z("g"),a=Z("g"),r=Z("circle"),f=Z("text"),u=C(i),y=Z("g"),g=Z("circle"),I=Z("text"),b=C(q),this.h()},l(A){t=$(A,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0,class:!0}),p(t).forEach(d),l=R(A),o=$(A,"g",{class:!0});var L=p(o);a=$(L,"g",{class:!0,tabindex:!0,"aria-label":!0,role:!0});var be=p(a);r=$(be,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0}),p(r).forEach(d),f=$(be,"text",{x:!0,y:!0,"text-anchor":!0,dy:!0,transform:!0,class:!0});var ce=p(f);u=F(ce,i),ce.forEach(d),be.forEach(d),y=$(L,"g",{class:!0,tabindex:!0,"aria-label":!0,role:!0});var ue=p(y);g=$(ue,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0}),p(g).forEach(d),I=$(ue,"text",{x:!0,y:!0,"text-anchor":!0,dy:!0,transform:!0,class:!0});var ke=p(I);b=F(ke,q),ke.forEach(d),ue.forEach(d),L.forEach(d),this.h()},h(){re(t,"stroke-width","1.6871"),re(t,"stroke-miterlimit","10"),c(t,"cx",0),c(t,"cy",0),c(t,"r",30),c(t,"transform",n=`translate(${e[16].x} ${e[16].y})`),c(t,"stroke","black"),c(t,"fill","transparent"),c(t,"class","transitionAll"),re(r,"stroke-width","1.6871"),re(r,"stroke-miterlimit","10"),c(r,"cx",0),c(r,"cy",0),c(r,"r",30),c(r,"transform",s=`translate(${e[17].x} ${e[17].y})`),c(r,"stroke","transparent"),c(r,"fill","transparent"),c(f,"x",0),c(f,"y",0),c(f,"text-anchor","middle"),c(f,"dy",".3em"),c(f,"transform",_=`translate(${e[17].x} ${e[17].y})`),c(f,"class","svgNoteName scaleNote transitionAll"),c(a,"class","clickable"),c(a,"tabindex","0"),c(a,"aria-label",v=`Play ${e[7][P(e[1]+e[15].semitonesFromRoot,e[7].length)]} ${qt(e[20],e[0].scale)} triad`),c(a,"role","button"),re(g,"stroke-width","1.6871"),re(g,"stroke-miterlimit","10"),c(g,"cx",0),c(g,"cy",0),c(g,"r",30),c(g,"transform",N=`translate(${e[18].x} ${e[18].y})`),c(g,"stroke","transparent"),c(g,"fill","transparent"),c(I,"x",0),c(I,"y",0),c(I,"text-anchor","middle"),c(I,"dy",".3em"),c(I,"transform",G=`translate(${e[18].x} ${e[18].y})`),c(I,"class","svgNoteName scaleNote transitionAll"),c(y,"class","clickable"),c(y,"tabindex","0"),c(y,"aria-label",k=`Play ${xe(e[15],e[20])} interval`),c(y,"role","button"),c(o,"class","transitionNote")},m(A,L){O(A,t,L),O(A,l,L),O(A,o,L),h(o,a),h(a,r),h(a,f),h(f,u),h(o,y),h(y,g),h(y,I),h(I,b),M||(Q=[X(a,"click",ee),X(a,"keydown",ve),X(y,"click",se),X(y,"keydown",ge)],M=!0)},p(A,L){e=A,L&159&&n!==(n=`translate(${e[16].x} ${e[16].y})`)&&c(t,"transform",n),L&195&&s!==(s=`translate(${e[17].x} ${e[17].y})`)&&c(r,"transform",s),L&1&&i!==(i=e[15].label+"")&&Y(u,i),L&195&&_!==(_=`translate(${e[17].x} ${e[17].y})`)&&c(f,"transform",_),L&131&&v!==(v=`Play ${e[7][P(e[1]+e[15].semitonesFromRoot,e[7].length)]} ${qt(e[20],e[0].scale)} triad`)&&c(a,"aria-label",v),L&163&&N!==(N=`translate(${e[18].x} ${e[18].y})`)&&c(g,"transform",N),L&1&&q!==(q=xe(e[15],e[20])+"")&&Y(b,q),L&163&&G!==(G=`translate(${e[18].x} ${e[18].y})`)&&c(I,"transform",G),L&1&&k!==(k=`Play ${xe(e[15],e[20])} interval`)&&c(y,"aria-label",k)},d(A){A&&d(t),A&&d(l),A&&d(o),M=!1,nt(Q)}}}function al(e){let t,n=[...e[0].scale],l=[];for(let o=0;o<n.length;o+=1)l[o]=Ht(Ut(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=et()},l(o){for(let a=0;a<l.length;a+=1)l[a].l(o);t=et()},m(o,a){for(let r=0;r<l.length;r+=1)l[r].m(o,a);O(o,t,a)},p(o,[a]){if(a&1023){n=[...o[0].scale];let r;for(r=0;r<n.length;r+=1){const s=Ut(o,n,r);l[r]?l[r].p(s,a):(l[r]=Ht(s),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},i:oe,o:oe,d(o){Re(l,o),o&&d(t)}}}function sl(e,t,n){let{selectedScale:l}=t,{rootNoteIndex:o}=t,{availableModes:a}=t,{isEquivalentModing:r}=t,{notePositionCircle:s}=t,{intervalPositionCircle:f}=t,{scaleNotePositionCircle:i}=t,{bpm:u}=t,{chromaticNotes:_}=t;const v=b=>{Qn(b,o,_,60*1e3/u),Et.update(G=>({interval:b}))},y=b=>{Kn(o,b,_,l.scale,60*1e3/u),Et.update(G=>{const k=on(b,l.scale,_);return{triad:{rootNote:_[P(o+l.scale[b].semitonesFromRoot,_.length)],firstInterval:{semitonesFromRoot:k[1].semitonesFromRoot-k[0].semitonesFromRoot},secondInterval:{semitonesFromRoot:k[2].semitonesFromRoot-k[0].semitonesFromRoot}}}})},g=b=>y(b),N=(b,G)=>G.key==="Enter"&&y(b),I=b=>v(b),q=(b,G)=>G.key==="Enter"&&v(b);return e.$$set=b=>{"selectedScale"in b&&n(0,l=b.selectedScale),"rootNoteIndex"in b&&n(1,o=b.rootNoteIndex),"availableModes"in b&&n(2,a=b.availableModes),"isEquivalentModing"in b&&n(3,r=b.isEquivalentModing),"notePositionCircle"in b&&n(4,s=b.notePositionCircle),"intervalPositionCircle"in b&&n(5,f=b.intervalPositionCircle),"scaleNotePositionCircle"in b&&n(6,i=b.scaleNotePositionCircle),"bpm"in b&&n(10,u=b.bpm),"chromaticNotes"in b&&n(7,_=b.chromaticNotes)},[l,o,a,r,s,f,i,_,v,y,u,g,N,I,q]}class il extends Ae{constructor(t){super(),qe(this,t,sl,al,Ge,{selectedScale:0,rootNoteIndex:1,availableModes:2,isEquivalentModing:3,notePositionCircle:4,intervalPositionCircle:5,scaleNotePositionCircle:6,bpm:10,chromaticNotes:7})}}function Xt(e,t,n){const l=e.slice();return l[2]=t[n],l}function yt(e){const t=e.slice(),n=cn(t[0].interval.semitonesFromRoot);return t[1]=n,t}function Jt(e){let t,n,l,o,a=e[1],r=[];for(let s=0;s<a.length;s+=1)r[s]=Wt(Xt(e,a,s));return{c(){t=E("h3"),n=C("Equivalent intervals:"),l=w(),o=E("div");for(let s=0;s<r.length;s+=1)r[s].c()},l(s){t=S(s,"H3",{});var f=p(t);n=F(f,"Equivalent intervals:"),f.forEach(d),l=R(s),o=S(s,"DIV",{});var i=p(o);for(let u=0;u<r.length;u+=1)r[u].l(i);i.forEach(d)},m(s,f){O(s,t,f),h(t,n),O(s,l,f),O(s,o,f);for(let i=0;i<r.length;i+=1)r[i].m(o,null)},p(s,f){if(f&1){a=s[1];let i;for(i=0;i<a.length;i+=1){const u=Xt(s,a,i);r[i]?r[i].p(u,f):(r[i]=Wt(u),r[i].c(),r[i].m(o,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=a.length}},d(s){s&&d(t),s&&d(l),s&&d(o),Re(r,s)}}}function Wt(e){let t,n=Ot(e[2].intervalType,e[2].intervalN)+"",l,o;return{c(){t=E("span"),l=C(n),o=C("; ")},l(a){t=S(a,"SPAN",{});var r=p(t);l=F(r,n),o=F(r,"; "),r.forEach(d)},m(a,r){O(a,t,r),h(t,l),h(t,o)},p(a,r){r&1&&n!==(n=Ot(a[2].intervalType,a[2].intervalN)+"")&&Y(l,n)},d(a){a&&d(t)}}}function Kt(e){let t,n,l,o,a=x(e[0].triad.rootNote)+"",r,s,f=It(e[0].triad)+"",i;return{c(){t=E("h3"),n=C("Triad:"),l=w(),o=E("div"),r=C(a),s=w(),i=C(f)},l(u){t=S(u,"H3",{});var _=p(t);n=F(_,"Triad:"),_.forEach(d),l=R(u),o=S(u,"DIV",{});var v=p(o);r=F(v,a),s=R(v),i=F(v,f),v.forEach(d)},m(u,_){O(u,t,_),h(t,n),O(u,l,_),O(u,o,_),h(o,r),h(o,s),h(o,i)},p(u,_){_&1&&a!==(a=x(u[0].triad.rootNote)+"")&&Y(r,a),_&1&&f!==(f=It(u[0].triad)+"")&&Y(i,f)},d(u){u&&d(t),u&&d(l),u&&d(o)}}}function cl(e){let t,n,l=e[0].interval&&Jt(yt(e)),o=e[0].triad&&Kt(e);return{c(){t=E("div"),l&&l.c(),n=w(),o&&o.c(),this.h()},l(a){t=S(a,"DIV",{class:!0});var r=p(t);l&&l.l(r),n=R(r),o&&o.l(r),r.forEach(d),this.h()},h(){c(t,"class","focussedItemDetails svelte-1upnrae")},m(a,r){O(a,t,r),l&&l.m(t,null),h(t,n),o&&o.m(t,null)},p(a,[r]){a[0].interval?l?l.p(yt(a),r):(l=Jt(yt(a)),l.c(),l.m(t,n)):l&&(l.d(1),l=null),a[0].triad?o?o.p(a,r):(o=Kt(a),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i:oe,o:oe,d(a){a&&d(t),l&&l.d(),o&&o.d()}}}function ul(e,t,n){let l={};return Et.subscribe(o=>{n(0,l={...o})}),[l]}class fl extends Ae{constructor(t){super(),qe(this,t,ul,cl,Ge,{})}}function Qt(e,t,n){const l=e.slice();l[17]=t[n];const o=l[1];return l[18]=o,l}function Yt(e,t,n){const l=e.slice();l[17]=t[n];const o=l[1]+l[17].rootIntervalToIonian-l[3].rootIntervalToIonian;return l[18]=o,l}function Zt(e,t,n){const l=e.slice();return l[23]=t[n],l}function $t(e){let t,n=e[23].label+"",l,o,a,r,s;function f(){return e[12](e[23])}return{c(){t=E("button"),l=C(n),o=w(),this.h()},l(i){t=S(i,"BUTTON",{class:!0});var u=p(t);l=F(u,n),o=R(u),u.forEach(d),this.h()},h(){c(t,"class",a=de(e[2]===e[23]?"selectedTab":"")+" svelte-eln2zd")},m(i,u){O(i,t,u),h(t,l),h(t,o),r||(s=X(t,"click",f),r=!0)},p(i,u){e=i,u&4&&a!==(a=de(e[2]===e[23]?"selectedTab":"")+" svelte-eln2zd")&&c(t,"class",a)},d(i){i&&d(t),r=!1,s()}}}function xt(e){let t,n,l=x(e[5][P(e[18],e[5].length)])+"",o,a,r=e[17].name+"",s,f,i,u,_;function v(){return e[13](e[17],e[18])}return{c(){t=E("button"),n=E("span"),o=C(l),a=w(),s=C(r),f=w(),this.h()},l(y){t=S(y,"BUTTON",{class:!0});var g=p(t);n=S(g,"SPAN",{class:!0});var N=p(n);o=F(N,l),N.forEach(d),a=R(g),s=F(g,r),f=R(g),g.forEach(d),this.h()},h(){c(n,"class","noteLabel svelte-eln2zd"),c(t,"class",i=de(e[17]===e[3]&&e[0]?"selectedTab":"")+" svelte-eln2zd")},m(y,g){O(y,t,g),h(t,n),h(n,o),h(t,a),h(t,s),h(t,f),u||(_=X(t,"click",v),u=!0)},p(y,g){e=y,g&14&&l!==(l=x(e[5][P(e[18],e[5].length)])+"")&&Y(o,l),g&4&&r!==(r=e[17].name+"")&&Y(s,r),g&13&&i!==(i=de(e[17]===e[3]&&e[0]?"selectedTab":"")+" svelte-eln2zd")&&c(t,"class",i)},d(y){y&&d(t),u=!1,_()}}}function en(e){let t,n,l=x(e[5][P(e[18],e[5].length)])+"",o,a,r=e[17].name+"",s,f,i,u,_;function v(){return e[14](e[17],e[18])}return{c(){t=E("button"),n=E("span"),o=C(l),a=w(),s=C(r),f=w(),this.h()},l(y){t=S(y,"BUTTON",{class:!0});var g=p(t);n=S(g,"SPAN",{class:!0});var N=p(n);o=F(N,l),N.forEach(d),a=R(g),s=F(g,r),f=R(g),g.forEach(d),this.h()},h(){c(n,"class","noteLabel svelte-eln2zd"),c(t,"class",i=de(e[17]===e[3]&&!e[0]?"selectedTab":"")+" svelte-eln2zd")},m(y,g){O(y,t,g),h(t,n),h(n,o),h(t,a),h(t,s),h(t,f),u||(_=X(t,"click",v),u=!0)},p(y,g){e=y,g&2&&l!==(l=x(e[5][P(e[18],e[5].length)])+"")&&Y(o,l),g&4&&r!==(r=e[17].name+"")&&Y(s,r),g&13&&i!==(i=de(e[17]===e[3]&&!e[0]?"selectedTab":"")+" svelte-eln2zd")&&c(t,"class",i)},d(y){y&&d(t),u=!1,_()}}}function hl(e){let t,n,l,o,a,r,s,f,i,u,_,v,y,g,N,I=x(e[5][P(e[1],e[5].length)])+"",q,b,G,k,M,Q,ee,ve,se,ge,A,L,be,ce=e[2].label+"",ue,ke,lt,ot,Oe,fe,Ve,rt,at,st,Te,he,it,Ee,Se,ie,Ne,ct,ut,pe,Ke,ft,ht,Me,mt,dt,ye,Ie,_t,Nt;t=new Un({props:{rootNoteIndex:e[1],selectedScaleName:e[3].name,chromaticNotes:e[5]}}),r=new il({props:{selectedScale:e[3],bpm:e[4],rootNoteIndex:e[1],intervalPositionCircle:e[9],scaleNotePositionCircle:e[8],availableModes:e[2].modes,isEquivalentModing:e[0],notePositionCircle:e[7],chromaticNotes:e[5]}}),s=new rl({props:{notePositionCircle:e[7],rootNoteIndex:e[1],selectedScaleNotes:e[3].scale,chromaticNotes:e[5]}});let Ce=kt,J=[];for(let m=0;m<Ce.length;m+=1)J[m]=$t(Zt(e,Ce,m));let Fe=e[2].modes,W=[];for(let m=0;m<Fe.length;m+=1)W[m]=xt(Yt(e,Fe,m));let Pe=e[2].modes,K=[];for(let m=0;m<Pe.length;m+=1)K[m]=en(Qt(e,Pe,m));return he=new nl({props:{bpm:e[4],rootNoteIndex:e[1],selectedModesGroup:e[2],selectedScaleNotes:e[3].scale,chromaticNotes:e[5]}}),ye=new fl({}),{c(){je(t.$$.fragment),n=w(),l=E("div"),o=Z("svg"),a=Z("circle"),je(r.$$.fragment),je(s.$$.fragment),f=w(),i=E("div"),u=E("div"),_=C(`Root note
			`),v=E("button"),y=C("-"),g=w(),N=E("span"),q=C(I),b=w(),G=E("button"),k=C("+"),M=w(),Q=E("div"),ee=C(`Mode type
			`);for(let m=0;m<J.length;m+=1)J[m].c();ve=w(),se=E("div"),ge=E("div"),A=E("div"),L=E("h2"),be=C("Equivalent "),ue=C(ce),ke=C(" modes"),lt=w();for(let m=0;m<W.length;m+=1)W[m].c();ot=w(),Oe=E("div"),fe=E("div"),Ve=E("h2"),rt=C("Modes by modification"),at=w();for(let m=0;m<K.length;m+=1)K[m].c();st=w(),Te=E("div"),je(he.$$.fragment),it=w(),Ee=E("div"),Se=E("div"),ie=E("div"),Ne=E("button"),ct=C("-"),ut=w(),pe=E("span"),Ke=C(e[4]),ft=C(" bpm"),ht=w(),Me=E("button"),mt=C("+"),dt=w(),je(ye.$$.fragment),this.h()},l(m){ze(t.$$.fragment,m),n=R(m),l=S(m,"DIV",{class:!0,"data-sveltekit-preload-data":!0});var D=p(l);o=$(D,"svg",{id:!0,viewBox:!0,xmlns:!0,class:!0});var j=p(o);a=$(j,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,class:!0}),p(a).forEach(d),ze(r.$$.fragment,j),ze(s.$$.fragment,j),j.forEach(d),f=R(D),i=S(D,"DIV",{class:!0});var U=p(i);u=S(U,"DIV",{});var te=p(u);_=F(te,`Root note
			`),v=S(te,"BUTTON",{});var me=p(v);y=F(me,"-"),me.forEach(d),g=R(te),N=S(te,"SPAN",{class:!0});var T=p(N);q=F(T,I),T.forEach(d),b=R(te),G=S(te,"BUTTON",{});var ne=p(G);k=F(ne,"+"),ne.forEach(d),te.forEach(d),M=R(U),Q=S(U,"DIV",{});var vt=p(Q);ee=F(vt,`Mode type
			`);for(let le=0;le<J.length;le+=1)J[le].l(vt);vt.forEach(d),ve=R(U),se=S(U,"DIV",{});var Qe=p(se);ge=S(Qe,"DIV",{});var Mt=p(ge);A=S(Mt,"DIV",{});var Ye=p(A);L=S(Ye,"H2",{});var Ze=p(L);be=F(Ze,"Equivalent "),ue=F(Ze,ce),ke=F(Ze," modes"),Ze.forEach(d),lt=R(Ye);for(let le=0;le<W.length;le+=1)W[le].l(Ye);Ye.forEach(d),Mt.forEach(d),ot=R(Qe),Oe=S(Qe,"DIV",{});var Ct=p(Oe);fe=S(Ct,"DIV",{});var $e=p(fe);Ve=S($e,"H2",{});var Ft=p(Ve);rt=F(Ft,"Modes by modification"),Ft.forEach(d),at=R($e);for(let le=0;le<K.length;le+=1)K[le].l($e);$e.forEach(d),Ct.forEach(d),Qe.forEach(d),st=R(U),Te=S(U,"DIV",{class:!0});var Pt=p(Te);ze(he.$$.fragment,Pt),Pt.forEach(d),it=R(U),Ee=S(U,"DIV",{class:!0});var Dt=p(Ee);Se=S(Dt,"DIV",{class:!0});var wt=p(Se);ie=S(wt,"DIV",{});var De=p(ie);Ne=S(De,"BUTTON",{});var Rt=p(Ne);ct=F(Rt,"-"),Rt.forEach(d),ut=R(De),pe=S(De,"SPAN",{class:!0});var gt=p(pe);Ke=F(gt,e[4]),ft=F(gt," bpm"),gt.forEach(d),ht=R(De),Me=S(De,"BUTTON",{});var At=p(Me);mt=F(At,"+"),At.forEach(d),De.forEach(d),wt.forEach(d),Dt.forEach(d),dt=R(U),ze(ye.$$.fragment,U),U.forEach(d),D.forEach(d),this.h()},h(){c(a,"cx",e[6].xCentre),c(a,"cy",e[6].yCentre),c(a,"r",e[6].radius),c(a,"stroke","grey"),c(a,"stroke-width",1),c(a,"fill","var(--base-background-color)"),c(a,"class","background svelte-eln2zd"),c(o,"id","boxOfNotes"),c(o,"viewBox","0 0 800 800"),c(o,"xmlns","http://www.w3.org/2000/svg"),c(o,"class","svelte-eln2zd"),c(N,"class","noteLabel svelte-eln2zd"),c(Te,"class","musicControls svelte-eln2zd"),c(pe,"class","noteLabel svelte-eln2zd"),c(Se,"class","svelte-eln2zd"),c(Ee,"class","musicControls svelte-eln2zd"),c(i,"class","boxOfButtons svelte-eln2zd"),c(l,"class","appContainer svelte-eln2zd"),c(l,"data-sveltekit-preload-data","hover")},m(m,D){Ue(t,m,D),O(m,n,D),O(m,l,D),h(l,o),h(o,a),Ue(r,o,null),Ue(s,o,null),h(l,f),h(l,i),h(i,u),h(u,_),h(u,v),h(v,y),h(u,g),h(u,N),h(N,q),h(u,b),h(u,G),h(G,k),h(i,M),h(i,Q),h(Q,ee);for(let j=0;j<J.length;j+=1)J[j].m(Q,null);h(i,ve),h(i,se),h(se,ge),h(ge,A),h(A,L),h(L,be),h(L,ue),h(L,ke),h(A,lt);for(let j=0;j<W.length;j+=1)W[j].m(A,null);h(se,ot),h(se,Oe),h(Oe,fe),h(fe,Ve),h(Ve,rt),h(fe,at);for(let j=0;j<K.length;j+=1)K[j].m(fe,null);h(i,st),h(i,Te),Ue(he,Te,null),h(i,it),h(i,Ee),h(Ee,Se),h(Se,ie),h(ie,Ne),h(Ne,ct),h(ie,ut),h(ie,pe),h(pe,Ke),h(pe,ft),h(ie,ht),h(ie,Me),h(Me,mt),h(i,dt),Ue(ye,i,null),Ie=!0,_t||(Nt=[X(v,"click",e[10]),X(G,"click",e[11]),X(Ne,"click",e[15]),X(Me,"click",e[16])],_t=!0)},p(m,[D]){const j={};D&2&&(j.rootNoteIndex=m[1]),D&8&&(j.selectedScaleName=m[3].name),t.$set(j);const U={};D&8&&(U.selectedScale=m[3]),D&16&&(U.bpm=m[4]),D&2&&(U.rootNoteIndex=m[1]),D&4&&(U.availableModes=m[2].modes),D&1&&(U.isEquivalentModing=m[0]),r.$set(U);const te={};if(D&2&&(te.rootNoteIndex=m[1]),D&8&&(te.selectedScaleNotes=m[3].scale),s.$set(te),(!Ie||D&2)&&I!==(I=x(m[5][P(m[1],m[5].length)])+"")&&Y(q,I),D&12){Ce=kt;let T;for(T=0;T<Ce.length;T+=1){const ne=Zt(m,Ce,T);J[T]?J[T].p(ne,D):(J[T]=$t(ne),J[T].c(),J[T].m(Q,null))}for(;T<J.length;T+=1)J[T].d(1);J.length=Ce.length}if((!Ie||D&4)&&ce!==(ce=m[2].label+"")&&Y(ue,ce),D&47){Fe=m[2].modes;let T;for(T=0;T<Fe.length;T+=1){const ne=Yt(m,Fe,T);W[T]?W[T].p(ne,D):(W[T]=xt(ne),W[T].c(),W[T].m(A,null))}for(;T<W.length;T+=1)W[T].d(1);W.length=Fe.length}if(D&47){Pe=m[2].modes;let T;for(T=0;T<Pe.length;T+=1){const ne=Qt(m,Pe,T);K[T]?K[T].p(ne,D):(K[T]=en(ne),K[T].c(),K[T].m(fe,null))}for(;T<K.length;T+=1)K[T].d(1);K.length=Pe.length}const me={};D&16&&(me.bpm=m[4]),D&2&&(me.rootNoteIndex=m[1]),D&4&&(me.selectedModesGroup=m[2]),D&8&&(me.selectedScaleNotes=m[3].scale),he.$set(me),(!Ie||D&16)&&Y(Ke,m[4])},i(m){Ie||(He(t.$$.fragment,m),He(r.$$.fragment,m),He(s.$$.fragment,m),He(he.$$.fragment,m),He(ye.$$.fragment,m),Ie=!0)},o(m){Xe(t.$$.fragment,m),Xe(r.$$.fragment,m),Xe(s.$$.fragment,m),Xe(he.$$.fragment,m),Xe(ye.$$.fragment,m),Ie=!1},d(m){Je(t,m),m&&d(n),m&&d(l),Je(r),Je(s),Re(J,m),Re(W,m),Re(K,m),Je(he),Je(ye),_t=!1,nt(Nt)}}}function ml(e,t,n){const l=hn,o={xCentre:400,yCentre:400,radius:300};let a=!0;const r={...o,radius:o.radius},s={...o,radius:o.radius-70},f={...o,radius:o.radius+70};let i=0,u=kt[0],_=u.modes[0],v=70;return[a,i,u,_,v,l,o,r,s,f,()=>{n(1,i=i-1),i<0&&n(1,i=i+12)},()=>{n(1,i=i+1),i>=12&&n(1,i=i-12)},k=>{u!==k&&(n(2,u=k),n(3,_=k.modes[0]))},(k,M)=>{n(3,_=k),n(1,i=P(M,l.length)),n(0,a=!0)},(k,M)=>{n(3,_=k),n(1,i=P(M,l.length)),n(0,a=!1)},()=>{v>10&&n(4,v=v-20)},()=>{n(4,v=v+20)}]}class vl extends Ae{constructor(t){super(),qe(this,t,ml,hl,Ge,{})}}export{vl as default};

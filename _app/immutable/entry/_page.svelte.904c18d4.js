import{S as nt,i as st,s as at,k as C,q as S,a as w,J as Z,e as Ue,l as E,m as p,r as T,c as j,h as m,K as x,n as r,b as J,G as i,L as ge,u as $,H as He,M as ve,N as rt,O as ee,p as $e}from"../chunks/index.9fc21f1b.js";const F=(t,l)=>{const n=t%l;return n<0?n+l:n},it=t=>{if(isNaN(t))return"NaN";const l=String(+t).split("")??[],n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let e="",a=3;for(;a--;)e=(n[+(l.pop()??"")+a*10]||"")+e;return Array(+l.join("")+1).join("M")+e},I=[{sharpNote:"C",flatNote:"C"},{sharpNote:"C#",flatNote:"D♭",preferSharp:!0},{sharpNote:"D",flatNote:"D"},{sharpNote:"D#",flatNote:"E♭",preferSharp:!1},{sharpNote:"E",flatNote:"E"},{sharpNote:"F",flatNote:"F"},{sharpNote:"F#",flatNote:"G♭",preferSharp:!0},{sharpNote:"G",flatNote:"G"},{sharpNote:"G#",flatNote:"A♭",preferSharp:!1},{sharpNote:"A",flatNote:"A"},{sharpNote:"A#",flatNote:"B♭",preferSharp:!1},{sharpNote:"A",flatNote:"B"}],B=[2,2,1,2,2,2,1],H=[2,2,3,2,3],V=(t,l,n)=>{let e=0;for(let a=t;a<l;a++)e+=n[F(a,n.length)];return e},ct=(t,l)=>t===4&&l===7?"major":t===3&&l===7?"minor":t===3&&l===6?"diminished":"bizarre",ht=(t,l,n)=>{const e=it(F(t+1,n.length+1)),a=t+l,d=ct(V(a,a+2,n),V(a,a+4,n));return d==="major"?e:d==="minor"?e.toLowerCase():d==="diminished"?`${e.toLowerCase()}°`:e},G=(t,l)=>{const n=[];for(let e=0;e<l.length;e++)n.push({semitonesFromRoot:V(t,t+e,l),label:ht(e,t,l)});return n},Je=(t,l)=>{const n=l+1,e=t.semitonesFromRoot-V(0,l,B);if(e===1)return`A${n}`;if([1,4,5].includes(n)){if(e===0)return`P${n}`;if(e===-1)return`d${n}`}return e===0?`M${n}`:e===-1?`m${n}`:e===-2?`d${n}`:""},ut=G(0,B),ft=G(1,B),_t=G(2,B),dt=G(3,B),mt=G(4,B),vt=G(5,B),gt=G(6,B),pt=[{name:"Ionian / Major",scale:ut,rootIntervalToIonian:V(0,0,B)},{name:"Dorian",scale:ft,rootIntervalToIonian:V(0,1,B)},{name:"Phrygian",scale:_t,rootIntervalToIonian:V(0,2,B)},{name:"Lydian",scale:dt,rootIntervalToIonian:V(0,3,B)},{name:"Mixolydian",scale:mt,rootIntervalToIonian:V(0,4,B)},{name:"Aeolian / Natural Minor",scale:vt,rootIntervalToIonian:V(0,5,B)},{name:"Locrian",scale:gt,rootIntervalToIonian:V(0,6,B)}],bt=G(0,H),It=G(1,H),Nt=G(2,H),kt=G(3,H),Ct=G(4,H),Et=[{name:"Major",scale:bt,rootIntervalToIonian:V(0,0,H)},{name:"Suspended / Egyptian",scale:It,rootIntervalToIonian:V(0,1,H)},{name:"Blues minor / Man Gong",scale:Nt,rootIntervalToIonian:V(0,2,H)},{name:"Blues major",scale:kt,rootIntervalToIonian:V(0,3,H)},{name:"Minor",scale:Ct,rootIntervalToIonian:V(0,4,H)}],Ve=[{label:"Diatonic",modes:pt},{label:"(Major) Pentatonic",modes:Et}];function Ke(t,l,n){const e=t.slice();e[17]=l[n];const a=e[1];return e[18]=a,e}function Qe(t,l,n){const e=t.slice();e[17]=l[n];const a=e[1]+e[17].rootIntervalToIonian-e[3].rootIntervalToIonian;return e[18]=a,e}function We(t,l,n){const e=t.slice();return e[23]=l[n],e}function Ye(t,l,n){const e=t.slice();e[26]=l[n],e[31]=n;const a=e[0]?e[9](e[3].scale[F(e[31]-e[2].modes.findIndex(g=>g===e[3]),e[3].scale.length)].semitonesFromRoot+e[1],e[5]):e[9](e[26].semitonesFromRoot+e[1],e[5]);e[27]=a;const d=e[10](e[26],e[1],e[6]);e[28]=d;const f=e[10](e[26],e[1],e[7]);return e[29]=f,e}function Ze(t,l,n){const e=t.slice();e[32]=l[n],e[31]=n;const a=e[9](e[31],e[5]);return e[27]=a,e}function xe(t){let l,n,e=t[8](t[32])+"",a,d;return{c(){l=Z("g"),n=Z("text"),a=S(e),this.h()},l(f){l=x(f,"g",{class:!0});var g=p(l);n=x(g,"text",{x:!0,y:!0,class:!0,"text-anchor":!0,dy:!0});var c=p(n);a=T(c,e),c.forEach(m),g.forEach(m),this.h()},h(){r(n,"x",t[27].x),r(n,"y",t[27].y),r(n,"class",d=ee(`svgNoteName transitionAll ${t[11](t[31],t[1],t[3].scale)?"svgSelectedNoteName":""}`)+" svelte-1bqzm95"),r(n,"text-anchor","middle"),r(n,"dy",".3em"),r(l,"class","transitionAll svelte-1bqzm95")},m(f,g){J(f,l,g),i(l,n),i(n,a)},p(f,g){g[0]&10&&d!==(d=ee(`svgNoteName transitionAll ${f[11](f[31],f[1],f[3].scale)?"svgSelectedNoteName":""}`)+" svelte-1bqzm95")&&r(n,"class",d)},d(f){f&&m(l)}}}function et(t){let l,n,e,a,d=t[26].label+"",f,g,c,h=Je(t[26],t[31])+"",v,q;return{c(){l=Z("circle"),e=Z("g"),a=Z("text"),f=S(d),c=Z("text"),v=S(h),this.h()},l(b){l=x(b,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0,class:!0}),p(l).forEach(m),e=x(b,"g",{class:!0});var u=p(e);a=x(u,"text",{x:!0,y:!0,"text-anchor":!0,dy:!0,transform:!0,class:!0});var _=p(a);f=T(_,d),_.forEach(m),c=x(u,"text",{x:!0,y:!0,"text-anchor":!0,dy:!0,transform:!0,class:!0});var R=p(c);v=T(R,h),R.forEach(m),u.forEach(m),this.h()},h(){$e(l,"stroke-width","1.6871"),$e(l,"stroke-miterlimit","10"),r(l,"cx",0),r(l,"cy",0),r(l,"r",30),r(l,"transform",n=`translate(${t[27].x} ${t[27].y})`),r(l,"stroke","black"),r(l,"fill","transparent"),r(l,"class","transitionAll svelte-1bqzm95"),r(a,"x",0),r(a,"y",0),r(a,"text-anchor","middle"),r(a,"dy",".3em"),r(a,"transform",g=`translate(${t[28].x} ${t[28].y})`),r(a,"class","svgNoteName scaleNote transitionAll svelte-1bqzm95"),r(c,"x",0),r(c,"y",0),r(c,"text-anchor","middle"),r(c,"dy",".3em"),r(c,"transform",q=`translate(${t[29].x} ${t[29].y})`),r(c,"class","svgNoteName scaleNote transitionAll svelte-1bqzm95"),r(e,"class","transitionNote")},m(b,u){J(b,l,u),J(b,e,u),i(e,a),i(a,f),i(e,c),i(c,v)},p(b,u){u[0]&15&&n!==(n=`translate(${b[27].x} ${b[27].y})`)&&r(l,"transform",n),u[0]&8&&d!==(d=b[26].label+"")&&$(f,d),u[0]&10&&g!==(g=`translate(${b[28].x} ${b[28].y})`)&&r(a,"transform",g),u[0]&8&&h!==(h=Je(b[26],b[31])+"")&&$(v,h),u[0]&10&&q!==(q=`translate(${b[29].x} ${b[29].y})`)&&r(c,"transform",q)},d(b){b&&m(l),b&&m(e)}}}function tt(t){let l,n=t[23].label+"",e,a,d,f,g;function c(){return t[14](t[23])}return{c(){l=C("button"),e=S(n),a=w(),this.h()},l(h){l=E(h,"BUTTON",{class:!0});var v=p(l);e=T(v,n),a=j(v),v.forEach(m),this.h()},h(){r(l,"class",d=ee(t[2]===t[23]?"selectedTab":"")+" svelte-1bqzm95")},m(h,v){J(h,l,v),i(l,e),i(l,a),f||(g=ge(l,"click",c),f=!0)},p(h,v){t=h,v[0]&4&&d!==(d=ee(t[2]===t[23]?"selectedTab":"")+" svelte-1bqzm95")&&r(l,"class",d)},d(h){h&&m(l),f=!1,g()}}}function lt(t){let l,n,e=t[8](I[F(t[18],I.length)])+"",a,d,f=t[17].name+"",g,c,h,v,q;function b(){return t[15](t[17],t[18])}return{c(){l=C("button"),n=C("span"),a=S(e),d=w(),g=S(f),c=w(),this.h()},l(u){l=E(u,"BUTTON",{class:!0});var _=p(l);n=E(_,"SPAN",{class:!0});var R=p(n);a=T(R,e),R.forEach(m),d=j(_),g=T(_,f),c=j(_),_.forEach(m),this.h()},h(){r(n,"class","noteLabel svelte-1bqzm95"),r(l,"class",h=ee(t[17]===t[3]&&t[0]?"selectedTab":"")+" svelte-1bqzm95")},m(u,_){J(u,l,_),i(l,n),i(n,a),i(l,d),i(l,g),i(l,c),v||(q=ge(l,"click",b),v=!0)},p(u,_){t=u,_[0]&14&&e!==(e=t[8](I[F(t[18],I.length)])+"")&&$(a,e),_[0]&4&&f!==(f=t[17].name+"")&&$(g,f),_[0]&13&&h!==(h=ee(t[17]===t[3]&&t[0]?"selectedTab":"")+" svelte-1bqzm95")&&r(l,"class",h)},d(u){u&&m(l),v=!1,q()}}}function ot(t){let l,n,e=t[8](I[F(t[18],I.length)])+"",a,d,f=t[17].name+"",g,c,h,v,q;function b(){return t[16](t[17],t[18])}return{c(){l=C("button"),n=C("span"),a=S(e),d=w(),g=S(f),c=w(),this.h()},l(u){l=E(u,"BUTTON",{class:!0});var _=p(l);n=E(_,"SPAN",{class:!0});var R=p(n);a=T(R,e),R.forEach(m),d=j(_),g=T(_,f),c=j(_),_.forEach(m),this.h()},h(){r(n,"class","noteLabel svelte-1bqzm95"),r(l,"class",h=ee(t[17]===t[3]&&!t[0]?"selectedTab":"")+" svelte-1bqzm95")},m(u,_){J(u,l,_),i(l,n),i(n,a),i(l,d),i(l,g),i(l,c),v||(q=ge(l,"click",b),v=!0)},p(u,_){t=u,_[0]&2&&e!==(e=t[8](I[F(t[18],I.length)])+"")&&$(a,e),_[0]&4&&f!==(f=t[17].name+"")&&$(g,f),_[0]&13&&h!==(h=ee(t[17]===t[3]&&!t[0]?"selectedTab":"")+" svelte-1bqzm95")&&r(l,"class",h)},d(u){u&&m(l),v=!1,q()}}}function Mt(t){let l,n=t[8](I[F(t[1],I.length)])+"",e,a,d=t[3].name+"",f,g,c,h,v,q,b,u,_,R,K,pe,be,te,N=t[8](I[F(t[1],I.length)])+"",P,U,O,fe,Me,le,ye,Se,oe,_e,Q,W,Te,de=t[2].label+"",Ie,Pe,qe,ze,me,Y,se,De,Ae,Le,we,ae=[...I],z=[];for(let s=0;s<ae.length;s+=1)z[s]=xe(Ze(t,ae,s));let re=[...t[3].scale],D=[];for(let s=0;s<re.length;s+=1)D[s]=et(Ye(t,re,s));let ie=Ve,A=[];for(let s=0;s<ie.length;s+=1)A[s]=tt(We(t,ie,s));let ce=t[2].modes,L=[];for(let s=0;s<ce.length;s+=1)L[s]=lt(Qe(t,ce,s));let he=t[2].modes,X=[];for(let s=0;s<he.length;s+=1)X[s]=ot(Ke(t,he,s));return{c(){l=C("h1"),e=S(n),a=w(),f=S(d),g=w(),c=C("div"),h=Z("svg"),v=Z("circle");for(let s=0;s<z.length;s+=1)z[s].c();q=Ue();for(let s=0;s<D.length;s+=1)D[s].c();b=w(),u=C("div"),_=C("div"),R=S(`Root note
			`),K=C("button"),pe=S("-"),be=w(),te=C("span"),P=S(N),U=w(),O=C("button"),fe=S("+"),Me=w(),le=C("div"),ye=S(`Mode type
			`);for(let s=0;s<A.length;s+=1)A[s].c();Se=w(),oe=C("div"),_e=C("div"),Q=C("div"),W=C("h2"),Te=S("Equivalent "),Ie=S(de),Pe=S(" modes"),qe=w();for(let s=0;s<L.length;s+=1)L[s].c();ze=w(),me=C("div"),Y=C("div"),se=C("h2"),De=S("Modes by modification"),Ae=w();for(let s=0;s<X.length;s+=1)X[s].c();this.h()},l(s){l=E(s,"H1",{class:!0});var k=p(l);e=T(k,n),a=j(k),f=T(k,d),k.forEach(m),g=j(s),c=E(s,"DIV",{class:!0,"data-sveltekit-preload-data":!0});var o=p(c);h=x(o,"svg",{id:!0,viewBox:!0,xmlns:!0,class:!0});var M=p(h);v=x(M,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),p(v).forEach(m);for(let y=0;y<z.length;y+=1)z[y].l(M);q=Ue();for(let y=0;y<D.length;y+=1)D[y].l(M);M.forEach(m),b=j(o),u=E(o,"DIV",{id:!0,class:!0});var ue=p(u);_=E(ue,"DIV",{});var ne=p(_);R=T(ne,`Root note
			`),K=E(ne,"BUTTON",{class:!0});var je=p(K);pe=T(je,"-"),je.forEach(m),be=j(ne),te=E(ne,"SPAN",{class:!0});var Be=p(te);P=T(Be,N),Be.forEach(m),U=j(ne),O=E(ne,"BUTTON",{class:!0});var Fe=p(O);fe=T(Fe,"+"),Fe.forEach(m),ne.forEach(m),Me=j(ue),le=E(ue,"DIV",{});var Xe=p(le);ye=T(Xe,`Mode type
			`);for(let y=0;y<A.length;y+=1)A[y].l(Xe);Xe.forEach(m),Se=j(ue),oe=E(ue,"DIV",{});var Ne=p(oe);_e=E(Ne,"DIV",{});var Re=p(_e);Q=E(Re,"DIV",{});var ke=p(Q);W=E(ke,"H2",{class:!0});var Ce=p(W);Te=T(Ce,"Equivalent "),Ie=T(Ce,de),Pe=T(Ce," modes"),Ce.forEach(m),qe=j(ke);for(let y=0;y<L.length;y+=1)L[y].l(ke);ke.forEach(m),Re.forEach(m),ze=j(Ne),me=E(Ne,"DIV",{});var Oe=p(me);Y=E(Oe,"DIV",{});var Ee=p(Y);se=E(Ee,"H2",{class:!0});var Ge=p(se);De=T(Ge,"Modes by modification"),Ge.forEach(m),Ae=j(Ee);for(let y=0;y<X.length;y+=1)X[y].l(Ee);Ee.forEach(m),Oe.forEach(m),Ne.forEach(m),ue.forEach(m),o.forEach(m),this.h()},h(){r(l,"class","svelte-1bqzm95"),r(v,"cx",t[4].xCentre),r(v,"cy",t[4].yCentre),r(v,"r",t[4].radius),r(v,"stroke","grey"),r(v,"stroke-width",1),r(v,"fill","transparent"),r(h,"id","boxOfNotes"),r(h,"viewBox","0 0 800 800"),r(h,"xmlns","http://www.w3.org/2000/svg"),r(h,"class","svelte-1bqzm95"),r(K,"class","svelte-1bqzm95"),r(te,"class","noteLabel svelte-1bqzm95"),r(O,"class","svelte-1bqzm95"),r(W,"class","svelte-1bqzm95"),r(se,"class","svelte-1bqzm95"),r(u,"id","boxOfButtons"),r(u,"class","svelte-1bqzm95"),r(c,"class","appContainer svelte-1bqzm95"),r(c,"data-sveltekit-preload-data","hover")},m(s,k){J(s,l,k),i(l,e),i(l,a),i(l,f),J(s,g,k),J(s,c,k),i(c,h),i(h,v);for(let o=0;o<z.length;o+=1)z[o].m(h,null);i(h,q);for(let o=0;o<D.length;o+=1)D[o].m(h,null);i(c,b),i(c,u),i(u,_),i(_,R),i(_,K),i(K,pe),i(_,be),i(_,te),i(te,P),i(_,U),i(_,O),i(O,fe),i(u,Me),i(u,le),i(le,ye);for(let o=0;o<A.length;o+=1)A[o].m(le,null);i(u,Se),i(u,oe),i(oe,_e),i(_e,Q),i(Q,W),i(W,Te),i(W,Ie),i(W,Pe),i(Q,qe);for(let o=0;o<L.length;o+=1)L[o].m(Q,null);i(oe,ze),i(oe,me),i(me,Y),i(Y,se),i(se,De),i(Y,Ae);for(let o=0;o<X.length;o+=1)X[o].m(Y,null);Le||(we=[ge(K,"click",t[12]),ge(O,"click",t[13])],Le=!0)},p(s,k){if(k[0]&2&&n!==(n=s[8](I[F(s[1],I.length)])+"")&&$(e,n),k[0]&8&&d!==(d=s[3].name+"")&&$(f,d),k[0]&2858){ae=[...I];let o;for(o=0;o<ae.length;o+=1){const M=Ze(s,ae,o);z[o]?z[o].p(M,k):(z[o]=xe(M),z[o].c(),z[o].m(h,q))}for(;o<z.length;o+=1)z[o].d(1);z.length=ae.length}if(k[0]&1775){re=[...s[3].scale];let o;for(o=0;o<re.length;o+=1){const M=Ye(s,re,o);D[o]?D[o].p(M,k):(D[o]=et(M),D[o].c(),D[o].m(h,null))}for(;o<D.length;o+=1)D[o].d(1);D.length=re.length}if(k[0]&2&&N!==(N=s[8](I[F(s[1],I.length)])+"")&&$(P,N),k[0]&12){ie=Ve;let o;for(o=0;o<ie.length;o+=1){const M=We(s,ie,o);A[o]?A[o].p(M,k):(A[o]=tt(M),A[o].c(),A[o].m(le,null))}for(;o<A.length;o+=1)A[o].d(1);A.length=ie.length}if(k[0]&4&&de!==(de=s[2].label+"")&&$(Ie,de),k[0]&271){ce=s[2].modes;let o;for(o=0;o<ce.length;o+=1){const M=Qe(s,ce,o);L[o]?L[o].p(M,k):(L[o]=lt(M),L[o].c(),L[o].m(Q,null))}for(;o<L.length;o+=1)L[o].d(1);L.length=ce.length}if(k[0]&271){he=s[2].modes;let o;for(o=0;o<he.length;o+=1){const M=Ke(s,he,o);X[o]?X[o].p(M,k):(X[o]=ot(M),X[o].c(),X[o].m(Y,null))}for(;o<X.length;o+=1)X[o].d(1);X.length=he.length}},i:He,o:He,d(s){s&&m(l),s&&m(g),s&&m(c),ve(z,s),ve(D,s),ve(A,s),ve(L,s),ve(X,s),Le=!1,rt(we)}}}function yt(t,l,n){const e={xCentre:400,yCentre:400,radius:360};let a=!0;const d={...e,radius:e.radius-40},f={...e,radius:e.radius-110},g={...e,radius:e.radius-160};let c=0,h=Ve[0],v=h.modes[0];return[a,c,h,v,e,d,f,g,N=>N.preferSharp?N.sharpNote:N.flatNote,(N,P)=>({x:P.xCentre+P.radius*Math.cos(N*2*Math.PI/I.length-.5*Math.PI),y:P.yCentre+P.radius*Math.sin(N*2*Math.PI/I.length-.5*Math.PI)}),(N,P,U)=>({x:U.xCentre+U.radius*Math.cos((N.semitonesFromRoot+P)*2*Math.PI/I.length-.5*Math.PI),y:U.yCentre+U.radius*Math.sin((N.semitonesFromRoot+P)*2*Math.PI/I.length-.5*Math.PI)}),(N,P,U)=>{let O=F(N-P,I.length);return O<0&&(O=O+I.length),U.some(fe=>fe.semitonesFromRoot===O)},()=>{n(1,c=c-1),c<0&&n(1,c=c+12)},()=>{n(1,c=c+1),c>=12&&n(1,c=c-12)},N=>{h!==N&&(n(2,h=N),n(3,v=N.modes[0]))},(N,P)=>{n(3,v=N),n(1,c=F(P,I.length)),n(0,a=!0)},(N,P)=>{n(3,v=N),n(1,c=F(P,I.length)),n(0,a=!1)}]}class Tt extends nt{constructor(l){super(),st(this,l,yt,Mt,at,{},null,[-1,-1])}}export{Tt as default};

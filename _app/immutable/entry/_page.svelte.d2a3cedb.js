import{S as xt,i as el,s as tl,k,q as E,a as C,J as le,e as Rt,l as I,m as T,r as M,c as D,h as v,K as ne,n as r,b as oe,G as i,L as Y,u as Z,H as qt,M as Le,N as ll,p as Be,O as he}from"../chunks/index.9fc21f1b.js";import{w as nl}from"../chunks/index.b3a1d362.js";const O=(e,t)=>{const n=e%t;return n<0?n+t:n},al=e=>{if(isNaN(e))return"NaN";const t=String(+e).split("")??[],n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let l="",a=3;for(;a--;)l=(n[+(t.pop()??"")+a*10]||"")+l;return Array(+t.join("")+1).join("M")+l},y=[{sharpNote:"C",flatNote:"C",defaultOctaveFrequency:261.63},{sharpNote:"C#",flatNote:"D♭",preferSharp:!0,defaultOctaveFrequency:277.18},{sharpNote:"D",flatNote:"D",defaultOctaveFrequency:293.66},{sharpNote:"D#",flatNote:"E♭",preferSharp:!1,defaultOctaveFrequency:311.13},{sharpNote:"E",flatNote:"E",defaultOctaveFrequency:329.63},{sharpNote:"F",flatNote:"F",defaultOctaveFrequency:349.23},{sharpNote:"F#",flatNote:"G♭",preferSharp:!0,defaultOctaveFrequency:185},{sharpNote:"G",flatNote:"G",defaultOctaveFrequency:196},{sharpNote:"G#",flatNote:"A♭",preferSharp:!1,defaultOctaveFrequency:207.65},{sharpNote:"A",flatNote:"A",defaultOctaveFrequency:220},{sharpNote:"A#",flatNote:"B♭",preferSharp:!1,defaultOctaveFrequency:233.08},{sharpNote:"A",flatNote:"B",defaultOctaveFrequency:246.94}],V=[2,2,1,2,2,2,1],te=[2,2,3,2,3],fe=[3,2,1,1,3,2],ze=[1,256/243,9/8,32/27,81/64,4/3,1024/729,3/2,128/81,27/16,16/9,243/128],gt={pentatonic:[.3,.05,.05,.2,.1],diatonic:[.3,.05,.15,.05,.075,.05,.03],hexatonic:[.3,.075,.15,.075,.075,.05]},pt={pentatonic:[.5,.05,.15,.2,.05],diatonic:[.5,.02,.05,.1,.1,.05,.02],hexatonic:[.5,.02,.05,.1,.1,.05]},Oe=.25,w=(e,t,n)=>{let l=0;for(let a=e;a<t;a++)l+=n[O(a,n.length)];return l},ol=(e,t)=>e===4&&t===7?"major":e===3&&t===7?"minor":e===3&&t===6?"diminished":"bizarre",sl=(e,t,n)=>{const l=al(O(e+1,n.length+1)),a=e+t,u=ol(w(a,a+2,n),w(a,a+4,n));return u==="major"?l:u==="minor"?l.toLowerCase():u==="diminished"?`${l.toLowerCase()}°`:l},L=(e,t)=>{const n=[];for(let l=0;l<t.length;l++)n.push({semitonesFromRoot:w(e,e+l,t),label:sl(l,e,t)});return n},Gt=(e,t)=>{const n=t+1;if(e===1)return`A${n}`;if([1,4,5].includes(n)){if(e===0)return`P${n}`;if(e===-1)return`d${n}`}if(e===0)return`M${n}`;if(e===-1)return`m${n}`;if(e===-2)return`d${n}`},Ut=(e,t)=>{const n=e.semitonesFromRoot-w(0,t,V),l=Gt(n,t);if(l)return l;let a=0;for(;a<V.length;){const u=e.semitonesFromRoot-w(0,a,V),s=Gt(u,a);if(s)return s;a++}return`${e.semitonesFromRoot}s`},rl=L(0,V),il=L(1,V),cl=L(2,V),ul=L(3,V),hl=L(4,V),fl=L(5,V),dl=L(6,V),_l=[{name:"Ionian / Major",scale:rl,rootIntervalToIonian:w(0,0,V)},{name:"Dorian",scale:il,rootIntervalToIonian:w(0,1,V)},{name:"Phrygian",scale:cl,rootIntervalToIonian:w(0,2,V)},{name:"Lydian",scale:ul,rootIntervalToIonian:w(0,3,V)},{name:"Mixolydian",scale:hl,rootIntervalToIonian:w(0,4,V)},{name:"Aeolian / Natural Minor",scale:fl,rootIntervalToIonian:w(0,5,V)},{name:"Locrian",scale:dl,rootIntervalToIonian:w(0,6,V)}],ml=L(0,te),vl=L(1,te),yl=L(2,te),gl=L(3,te),pl=L(4,te),bl=[{name:"Major",scale:ml,rootIntervalToIonian:w(0,0,te)},{name:"Suspended / Egyptian",scale:vl,rootIntervalToIonian:w(0,1,te)},{name:"Blues minor / Man Gong",scale:yl,rootIntervalToIonian:w(0,2,te)},{name:"Blues major",scale:gl,rootIntervalToIonian:w(0,3,te)},{name:"Minor",scale:pl,rootIntervalToIonian:w(0,4,te)}],Tl=L(0,fe),kl=L(1,fe);L(2,fe);L(3,fe);L(4,fe);L(5,fe);const Il=[{name:"Minor",scale:Tl,rootIntervalToIonian:w(0,0,fe)},{name:"Major",scale:kl,rootIntervalToIonian:w(0,1,fe)}],bt=[{label:"Diatonic",modes:_l,probabilityDistributions:{bass:pt.diatonic,melody:gt.diatonic}},{label:"Pentatonic",modes:bl,probabilityDistributions:{bass:pt.pentatonic,melody:gt.pentatonic}},{label:"Hexatonic (blues)",modes:Il,probabilityDistributions:{bass:pt.hexatonic,melody:gt.hexatonic}}],Tt=nl({}),Ke=300,kt=.75,El=12,Ml=1e-6,jl={attackTime:.1,decayTime:.3,releaseTime:.5,maxSustainTime:.2,maxGain:.1,sustainGainRatio:.1,oscillatorType:"sine"},Sl=(e,t)=>{let n=1;for(;t<0;)t=t+ze.length,n=n*.5;for(;t>=ze.length;)t=t-ze.length,n=n*2;return n=n*ze[t],e.defaultOctaveFrequency*n},$=(e,t,n,l,a={})=>{if(l<n){console.log("Warning: note end time earlier than start time");return}const u={...jl,...a};let{attackTime:s,decayTime:d}={...u};const{releaseTime:f,maxSustainTime:h,maxGain:_,sustainGainRatio:m,oscillatorType:b="triangle"}={...u},g=_*m,p=new AudioContext,A=p.createOscillator(),S=p.createGain(),Te=p.createDynamicsCompressor();S.gain.value=.001,A.type=b,A.frequency.value=Sl(e,t),A.connect(S).connect(Te).connect(p.destination);const K=l-n;s>K/(2*1e3)&&(s=K/(2*1e3)),d+s>K/1e3&&(d=K/1e3-s);let Q=h??1e4;Q>K/1e3-s-d&&(Q=K/1e3-s-d),setTimeout(function(){const se=p.currentTime+s;S.gain.exponentialRampToValueAtTime(_,se),Tt.update(W=>({...W,[O(t,y.length)]:(W[`${t}`]??0)+1})),A.start(),setTimeout(()=>{S.gain.exponentialRampToValueAtTime(g,p.currentTime+d),setTimeout(()=>{S.gain.exponentialRampToValueAtTime(Ml,p.currentTime+f),Tt.update(W=>{const ke=Math.max((W[`${t}`]??0)-1,0);return{...W,[O(t,y.length)]:ke}}),setTimeout(function(){A.stop(),p.close()},f*1e3+2e3)},Q*1e3)},s*1e3)},n)},Nl=(e,t,n=Ke,l=kt)=>{const a=n*.5*l,u=n*.5-a,s=n*.5;[...e].forEach((d,f)=>{f===0?$(y[t],d.semitonesFromRoot,f*2*s+u,f*2*s+u+a+s):($(y[t],0,f*2*s+u,f*2*s+u+a),$(y[t],d.semitonesFromRoot,(f*2+1)*s+u,(f*2+1)*s+u+a))}),$(y[t],0,e.length*2*s+u,e.length*2*s+u+a),$(y[t],y.length,(e.length*2+1)*s+u,(e.length*2+1)*s+u+a)},Cl=(e,t,n=Ke,l=kt)=>{const a=n*.5*l,u=n*.5-a,s=n*.5;$(y[t],e[0].semitonesFromRoot,u,s+u+a+s),[...e].forEach((d,f)=>{$(y[t],d.semitonesFromRoot,(f+2)*s+u,(f+2)*s+u+a+s)}),$(y[t],y.length,(e.length+2)*s+u,(e.length+2)*s+u+a),[...e].reverse().forEach((d,f)=>{$(y[t],d.semitonesFromRoot,(f+e.length+3)*s+u,(f+e.length+3)*s+u+a+s)})},Dl=(e,t,n=Ke,l=kt)=>{const a=n*.5*l,u=n*.5-a,s=n*.5;$(y[t],0,u,u+s*(e.length*2+3),{maxSustainTime:s*(e.length*2+2),oscillatorType:"sine",sustainGainRatio:.5,maxGain:.0125}),[...e].forEach((d,f)=>{$(y[t],d.semitonesFromRoot,(f+2)*s+u,(f+2)*s+u+a+s)}),$(y[t],y.length,(e.length+2)*s+u,(e.length+2)*s+u+a),[...e].reverse().forEach((d,f)=>{$(y[t],d.semitonesFromRoot,(f+e.length+3)*s+u,(f+e.length+3)*s+u+a+s)})},Pl=(e,t,n,l,a=Ke,u=El)=>{let s=0;for(;s<=u;)e.forEach((f,h)=>{if(!(h>=n.length)&&Math.random()<n[h]){const _=Math.random();let m=1;_>.8&&(m=2),_>.9&&(m=4),_>.95&&(m=6),_>.97&&(m=3),_>.99&&(m=8),$(y[t],f.semitonesFromRoot+y.length,a*s,a*s+a*Oe*m),s+=Oe}}),s+=Oe;let d=0;for(;d<=u;)e.forEach((f,h)=>{if(!(h>=l.length)&&Math.random()<l[h]){const _=Math.random();let m=1;_>.8&&(m=2),_>.9&&(m=4),_>.95&&(m=6),_>.97&&(m=3),_>.99&&(m=8),$(y[t],f.semitonesFromRoot,a*d,a*d+a*2*Oe*m),d+=2*Oe}}),d+=2*Oe};function Xt(e,t,n){const l=e.slice();l[25]=t[n];const a=l[2];return l[26]=a,l}function $t(e,t,n){const l=e.slice();l[25]=t[n];const a=l[2]+l[25].rootIntervalToIonian-l[4].rootIntervalToIonian;return l[26]=a,l}function Ht(e,t,n){const l=e.slice();return l[31]=t[n],l}function Jt(e,t,n){const l=e.slice();l[34]=t[n],l[39]=n;const a=l[1]?l[11](l[4].scale[O(l[39]-l[3].modes.findIndex(d=>d===l[4]),l[4].scale.length)].semitonesFromRoot+l[2],l[7]):l[11](l[34].semitonesFromRoot+l[2],l[7]);l[35]=a;const u=l[12](l[34],l[2],l[8]);l[36]=u;const s=l[12](l[34],l[2],l[9]);return l[37]=s,l}function zt(e,t,n){const l=e.slice();l[40]=t[n],l[39]=n;const a=l[11](l[39],l[7]);return l[35]=a,l}function Kt(e){let t,n,l,a,u,s,d,f=e[10](e[40])+"",h,_;return{c(){t=le("g"),n=le("circle"),a=le("circle"),d=le("text"),h=E(f),this.h()},l(m){t=ne(m,"g",{});var b=T(t);n=ne(b,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0}),T(n).forEach(v),a=ne(b,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0,opacity:!0,class:!0}),T(a).forEach(v),d=ne(b,"text",{x:!0,y:!0,class:!0,"text-anchor":!0,dy:!0});var g=T(d);h=M(g,f),g.forEach(v),b.forEach(v),this.h()},h(){Be(n,"stroke-width","1.6871"),Be(n,"stroke-miterlimit","10"),r(n,"cx",0),r(n,"cy",0),r(n,"r",30),r(n,"transform",`translate(${e[35].x} ${e[35].y})`),r(n,"stroke","transparent"),r(n,"fill",l=e[39]===e[2]?"yellow":"var(--base-background-color)"),Be(a,"stroke-width","1.6871"),Be(a,"stroke-miterlimit","10"),r(a,"cx",0),r(a,"cy",0),r(a,"r",30),r(a,"transform",`translate(${e[35].x} ${e[35].y})`),r(a,"stroke","transparent"),r(a,"fill",u=e[0][`${O(e[39]-e[2],y.length)}`]>0?"blue":"var(--base-background-color)"),r(a,"opacity",s=e[0][`${O(e[39]-e[2],y.length)}`]>0?"0.5":"0"),r(a,"class","transitionAllQuick svelte-4fydyj"),r(d,"x",e[35].x),r(d,"y",e[35].y),r(d,"class",_=he(`svgNoteName ${e[13](e[39],e[2],e[4].scale)?"svgSelectedNoteName":""}`)+" svelte-4fydyj"),r(d,"text-anchor","middle"),r(d,"dy",".3em")},m(m,b){oe(m,t,b),i(t,n),i(t,a),i(t,d),i(d,h)},p(m,b){b[0]&4&&l!==(l=m[39]===m[2]?"yellow":"var(--base-background-color)")&&r(n,"fill",l),b[0]&5&&u!==(u=m[0][`${O(m[39]-m[2],y.length)}`]>0?"blue":"var(--base-background-color)")&&r(a,"fill",u),b[0]&5&&s!==(s=m[0][`${O(m[39]-m[2],y.length)}`]>0?"0.5":"0")&&r(a,"opacity",s),b[0]&20&&_!==(_=he(`svgNoteName ${m[13](m[39],m[2],m[4].scale)?"svgSelectedNoteName":""}`)+" svelte-4fydyj")&&r(d,"class",_)},d(m){m&&v(t)}}}function Qt(e){let t,n,l,a,u=e[34].label+"",s,d,f,h=Ut(e[34],e[39])+"",_,m;return{c(){t=le("circle"),l=le("g"),a=le("text"),s=E(u),f=le("text"),_=E(h),this.h()},l(b){t=ne(b,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0,class:!0}),T(t).forEach(v),l=ne(b,"g",{class:!0});var g=T(l);a=ne(g,"text",{x:!0,y:!0,"text-anchor":!0,dy:!0,transform:!0,class:!0});var p=T(a);s=M(p,u),p.forEach(v),f=ne(g,"text",{x:!0,y:!0,"text-anchor":!0,dy:!0,transform:!0,class:!0});var A=T(f);_=M(A,h),A.forEach(v),g.forEach(v),this.h()},h(){Be(t,"stroke-width","1.6871"),Be(t,"stroke-miterlimit","10"),r(t,"cx",0),r(t,"cy",0),r(t,"r",30),r(t,"transform",n=`translate(${e[35].x} ${e[35].y})`),r(t,"stroke","black"),r(t,"fill","transparent"),r(t,"class","transitionAll svelte-4fydyj"),r(a,"x",0),r(a,"y",0),r(a,"text-anchor","middle"),r(a,"dy",".3em"),r(a,"transform",d=`translate(${e[36].x} ${e[36].y})`),r(a,"class","svgNoteName scaleNote transitionAll svelte-4fydyj"),r(f,"x",0),r(f,"y",0),r(f,"text-anchor","middle"),r(f,"dy",".3em"),r(f,"transform",m=`translate(${e[37].x} ${e[37].y})`),r(f,"class","svgNoteName scaleNote transitionAll svelte-4fydyj"),r(l,"class","transitionNote")},m(b,g){oe(b,t,g),oe(b,l,g),i(l,a),i(a,s),i(l,f),i(f,_)},p(b,g){g[0]&30&&n!==(n=`translate(${b[35].x} ${b[35].y})`)&&r(t,"transform",n),g[0]&16&&u!==(u=b[34].label+"")&&Z(s,u),g[0]&20&&d!==(d=`translate(${b[36].x} ${b[36].y})`)&&r(a,"transform",d),g[0]&16&&h!==(h=Ut(b[34],b[39])+"")&&Z(_,h),g[0]&20&&m!==(m=`translate(${b[37].x} ${b[37].y})`)&&r(f,"transform",m)},d(b){b&&v(t),b&&v(l)}}}function Wt(e){let t,n=e[31].label+"",l,a,u,s,d;function f(){return e[16](e[31])}return{c(){t=k("button"),l=E(n),a=C(),this.h()},l(h){t=I(h,"BUTTON",{class:!0});var _=T(t);l=M(_,n),a=D(_),_.forEach(v),this.h()},h(){r(t,"class",u=he(e[3]===e[31]?"selectedTab":"")+" svelte-4fydyj")},m(h,_){oe(h,t,_),i(t,l),i(t,a),s||(d=Y(t,"click",f),s=!0)},p(h,_){e=h,_[0]&8&&u!==(u=he(e[3]===e[31]?"selectedTab":"")+" svelte-4fydyj")&&r(t,"class",u)},d(h){h&&v(t),s=!1,d()}}}function Yt(e){let t,n,l=e[10](y[O(e[26],y.length)])+"",a,u,s=e[25].name+"",d,f,h,_,m;function b(){return e[17](e[25],e[26])}return{c(){t=k("button"),n=k("span"),a=E(l),u=C(),d=E(s),f=C(),this.h()},l(g){t=I(g,"BUTTON",{class:!0});var p=T(t);n=I(p,"SPAN",{class:!0});var A=T(n);a=M(A,l),A.forEach(v),u=D(p),d=M(p,s),f=D(p),p.forEach(v),this.h()},h(){r(n,"class","noteLabel svelte-4fydyj"),r(t,"class",h=he(e[25]===e[4]&&e[1]?"selectedTab":"")+" svelte-4fydyj")},m(g,p){oe(g,t,p),i(t,n),i(n,a),i(t,u),i(t,d),i(t,f),_||(m=Y(t,"click",b),_=!0)},p(g,p){e=g,p[0]&28&&l!==(l=e[10](y[O(e[26],y.length)])+"")&&Z(a,l),p[0]&8&&s!==(s=e[25].name+"")&&Z(d,s),p[0]&26&&h!==(h=he(e[25]===e[4]&&e[1]?"selectedTab":"")+" svelte-4fydyj")&&r(t,"class",h)},d(g){g&&v(t),_=!1,m()}}}function Zt(e){let t,n,l=e[10](y[O(e[26],y.length)])+"",a,u,s=e[25].name+"",d,f,h,_,m;function b(){return e[18](e[25],e[26])}return{c(){t=k("button"),n=k("span"),a=E(l),u=C(),d=E(s),f=C(),this.h()},l(g){t=I(g,"BUTTON",{class:!0});var p=T(t);n=I(p,"SPAN",{class:!0});var A=T(n);a=M(A,l),A.forEach(v),u=D(p),d=M(p,s),f=D(p),p.forEach(v),this.h()},h(){r(n,"class","noteLabel svelte-4fydyj"),r(t,"class",h=he(e[25]===e[4]&&!e[1]?"selectedTab":"")+" svelte-4fydyj")},m(g,p){oe(g,t,p),i(t,n),i(n,a),i(t,u),i(t,d),i(t,f),_||(m=Y(t,"click",b),_=!0)},p(g,p){e=g,p[0]&4&&l!==(l=e[10](y[O(e[26],y.length)])+"")&&Z(a,l),p[0]&8&&s!==(s=e[25].name+"")&&Z(d,s),p[0]&26&&h!==(h=he(e[25]===e[4]&&!e[1]?"selectedTab":"")+" svelte-4fydyj")&&r(t,"class",h)},d(g){g&&v(t),_=!1,m()}}}function Al(e){let t,n=e[10](y[O(e[2],y.length)])+"",l,a,u=e[4].name+"",s,d,f,h,_,m,b,g,p,A,S,Te,K,Q,se=e[10](y[O(e[2],y.length)])+"",W,ke,re,Ve,Re,ie,qe,j,P,J,H,x,Qe,Fe=e[3].label+"",Ge,We,Ye,Ze,we,ce,Ie,xe,et,tt,Ee,z,de,lt,nt,_e,at,ot,me,st,rt,ve,it,ct,Me,je,ae,ye,ut,ht,ge,Ue,ft,dt,pe,_t,mt,It,Se=[...y],R=[];for(let c=0;c<Se.length;c+=1)R[c]=Kt(zt(e,Se,c));let Ne=[...e[4].scale],q=[];for(let c=0;c<Ne.length;c+=1)q[c]=Qt(Jt(e,Ne,c));let Ce=bt,G=[];for(let c=0;c<Ce.length;c+=1)G[c]=Wt(Ht(e,Ce,c));let De=e[3].modes,U=[];for(let c=0;c<De.length;c+=1)U[c]=Yt($t(e,De,c));let Pe=e[3].modes,X=[];for(let c=0;c<Pe.length;c+=1)X[c]=Zt(Xt(e,Pe,c));return{c(){t=k("h1"),l=E(n),a=C(),s=E(u),d=C(),f=k("div"),h=le("svg"),_=le("circle");for(let c=0;c<R.length;c+=1)R[c].c();m=Rt();for(let c=0;c<q.length;c+=1)q[c].c();b=C(),g=k("div"),p=k("div"),A=E(`Root note
			`),S=k("button"),Te=E("-"),K=C(),Q=k("span"),W=E(se),ke=C(),re=k("button"),Ve=E("+"),Re=C(),ie=k("div"),qe=E(`Mode type
			`);for(let c=0;c<G.length;c+=1)G[c].c();j=C(),P=k("div"),J=k("div"),H=k("div"),x=k("h2"),Qe=E("Equivalent "),Ge=E(Fe),We=E(" modes"),Ye=C();for(let c=0;c<U.length;c+=1)U[c].c();Ze=C(),we=k("div"),ce=k("div"),Ie=k("h2"),xe=E("Modes by modification"),et=C();for(let c=0;c<X.length;c+=1)X[c].c();tt=C(),Ee=k("div"),z=k("div"),de=k("button"),lt=E("▶ Scale"),nt=C(),_e=k("button"),at=E("▶ Scale + Pedal"),ot=C(),me=k("button"),st=E("▶ Scale + Drone"),rt=C(),ve=k("button"),it=E("▶ Jam"),ct=C(),Me=k("div"),je=k("div"),ae=k("div"),ye=k("button"),ut=E("-"),ht=C(),ge=k("span"),Ue=E(e[5]),ft=E(" bpm"),dt=C(),pe=k("button"),_t=E("+"),this.h()},l(c){t=I(c,"H1",{class:!0});var N=T(t);l=M(N,n),a=D(N),s=M(N,u),N.forEach(v),d=D(c),f=I(c,"DIV",{class:!0,"data-sveltekit-preload-data":!0});var o=T(f);h=ne(o,"svg",{id:!0,viewBox:!0,xmlns:!0,class:!0});var B=T(h);_=ne(B,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,class:!0}),T(_).forEach(v);for(let F=0;F<R.length;F+=1)R[F].l(B);m=Rt();for(let F=0;F<q.length;F+=1)q[F].l(B);B.forEach(v),b=D(o),g=I(o,"DIV",{class:!0});var ee=T(g);p=I(ee,"DIV",{});var be=T(p);A=M(be,`Root note
			`),S=I(be,"BUTTON",{class:!0});var Et=T(S);Te=M(Et,"-"),Et.forEach(v),K=D(be),Q=I(be,"SPAN",{class:!0});var Mt=T(Q);W=M(Mt,se),Mt.forEach(v),ke=D(be),re=I(be,"BUTTON",{class:!0});var jt=T(re);Ve=M(jt,"+"),jt.forEach(v),be.forEach(v),Re=D(ee),ie=I(ee,"DIV",{});var vt=T(ie);qe=M(vt,`Mode type
			`);for(let F=0;F<G.length;F+=1)G[F].l(vt);vt.forEach(v),j=D(ee),P=I(ee,"DIV",{});var Xe=T(P);J=I(Xe,"DIV",{});var St=T(J);H=I(St,"DIV",{});var $e=T(H);x=I($e,"H2",{class:!0});var He=T(x);Qe=M(He,"Equivalent "),Ge=M(He,Fe),We=M(He," modes"),He.forEach(v),Ye=D($e);for(let F=0;F<U.length;F+=1)U[F].l($e);$e.forEach(v),St.forEach(v),Ze=D(Xe),we=I(Xe,"DIV",{});var Nt=T(we);ce=I(Nt,"DIV",{});var Je=T(ce);Ie=I(Je,"H2",{class:!0});var Ct=T(Ie);xe=M(Ct,"Modes by modification"),Ct.forEach(v),et=D(Je);for(let F=0;F<X.length;F+=1)X[F].l(Je);Je.forEach(v),Nt.forEach(v),Xe.forEach(v),tt=D(ee),Ee=I(ee,"DIV",{class:!0});var Dt=T(Ee);z=I(Dt,"DIV",{class:!0});var ue=T(z);de=I(ue,"BUTTON",{class:!0});var Pt=T(de);lt=M(Pt,"▶ Scale"),Pt.forEach(v),nt=D(ue),_e=I(ue,"BUTTON",{class:!0});var At=T(_e);at=M(At,"▶ Scale + Pedal"),At.forEach(v),ot=D(ue),me=I(ue,"BUTTON",{class:!0});var Ot=T(me);st=M(Ot,"▶ Scale + Drone"),Ot.forEach(v),rt=D(ue),ve=I(ue,"BUTTON",{class:!0});var Bt=T(ve);it=M(Bt,"▶ Jam"),Bt.forEach(v),ue.forEach(v),Dt.forEach(v),ct=D(ee),Me=I(ee,"DIV",{class:!0});var Ft=T(Me);je=I(Ft,"DIV",{class:!0});var wt=T(je);ae=I(wt,"DIV",{});var Ae=T(ae);ye=I(Ae,"BUTTON",{class:!0});var Lt=T(ye);ut=M(Lt,"-"),Lt.forEach(v),ht=D(Ae),ge=I(Ae,"SPAN",{class:!0});var yt=T(ge);Ue=M(yt,e[5]),ft=M(yt," bpm"),yt.forEach(v),dt=D(Ae),pe=I(Ae,"BUTTON",{class:!0});var Vt=T(pe);_t=M(Vt,"+"),Vt.forEach(v),Ae.forEach(v),wt.forEach(v),Ft.forEach(v),ee.forEach(v),o.forEach(v),this.h()},h(){r(t,"class","svelte-4fydyj"),r(_,"cx",e[6].xCentre),r(_,"cy",e[6].yCentre),r(_,"r",e[6].radius),r(_,"stroke","grey"),r(_,"stroke-width",1),r(_,"fill","var(--base-background-color)"),r(_,"class","background svelte-4fydyj"),r(h,"id","boxOfNotes"),r(h,"viewBox","0 0 800 800"),r(h,"xmlns","http://www.w3.org/2000/svg"),r(h,"class","svelte-4fydyj"),r(S,"class","svelte-4fydyj"),r(Q,"class","noteLabel svelte-4fydyj"),r(re,"class","svelte-4fydyj"),r(x,"class","svelte-4fydyj"),r(Ie,"class","svelte-4fydyj"),r(de,"class","svelte-4fydyj"),r(_e,"class","svelte-4fydyj"),r(me,"class","svelte-4fydyj"),r(ve,"class","svelte-4fydyj"),r(z,"class","svelte-4fydyj"),r(Ee,"class","musicControls svelte-4fydyj"),r(ye,"class","svelte-4fydyj"),r(ge,"class","noteLabel svelte-4fydyj"),r(pe,"class","svelte-4fydyj"),r(je,"class","svelte-4fydyj"),r(Me,"class","musicControls svelte-4fydyj"),r(g,"class","boxOfButtons svelte-4fydyj"),r(f,"class","appContainer svelte-4fydyj"),r(f,"data-sveltekit-preload-data","hover")},m(c,N){oe(c,t,N),i(t,l),i(t,a),i(t,s),oe(c,d,N),oe(c,f,N),i(f,h),i(h,_);for(let o=0;o<R.length;o+=1)R[o].m(h,null);i(h,m);for(let o=0;o<q.length;o+=1)q[o].m(h,null);i(f,b),i(f,g),i(g,p),i(p,A),i(p,S),i(S,Te),i(p,K),i(p,Q),i(Q,W),i(p,ke),i(p,re),i(re,Ve),i(g,Re),i(g,ie),i(ie,qe);for(let o=0;o<G.length;o+=1)G[o].m(ie,null);i(g,j),i(g,P),i(P,J),i(J,H),i(H,x),i(x,Qe),i(x,Ge),i(x,We),i(H,Ye);for(let o=0;o<U.length;o+=1)U[o].m(H,null);i(P,Ze),i(P,we),i(we,ce),i(ce,Ie),i(Ie,xe),i(ce,et);for(let o=0;o<X.length;o+=1)X[o].m(ce,null);i(g,tt),i(g,Ee),i(Ee,z),i(z,de),i(de,lt),i(z,nt),i(z,_e),i(_e,at),i(z,ot),i(z,me),i(me,st),i(z,rt),i(z,ve),i(ve,it),i(g,ct),i(g,Me),i(Me,je),i(je,ae),i(ae,ye),i(ye,ut),i(ae,ht),i(ae,ge),i(ge,Ue),i(ge,ft),i(ae,dt),i(ae,pe),i(pe,_t),mt||(It=[Y(S,"click",e[14]),Y(re,"click",e[15]),Y(de,"click",e[19]),Y(_e,"click",e[20]),Y(me,"click",e[21]),Y(ve,"click",e[22]),Y(ye,"click",e[23]),Y(pe,"click",e[24])],mt=!0)},p(c,N){if(N[0]&4&&n!==(n=c[10](y[O(c[2],y.length)])+"")&&Z(l,n),N[0]&16&&u!==(u=c[4].name+"")&&Z(s,u),N[0]&11413){Se=[...y];let o;for(o=0;o<Se.length;o+=1){const B=zt(c,Se,o);R[o]?R[o].p(B,N):(R[o]=Kt(B),R[o].c(),R[o].m(h,m))}for(;o<R.length;o+=1)R[o].d(1);R.length=Se.length}if(N[0]&7070){Ne=[...c[4].scale];let o;for(o=0;o<Ne.length;o+=1){const B=Jt(c,Ne,o);q[o]?q[o].p(B,N):(q[o]=Qt(B),q[o].c(),q[o].m(h,null))}for(;o<q.length;o+=1)q[o].d(1);q.length=Ne.length}if(N[0]&4&&se!==(se=c[10](y[O(c[2],y.length)])+"")&&Z(W,se),N[0]&24){Ce=bt;let o;for(o=0;o<Ce.length;o+=1){const B=Ht(c,Ce,o);G[o]?G[o].p(B,N):(G[o]=Wt(B),G[o].c(),G[o].m(ie,null))}for(;o<G.length;o+=1)G[o].d(1);G.length=Ce.length}if(N[0]&8&&Fe!==(Fe=c[3].label+"")&&Z(Ge,Fe),N[0]&1054){De=c[3].modes;let o;for(o=0;o<De.length;o+=1){const B=$t(c,De,o);U[o]?U[o].p(B,N):(U[o]=Yt(B),U[o].c(),U[o].m(H,null))}for(;o<U.length;o+=1)U[o].d(1);U.length=De.length}if(N[0]&1054){Pe=c[3].modes;let o;for(o=0;o<Pe.length;o+=1){const B=Xt(c,Pe,o);X[o]?X[o].p(B,N):(X[o]=Zt(B),X[o].c(),X[o].m(ce,null))}for(;o<X.length;o+=1)X[o].d(1);X.length=Pe.length}N[0]&32&&Z(Ue,c[5])},i:qt,o:qt,d(c){c&&v(t),c&&v(d),c&&v(f),Le(R,c),Le(q,c),Le(G,c),Le(U,c),Le(X,c),mt=!1,ll(It)}}}function Ol(e,t,n){const l={xCentre:400,yCentre:400,radius:300};let a={};Tt.subscribe(j=>{n(0,a=j)});let u=!0;const s={...l,radius:l.radius},d={...l,radius:l.radius-70},f={...l,radius:l.radius+70};let h=0,_=bt[0],m=_.modes[0];const b=j=>j.preferSharp?j.sharpNote:j.flatNote,g=(j,P)=>({x:P.xCentre+P.radius*Math.cos(j*2*Math.PI/y.length-.5*Math.PI),y:P.yCentre+P.radius*Math.sin(j*2*Math.PI/y.length-.5*Math.PI)}),p=(j,P,J)=>({x:J.xCentre+J.radius*Math.cos((j.semitonesFromRoot+P)*2*Math.PI/y.length-.5*Math.PI),y:J.yCentre+J.radius*Math.sin((j.semitonesFromRoot+P)*2*Math.PI/y.length-.5*Math.PI)}),A=(j,P,J)=>{let H=O(j-P,y.length);return H<0&&(H=H+y.length),J.some(x=>x.semitonesFromRoot===H)};let S=70;return[a,u,h,_,m,S,l,s,d,f,b,g,p,A,()=>{n(2,h=h-1),h<0&&n(2,h=h+12)},()=>{n(2,h=h+1),h>=12&&n(2,h=h-12)},j=>{_!==j&&(n(3,_=j),n(4,m=j.modes[0]))},(j,P)=>{n(4,m=j),n(2,h=O(P,y.length)),n(1,u=!0)},(j,P)=>{n(4,m=j),n(2,h=O(P,y.length)),n(1,u=!1)},()=>{Cl(m.scale,h,60*1e3/S)},()=>{Nl(m.scale,h,60*1e3/S)},()=>{Dl(m.scale,h,60*1e3/S)},()=>{Pl(m.scale,h,_.probabilityDistributions.melody,_.probabilityDistributions.bass,60*1e3/S)},()=>{S>10&&n(5,S=S-20)},()=>{n(5,S=S+20)}]}class wl extends xt{constructor(t){super(),el(this,t,Ol,Al,tl,{},null,[-1,-1])}}export{wl as default};

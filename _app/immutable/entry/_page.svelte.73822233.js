import{S as Zt,i as xt,s as el,k as I,q as E,a as C,J as ne,e as qt,l as k,m as T,r as M,c as D,h as v,K as ae,n as s,b as se,G as i,L as Z,u as x,H as Rt,M as Le,N as tl,p as Oe,O as fe}from"../chunks/index.9fc21f1b.js";import{w as ll}from"../chunks/index.b3a1d362.js";const O=(e,t)=>{const n=e%t;return n<0?n+t:n},nl=e=>{if(isNaN(e))return"NaN";const t=String(+e).split("")??[],n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let l="",a=3;for(;a--;)l=(n[+(t.pop()??"")+a*10]||"")+l;return Array(+t.join("")+1).join("M")+l},y=[{sharpNote:"C",flatNote:"C",defaultOctaveFrequency:261.63},{sharpNote:"C#",flatNote:"D♭",preferSharp:!0,defaultOctaveFrequency:277.18},{sharpNote:"D",flatNote:"D",defaultOctaveFrequency:293.66},{sharpNote:"D#",flatNote:"E♭",preferSharp:!1,defaultOctaveFrequency:311.13},{sharpNote:"E",flatNote:"E",defaultOctaveFrequency:329.63},{sharpNote:"F",flatNote:"F",defaultOctaveFrequency:349.23},{sharpNote:"F#",flatNote:"G♭",preferSharp:!0,defaultOctaveFrequency:185},{sharpNote:"G",flatNote:"G",defaultOctaveFrequency:196},{sharpNote:"G#",flatNote:"A♭",preferSharp:!1,defaultOctaveFrequency:207.65},{sharpNote:"A",flatNote:"A",defaultOctaveFrequency:220},{sharpNote:"A#",flatNote:"B♭",preferSharp:!1,defaultOctaveFrequency:233.08},{sharpNote:"A",flatNote:"B",defaultOctaveFrequency:246.94}],X=[2,2,1,2,2,2,1],le=[2,2,3,2,3],z=[3,2,1,1,3,2],Je=[1,256/243,9/8,32/27,81/64,4/3,1024/729,3/2,128/81,27/16,16/9,243/128],gt={pentatonic:[.3,.05,.05,.2,.1],diatonic:[.3,.05,.15,.05,.075,.05,.03],hexatonic:[.3,.075,.15,.075,.075,.05]},pt={pentatonic:[.5,.05,.15,.2,.05],diatonic:[.5,.02,.05,.1,.1,.05,.02],hexatonic:[.5,.02,.05,.1,.1,.05]},Be=.25,P=(e,t,n)=>{let l=0;for(let a=e;a<t;a++)l+=n[O(a,n.length)];return l},al=(e,t)=>e===4&&t===7?"major":e===3&&t===7?"minor":e===3&&t===6?"diminished":"bizarre",ol=(e,t,n)=>{const l=nl(O(e+1,n.length+1)),a=e+t,u=al(P(a,a+2,n),P(a,a+4,n));return u==="major"?l:u==="minor"?l.toLowerCase():u==="diminished"?`${l.toLowerCase()}°`:l},L=(e,t)=>{const n=[];for(let l=0;l<t.length;l++)n.push({semitonesFromRoot:P(e,e+l,t),label:ol(l,e,t)});return n},Gt=(e,t)=>{const n=t+1,l=e.semitonesFromRoot-P(0,t,X);if(l===1)return`A${n}`;if([1,4,5].includes(n)){if(l===0)return`P${n}`;if(l===-1)return`d${n}`}return l===0?`M${n}`:l===-1?`m${n}`:l===-2?`d${n}`:`${e.semitonesFromRoot}s`},sl=L(0,X),rl=L(1,X),il=L(2,X),cl=L(3,X),ul=L(4,X),hl=L(5,X),fl=L(6,X),dl=[{name:"Ionian / Major",scale:sl,rootIntervalToIonian:P(0,0,X)},{name:"Dorian",scale:rl,rootIntervalToIonian:P(0,1,X)},{name:"Phrygian",scale:il,rootIntervalToIonian:P(0,2,X)},{name:"Lydian",scale:cl,rootIntervalToIonian:P(0,3,X)},{name:"Mixolydian",scale:ul,rootIntervalToIonian:P(0,4,X)},{name:"Aeolian / Natural Minor",scale:hl,rootIntervalToIonian:P(0,5,X)},{name:"Locrian",scale:fl,rootIntervalToIonian:P(0,6,X)}],_l=L(0,le),ml=L(1,le),vl=L(2,le),yl=L(3,le),gl=L(4,le),pl=[{name:"Major",scale:_l,rootIntervalToIonian:P(0,0,le)},{name:"Suspended / Egyptian",scale:ml,rootIntervalToIonian:P(0,1,le)},{name:"Blues minor / Man Gong",scale:vl,rootIntervalToIonian:P(0,2,le)},{name:"Blues major",scale:yl,rootIntervalToIonian:P(0,3,le)},{name:"Minor",scale:gl,rootIntervalToIonian:P(0,4,le)}],bl=L(0,z),Tl=L(1,z),Il=L(2,z),kl=L(3,z),El=L(4,z),Ml=L(5,z),jl=[{name:"Minor",scale:bl,rootIntervalToIonian:P(0,0,z)},{name:"Major",scale:Tl,rootIntervalToIonian:P(0,1,z)},{name:"Weird 3",scale:Il,rootIntervalToIonian:P(0,2,z)},{name:"Weird 4",scale:kl,rootIntervalToIonian:P(0,3,z)},{name:"Weird 5",scale:El,rootIntervalToIonian:P(0,4,z)},{name:"Weird 6",scale:Ml,rootIntervalToIonian:P(0,5,z)}],bt=[{label:"Diatonic",modes:dl,probabilityDistributions:{bass:pt.diatonic,melody:gt.diatonic}},{label:"(Major) Pentatonic",modes:pl,probabilityDistributions:{bass:pt.pentatonic,melody:gt.pentatonic}},{label:"(Minor) Blues",modes:jl,probabilityDistributions:{bass:pt.hexatonic,melody:gt.hexatonic}}],Tt=ll({}),ze=300,It=.75,Sl=12,Nl=1e-6,Cl={attackTime:.1,decayTime:.3,releaseTime:.5,maxSustainTime:.2,maxGain:.1,sustainGainRatio:.1,oscillatorType:"sine"},Dl=(e,t)=>{let n=1;for(;t<0;)t=t+Je.length,n=n*.5;for(;t>=Je.length;)t=t-Je.length,n=n*2;return n=n*Je[t],e.defaultOctaveFrequency*n},$=(e,t,n,l,a={})=>{if(l<n){console.log("Warning: note end time earlier than start time");return}const u={...Cl,...a};let{attackTime:r,decayTime:d}={...u};const{releaseTime:f,maxSustainTime:h,maxGain:_,sustainGainRatio:m,oscillatorType:b="triangle"}={...u},g=_*m,p=new AudioContext,B=p.createOscillator(),S=p.createGain(),Te=p.createDynamicsCompressor();S.gain.value=.001,B.type=b,B.frequency.value=Dl(e,t),B.connect(S).connect(Te).connect(p.destination);const K=l-n;r>K/(2*1e3)&&(r=K/(2*1e3)),d+r>K/1e3&&(d=K/1e3-r);let Q=h??1e4;Q>K/1e3-r-d&&(Q=K/1e3-r-d),setTimeout(function(){const re=p.currentTime+r;S.gain.exponentialRampToValueAtTime(_,re),Tt.update(Y=>({...Y,[O(t,y.length)]:(Y[`${t}`]??0)+1})),B.start(),setTimeout(()=>{S.gain.exponentialRampToValueAtTime(g,p.currentTime+d),setTimeout(()=>{S.gain.exponentialRampToValueAtTime(Nl,p.currentTime+f),Tt.update(Y=>{const Ie=Math.max((Y[`${t}`]??0)-1,0);return{...Y,[O(t,y.length)]:Ie}}),setTimeout(function(){B.stop(),p.close()},f*1e3+2e3)},Q*1e3)},r*1e3)},n)},Pl=(e,t,n=ze,l=It)=>{const a=n*.5*l,u=n*.5-a,r=n*.5;[...e].forEach((d,f)=>{f===0?$(y[t],d.semitonesFromRoot,f*2*r+u,f*2*r+u+a+r):($(y[t],0,f*2*r+u,f*2*r+u+a),$(y[t],d.semitonesFromRoot,(f*2+1)*r+u,(f*2+1)*r+u+a))}),$(y[t],0,e.length*2*r+u,e.length*2*r+u+a),$(y[t],y.length,(e.length*2+1)*r+u,(e.length*2+1)*r+u+a)},Al=(e,t,n=ze,l=It)=>{const a=n*.5*l,u=n*.5-a,r=n*.5;$(y[t],e[0].semitonesFromRoot,u,r+u+a+r),[...e].forEach((d,f)=>{$(y[t],d.semitonesFromRoot,(f+2)*r+u,(f+2)*r+u+a+r)}),$(y[t],y.length,(e.length+2)*r+u,(e.length+2)*r+u+a),[...e].reverse().forEach((d,f)=>{$(y[t],d.semitonesFromRoot,(f+e.length+3)*r+u,(f+e.length+3)*r+u+a+r)})},Bl=(e,t,n=ze,l=It)=>{const a=n*.5*l,u=n*.5-a,r=n*.5;$(y[t],0,u,u+r*(e.length*2+3),{maxSustainTime:r*(e.length*2+2),oscillatorType:"sine",sustainGainRatio:.5,maxGain:.0125}),[...e].forEach((d,f)=>{$(y[t],d.semitonesFromRoot,(f+2)*r+u,(f+2)*r+u+a+r)}),$(y[t],y.length,(e.length+2)*r+u,(e.length+2)*r+u+a),[...e].reverse().forEach((d,f)=>{$(y[t],d.semitonesFromRoot,(f+e.length+3)*r+u,(f+e.length+3)*r+u+a+r)})},Ol=(e,t,n,l,a=ze,u=Sl)=>{let r=0;for(;r<=u;)e.forEach((f,h)=>{if(!(h>=n.length)&&Math.random()<n[h]){const _=Math.random();let m=1;_>.8&&(m=2),_>.9&&(m=4),_>.95&&(m=6),_>.97&&(m=3),_>.99&&(m=8),$(y[t],f.semitonesFromRoot+y.length,a*r,a*r+a*Be*m),r+=Be}}),r+=Be;let d=0;for(;d<=u;)e.forEach((f,h)=>{if(!(h>=l.length)&&Math.random()<l[h]){const _=Math.random();let m=1;_>.8&&(m=2),_>.9&&(m=4),_>.95&&(m=6),_>.97&&(m=3),_>.99&&(m=8),$(y[t],f.semitonesFromRoot,a*d,a*d+a*2*Be*m),d+=2*Be}}),d+=2*Be};function Ut(e,t,n){const l=e.slice();l[25]=t[n];const a=l[2];return l[26]=a,l}function Xt(e,t,n){const l=e.slice();l[25]=t[n];const a=l[2]+l[25].rootIntervalToIonian-l[4].rootIntervalToIonian;return l[26]=a,l}function $t(e,t,n){const l=e.slice();return l[31]=t[n],l}function Ht(e,t,n){const l=e.slice();l[34]=t[n],l[39]=n;const a=l[1]?l[11](l[4].scale[O(l[39]-l[3].modes.findIndex(d=>d===l[4]),l[4].scale.length)].semitonesFromRoot+l[2],l[7]):l[11](l[34].semitonesFromRoot+l[2],l[7]);l[35]=a;const u=l[12](l[34],l[2],l[8]);l[36]=u;const r=l[12](l[34],l[2],l[9]);return l[37]=r,l}function Wt(e,t,n){const l=e.slice();l[40]=t[n],l[39]=n;const a=l[11](l[39],l[7]);return l[35]=a,l}function Jt(e){let t,n,l,a,u,r,d,f=e[10](e[40])+"",h,_;return{c(){t=ne("g"),n=ne("circle"),a=ne("circle"),d=ne("text"),h=E(f),this.h()},l(m){t=ae(m,"g",{});var b=T(t);n=ae(b,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0}),T(n).forEach(v),a=ae(b,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0,opacity:!0,class:!0}),T(a).forEach(v),d=ae(b,"text",{x:!0,y:!0,class:!0,"text-anchor":!0,dy:!0});var g=T(d);h=M(g,f),g.forEach(v),b.forEach(v),this.h()},h(){Oe(n,"stroke-width","1.6871"),Oe(n,"stroke-miterlimit","10"),s(n,"cx",0),s(n,"cy",0),s(n,"r",30),s(n,"transform",`translate(${e[35].x} ${e[35].y})`),s(n,"stroke","transparent"),s(n,"fill",l=e[39]===e[2]?"yellow":"var(--base-background-color)"),Oe(a,"stroke-width","1.6871"),Oe(a,"stroke-miterlimit","10"),s(a,"cx",0),s(a,"cy",0),s(a,"r",30),s(a,"transform",`translate(${e[35].x} ${e[35].y})`),s(a,"stroke","transparent"),s(a,"fill",u=e[0][`${O(e[39]-e[2],y.length)}`]>0?"blue":"var(--base-background-color)"),s(a,"opacity",r=e[0][`${O(e[39]-e[2],y.length)}`]>0?"0.5":"0"),s(a,"class","transitionAllQuick svelte-4fydyj"),s(d,"x",e[35].x),s(d,"y",e[35].y),s(d,"class",_=fe(`svgNoteName ${e[13](e[39],e[2],e[4].scale)?"svgSelectedNoteName":""}`)+" svelte-4fydyj"),s(d,"text-anchor","middle"),s(d,"dy",".3em")},m(m,b){se(m,t,b),i(t,n),i(t,a),i(t,d),i(d,h)},p(m,b){b[0]&4&&l!==(l=m[39]===m[2]?"yellow":"var(--base-background-color)")&&s(n,"fill",l),b[0]&5&&u!==(u=m[0][`${O(m[39]-m[2],y.length)}`]>0?"blue":"var(--base-background-color)")&&s(a,"fill",u),b[0]&5&&r!==(r=m[0][`${O(m[39]-m[2],y.length)}`]>0?"0.5":"0")&&s(a,"opacity",r),b[0]&20&&_!==(_=fe(`svgNoteName ${m[13](m[39],m[2],m[4].scale)?"svgSelectedNoteName":""}`)+" svelte-4fydyj")&&s(d,"class",_)},d(m){m&&v(t)}}}function zt(e){let t,n,l,a,u=e[34].label+"",r,d,f,h=Gt(e[34],e[39])+"",_,m;return{c(){t=ne("circle"),l=ne("g"),a=ne("text"),r=E(u),f=ne("text"),_=E(h),this.h()},l(b){t=ae(b,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0,class:!0}),T(t).forEach(v),l=ae(b,"g",{class:!0});var g=T(l);a=ae(g,"text",{x:!0,y:!0,"text-anchor":!0,dy:!0,transform:!0,class:!0});var p=T(a);r=M(p,u),p.forEach(v),f=ae(g,"text",{x:!0,y:!0,"text-anchor":!0,dy:!0,transform:!0,class:!0});var B=T(f);_=M(B,h),B.forEach(v),g.forEach(v),this.h()},h(){Oe(t,"stroke-width","1.6871"),Oe(t,"stroke-miterlimit","10"),s(t,"cx",0),s(t,"cy",0),s(t,"r",30),s(t,"transform",n=`translate(${e[35].x} ${e[35].y})`),s(t,"stroke","black"),s(t,"fill","transparent"),s(t,"class","transitionAll svelte-4fydyj"),s(a,"x",0),s(a,"y",0),s(a,"text-anchor","middle"),s(a,"dy",".3em"),s(a,"transform",d=`translate(${e[36].x} ${e[36].y})`),s(a,"class","svgNoteName scaleNote transitionAll svelte-4fydyj"),s(f,"x",0),s(f,"y",0),s(f,"text-anchor","middle"),s(f,"dy",".3em"),s(f,"transform",m=`translate(${e[37].x} ${e[37].y})`),s(f,"class","svgNoteName scaleNote transitionAll svelte-4fydyj"),s(l,"class","transitionNote")},m(b,g){se(b,t,g),se(b,l,g),i(l,a),i(a,r),i(l,f),i(f,_)},p(b,g){g[0]&30&&n!==(n=`translate(${b[35].x} ${b[35].y})`)&&s(t,"transform",n),g[0]&16&&u!==(u=b[34].label+"")&&x(r,u),g[0]&20&&d!==(d=`translate(${b[36].x} ${b[36].y})`)&&s(a,"transform",d),g[0]&16&&h!==(h=Gt(b[34],b[39])+"")&&x(_,h),g[0]&20&&m!==(m=`translate(${b[37].x} ${b[37].y})`)&&s(f,"transform",m)},d(b){b&&v(t),b&&v(l)}}}function Kt(e){let t,n=e[31].label+"",l,a,u,r,d;function f(){return e[16](e[31])}return{c(){t=I("button"),l=E(n),a=C(),this.h()},l(h){t=k(h,"BUTTON",{class:!0});var _=T(t);l=M(_,n),a=D(_),_.forEach(v),this.h()},h(){s(t,"class",u=fe(e[3]===e[31]?"selectedTab":"")+" svelte-4fydyj")},m(h,_){se(h,t,_),i(t,l),i(t,a),r||(d=Z(t,"click",f),r=!0)},p(h,_){e=h,_[0]&8&&u!==(u=fe(e[3]===e[31]?"selectedTab":"")+" svelte-4fydyj")&&s(t,"class",u)},d(h){h&&v(t),r=!1,d()}}}function Qt(e){let t,n,l=e[10](y[O(e[26],y.length)])+"",a,u,r=e[25].name+"",d,f,h,_,m;function b(){return e[17](e[25],e[26])}return{c(){t=I("button"),n=I("span"),a=E(l),u=C(),d=E(r),f=C(),this.h()},l(g){t=k(g,"BUTTON",{class:!0});var p=T(t);n=k(p,"SPAN",{class:!0});var B=T(n);a=M(B,l),B.forEach(v),u=D(p),d=M(p,r),f=D(p),p.forEach(v),this.h()},h(){s(n,"class","noteLabel svelte-4fydyj"),s(t,"class",h=fe(e[25]===e[4]&&e[1]?"selectedTab":"")+" svelte-4fydyj")},m(g,p){se(g,t,p),i(t,n),i(n,a),i(t,u),i(t,d),i(t,f),_||(m=Z(t,"click",b),_=!0)},p(g,p){e=g,p[0]&28&&l!==(l=e[10](y[O(e[26],y.length)])+"")&&x(a,l),p[0]&8&&r!==(r=e[25].name+"")&&x(d,r),p[0]&26&&h!==(h=fe(e[25]===e[4]&&e[1]?"selectedTab":"")+" svelte-4fydyj")&&s(t,"class",h)},d(g){g&&v(t),_=!1,m()}}}function Yt(e){let t,n,l=e[10](y[O(e[26],y.length)])+"",a,u,r=e[25].name+"",d,f,h,_,m;function b(){return e[18](e[25],e[26])}return{c(){t=I("button"),n=I("span"),a=E(l),u=C(),d=E(r),f=C(),this.h()},l(g){t=k(g,"BUTTON",{class:!0});var p=T(t);n=k(p,"SPAN",{class:!0});var B=T(n);a=M(B,l),B.forEach(v),u=D(p),d=M(p,r),f=D(p),p.forEach(v),this.h()},h(){s(n,"class","noteLabel svelte-4fydyj"),s(t,"class",h=fe(e[25]===e[4]&&!e[1]?"selectedTab":"")+" svelte-4fydyj")},m(g,p){se(g,t,p),i(t,n),i(n,a),i(t,u),i(t,d),i(t,f),_||(m=Z(t,"click",b),_=!0)},p(g,p){e=g,p[0]&4&&l!==(l=e[10](y[O(e[26],y.length)])+"")&&x(a,l),p[0]&8&&r!==(r=e[25].name+"")&&x(d,r),p[0]&26&&h!==(h=fe(e[25]===e[4]&&!e[1]?"selectedTab":"")+" svelte-4fydyj")&&s(t,"class",h)},d(g){g&&v(t),_=!1,m()}}}function Fl(e){let t,n=e[10](y[O(e[2],y.length)])+"",l,a,u=e[4].name+"",r,d,f,h,_,m,b,g,p,B,S,Te,K,Q,re=e[10](y[O(e[2],y.length)])+"",Y,Ie,ie,Ve,qe,ce,Re,j,A,W,H,ee,Ke,Fe=e[3].label+"",Ge,Qe,Ye,Ze,we,ue,ke,xe,et,tt,Ee,J,de,lt,nt,_e,at,ot,me,st,rt,ve,it,ct,Me,je,oe,ye,ut,ht,ge,Ue,ft,dt,pe,_t,mt,kt,Se=[...y],V=[];for(let c=0;c<Se.length;c+=1)V[c]=Jt(Wt(e,Se,c));let Ne=[...e[4].scale],q=[];for(let c=0;c<Ne.length;c+=1)q[c]=zt(Ht(e,Ne,c));let Ce=bt,R=[];for(let c=0;c<Ce.length;c+=1)R[c]=Kt($t(e,Ce,c));let De=e[3].modes,G=[];for(let c=0;c<De.length;c+=1)G[c]=Qt(Xt(e,De,c));let Pe=e[3].modes,U=[];for(let c=0;c<Pe.length;c+=1)U[c]=Yt(Ut(e,Pe,c));return{c(){t=I("h1"),l=E(n),a=C(),r=E(u),d=C(),f=I("div"),h=ne("svg"),_=ne("circle");for(let c=0;c<V.length;c+=1)V[c].c();m=qt();for(let c=0;c<q.length;c+=1)q[c].c();b=C(),g=I("div"),p=I("div"),B=E(`Root note
			`),S=I("button"),Te=E("-"),K=C(),Q=I("span"),Y=E(re),Ie=C(),ie=I("button"),Ve=E("+"),qe=C(),ce=I("div"),Re=E(`Mode type
			`);for(let c=0;c<R.length;c+=1)R[c].c();j=C(),A=I("div"),W=I("div"),H=I("div"),ee=I("h2"),Ke=E("Equivalent "),Ge=E(Fe),Qe=E(" modes"),Ye=C();for(let c=0;c<G.length;c+=1)G[c].c();Ze=C(),we=I("div"),ue=I("div"),ke=I("h2"),xe=E("Modes by modification"),et=C();for(let c=0;c<U.length;c+=1)U[c].c();tt=C(),Ee=I("div"),J=I("div"),de=I("button"),lt=E("▶ Scale"),nt=C(),_e=I("button"),at=E("▶ Scale + Pedal"),ot=C(),me=I("button"),st=E("▶ Scale + Drone"),rt=C(),ve=I("button"),it=E("▶ Jam"),ct=C(),Me=I("div"),je=I("div"),oe=I("div"),ye=I("button"),ut=E("-"),ht=C(),ge=I("span"),Ue=E(e[5]),ft=E(" bpm"),dt=C(),pe=I("button"),_t=E("+"),this.h()},l(c){t=k(c,"H1",{class:!0});var N=T(t);l=M(N,n),a=D(N),r=M(N,u),N.forEach(v),d=D(c),f=k(c,"DIV",{class:!0,"data-sveltekit-preload-data":!0});var o=T(f);h=ae(o,"svg",{id:!0,viewBox:!0,xmlns:!0,class:!0});var F=T(h);_=ae(F,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,class:!0}),T(_).forEach(v);for(let w=0;w<V.length;w+=1)V[w].l(F);m=qt();for(let w=0;w<q.length;w+=1)q[w].l(F);F.forEach(v),b=D(o),g=k(o,"DIV",{class:!0});var te=T(g);p=k(te,"DIV",{});var be=T(p);B=M(be,`Root note
			`),S=k(be,"BUTTON",{class:!0});var Et=T(S);Te=M(Et,"-"),Et.forEach(v),K=D(be),Q=k(be,"SPAN",{class:!0});var Mt=T(Q);Y=M(Mt,re),Mt.forEach(v),Ie=D(be),ie=k(be,"BUTTON",{class:!0});var jt=T(ie);Ve=M(jt,"+"),jt.forEach(v),be.forEach(v),qe=D(te),ce=k(te,"DIV",{});var vt=T(ce);Re=M(vt,`Mode type
			`);for(let w=0;w<R.length;w+=1)R[w].l(vt);vt.forEach(v),j=D(te),A=k(te,"DIV",{});var Xe=T(A);W=k(Xe,"DIV",{});var St=T(W);H=k(St,"DIV",{});var $e=T(H);ee=k($e,"H2",{class:!0});var He=T(ee);Ke=M(He,"Equivalent "),Ge=M(He,Fe),Qe=M(He," modes"),He.forEach(v),Ye=D($e);for(let w=0;w<G.length;w+=1)G[w].l($e);$e.forEach(v),St.forEach(v),Ze=D(Xe),we=k(Xe,"DIV",{});var Nt=T(we);ue=k(Nt,"DIV",{});var We=T(ue);ke=k(We,"H2",{class:!0});var Ct=T(ke);xe=M(Ct,"Modes by modification"),Ct.forEach(v),et=D(We);for(let w=0;w<U.length;w+=1)U[w].l(We);We.forEach(v),Nt.forEach(v),Xe.forEach(v),tt=D(te),Ee=k(te,"DIV",{class:!0});var Dt=T(Ee);J=k(Dt,"DIV",{class:!0});var he=T(J);de=k(he,"BUTTON",{class:!0});var Pt=T(de);lt=M(Pt,"▶ Scale"),Pt.forEach(v),nt=D(he),_e=k(he,"BUTTON",{class:!0});var At=T(_e);at=M(At,"▶ Scale + Pedal"),At.forEach(v),ot=D(he),me=k(he,"BUTTON",{class:!0});var Bt=T(me);st=M(Bt,"▶ Scale + Drone"),Bt.forEach(v),rt=D(he),ve=k(he,"BUTTON",{class:!0});var Ot=T(ve);it=M(Ot,"▶ Jam"),Ot.forEach(v),he.forEach(v),Dt.forEach(v),ct=D(te),Me=k(te,"DIV",{class:!0});var Ft=T(Me);je=k(Ft,"DIV",{class:!0});var wt=T(je);oe=k(wt,"DIV",{});var Ae=T(oe);ye=k(Ae,"BUTTON",{class:!0});var Lt=T(ye);ut=M(Lt,"-"),Lt.forEach(v),ht=D(Ae),ge=k(Ae,"SPAN",{class:!0});var yt=T(ge);Ue=M(yt,e[5]),ft=M(yt," bpm"),yt.forEach(v),dt=D(Ae),pe=k(Ae,"BUTTON",{class:!0});var Vt=T(pe);_t=M(Vt,"+"),Vt.forEach(v),Ae.forEach(v),wt.forEach(v),Ft.forEach(v),te.forEach(v),o.forEach(v),this.h()},h(){s(t,"class","svelte-4fydyj"),s(_,"cx",e[6].xCentre),s(_,"cy",e[6].yCentre),s(_,"r",e[6].radius),s(_,"stroke","grey"),s(_,"stroke-width",1),s(_,"fill","var(--base-background-color)"),s(_,"class","background svelte-4fydyj"),s(h,"id","boxOfNotes"),s(h,"viewBox","0 0 800 800"),s(h,"xmlns","http://www.w3.org/2000/svg"),s(h,"class","svelte-4fydyj"),s(S,"class","svelte-4fydyj"),s(Q,"class","noteLabel svelte-4fydyj"),s(ie,"class","svelte-4fydyj"),s(ee,"class","svelte-4fydyj"),s(ke,"class","svelte-4fydyj"),s(de,"class","svelte-4fydyj"),s(_e,"class","svelte-4fydyj"),s(me,"class","svelte-4fydyj"),s(ve,"class","svelte-4fydyj"),s(J,"class","svelte-4fydyj"),s(Ee,"class","musicControls svelte-4fydyj"),s(ye,"class","svelte-4fydyj"),s(ge,"class","noteLabel svelte-4fydyj"),s(pe,"class","svelte-4fydyj"),s(je,"class","svelte-4fydyj"),s(Me,"class","musicControls svelte-4fydyj"),s(g,"class","boxOfButtons svelte-4fydyj"),s(f,"class","appContainer svelte-4fydyj"),s(f,"data-sveltekit-preload-data","hover")},m(c,N){se(c,t,N),i(t,l),i(t,a),i(t,r),se(c,d,N),se(c,f,N),i(f,h),i(h,_);for(let o=0;o<V.length;o+=1)V[o].m(h,null);i(h,m);for(let o=0;o<q.length;o+=1)q[o].m(h,null);i(f,b),i(f,g),i(g,p),i(p,B),i(p,S),i(S,Te),i(p,K),i(p,Q),i(Q,Y),i(p,Ie),i(p,ie),i(ie,Ve),i(g,qe),i(g,ce),i(ce,Re);for(let o=0;o<R.length;o+=1)R[o].m(ce,null);i(g,j),i(g,A),i(A,W),i(W,H),i(H,ee),i(ee,Ke),i(ee,Ge),i(ee,Qe),i(H,Ye);for(let o=0;o<G.length;o+=1)G[o].m(H,null);i(A,Ze),i(A,we),i(we,ue),i(ue,ke),i(ke,xe),i(ue,et);for(let o=0;o<U.length;o+=1)U[o].m(ue,null);i(g,tt),i(g,Ee),i(Ee,J),i(J,de),i(de,lt),i(J,nt),i(J,_e),i(_e,at),i(J,ot),i(J,me),i(me,st),i(J,rt),i(J,ve),i(ve,it),i(g,ct),i(g,Me),i(Me,je),i(je,oe),i(oe,ye),i(ye,ut),i(oe,ht),i(oe,ge),i(ge,Ue),i(ge,ft),i(oe,dt),i(oe,pe),i(pe,_t),mt||(kt=[Z(S,"click",e[14]),Z(ie,"click",e[15]),Z(de,"click",e[19]),Z(_e,"click",e[20]),Z(me,"click",e[21]),Z(ve,"click",e[22]),Z(ye,"click",e[23]),Z(pe,"click",e[24])],mt=!0)},p(c,N){if(N[0]&4&&n!==(n=c[10](y[O(c[2],y.length)])+"")&&x(l,n),N[0]&16&&u!==(u=c[4].name+"")&&x(r,u),N[0]&11413){Se=[...y];let o;for(o=0;o<Se.length;o+=1){const F=Wt(c,Se,o);V[o]?V[o].p(F,N):(V[o]=Jt(F),V[o].c(),V[o].m(h,m))}for(;o<V.length;o+=1)V[o].d(1);V.length=Se.length}if(N[0]&7070){Ne=[...c[4].scale];let o;for(o=0;o<Ne.length;o+=1){const F=Ht(c,Ne,o);q[o]?q[o].p(F,N):(q[o]=zt(F),q[o].c(),q[o].m(h,null))}for(;o<q.length;o+=1)q[o].d(1);q.length=Ne.length}if(N[0]&4&&re!==(re=c[10](y[O(c[2],y.length)])+"")&&x(Y,re),N[0]&24){Ce=bt;let o;for(o=0;o<Ce.length;o+=1){const F=$t(c,Ce,o);R[o]?R[o].p(F,N):(R[o]=Kt(F),R[o].c(),R[o].m(ce,null))}for(;o<R.length;o+=1)R[o].d(1);R.length=Ce.length}if(N[0]&8&&Fe!==(Fe=c[3].label+"")&&x(Ge,Fe),N[0]&1054){De=c[3].modes;let o;for(o=0;o<De.length;o+=1){const F=Xt(c,De,o);G[o]?G[o].p(F,N):(G[o]=Qt(F),G[o].c(),G[o].m(H,null))}for(;o<G.length;o+=1)G[o].d(1);G.length=De.length}if(N[0]&1054){Pe=c[3].modes;let o;for(o=0;o<Pe.length;o+=1){const F=Ut(c,Pe,o);U[o]?U[o].p(F,N):(U[o]=Yt(F),U[o].c(),U[o].m(ue,null))}for(;o<U.length;o+=1)U[o].d(1);U.length=Pe.length}N[0]&32&&x(Ue,c[5])},i:Rt,o:Rt,d(c){c&&v(t),c&&v(d),c&&v(f),Le(V,c),Le(q,c),Le(R,c),Le(G,c),Le(U,c),mt=!1,tl(kt)}}}function wl(e,t,n){const l={xCentre:400,yCentre:400,radius:300};let a={};Tt.subscribe(j=>{console.log("newPlayingNotes are",j),n(0,a=j)});let u=!0;const r={...l,radius:l.radius},d={...l,radius:l.radius-70},f={...l,radius:l.radius+70};let h=0,_=bt[0],m=_.modes[0];const b=j=>j.preferSharp?j.sharpNote:j.flatNote,g=(j,A)=>({x:A.xCentre+A.radius*Math.cos(j*2*Math.PI/y.length-.5*Math.PI),y:A.yCentre+A.radius*Math.sin(j*2*Math.PI/y.length-.5*Math.PI)}),p=(j,A,W)=>({x:W.xCentre+W.radius*Math.cos((j.semitonesFromRoot+A)*2*Math.PI/y.length-.5*Math.PI),y:W.yCentre+W.radius*Math.sin((j.semitonesFromRoot+A)*2*Math.PI/y.length-.5*Math.PI)}),B=(j,A,W)=>{let H=O(j-A,y.length);return H<0&&(H=H+y.length),W.some(ee=>ee.semitonesFromRoot===H)};let S=90;return[a,u,h,_,m,S,l,r,d,f,b,g,p,B,()=>{n(2,h=h-1),h<0&&n(2,h=h+12)},()=>{n(2,h=h+1),h>=12&&n(2,h=h-12)},j=>{_!==j&&(n(3,_=j),n(4,m=j.modes[0]))},(j,A)=>{n(4,m=j),n(2,h=O(A,y.length)),n(1,u=!0)},(j,A)=>{n(4,m=j),n(2,h=O(A,y.length)),n(1,u=!1)},()=>{Al(m.scale,h,60*1e3/S)},()=>{Pl(m.scale,h,60*1e3/S)},()=>{Bl(m.scale,h,60*1e3/S)},()=>{Ol(m.scale,h,_.probabilityDistributions.melody,_.probabilityDistributions.bass,60*1e3/S)},()=>{S>10&&n(5,S=S-20)},()=>{n(5,S=S+20)}]}class ql extends Zt{constructor(t){super(),xt(this,t,wl,Fl,el,{},null,[-1,-1])}}export{ql as default};

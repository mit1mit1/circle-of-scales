import{S as ye,i as ke,s as Se,k as X,q as D,a as j,J as F,e as me,l as w,m as I,r as L,c as G,h as g,K as R,n as a,b as W,G as u,L as ne,u as x,H as pe,M as oe,N as Ce,p as Q,O as te}from"../chunks/index.9fc21f1b.js";const P=(e,l)=>{const t=e%l;return t<0?t+l:t},Ee=e=>{if(isNaN(e))return"NaN";const l=String(+e).split("")??[],t=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let r="",o=3;for(;o--;)r=(t[+(l.pop()??"")+o*10]||"")+r;return Array(+l.join("")+1).join("M")+r},v=[{sharpNote:"C",flatNote:"C"},{sharpNote:"C#",flatNote:"D♭",preferSharp:!0},{sharpNote:"D",flatNote:"D"},{sharpNote:"D#",flatNote:"E♭",preferSharp:!1},{sharpNote:"E",flatNote:"E"},{sharpNote:"F",flatNote:"F"},{sharpNote:"F#",flatNote:"G♭",preferSharp:!0},{sharpNote:"G",flatNote:"G"},{sharpNote:"G#",flatNote:"A♭",preferSharp:!1},{sharpNote:"A",flatNote:"A"},{sharpNote:"A#",flatNote:"B♭",preferSharp:!1},{sharpNote:"A",flatNote:"B"}],M=[2,2,1,2,2,2,1],T=(e,l,t)=>{let r=0;for(let o=e;o<l;o++)r+=t[P(o,t.length)];return r},Me=(e,l)=>e===4&&l===7?"major":e===3&&l===7?"minor":e===3&&l===6?"diminished":"bizarre",Te=(e,l,t)=>{const r=Ee(P(e+1,t.length+1)),o=e+l,p=Me(T(o,o+2,t),T(o,o+4,t));return p==="major"?r:p==="minor"?r.toLowerCase():p==="diminished"?`${r.toLowerCase()}°`:r},U=e=>{const l=[];for(let t=0;t<M.length;t++)l.push({semitonesFromRoot:T(e,e+t,M),label:Te(t,e,M)});return l},Pe=U(0),Ae=U(1),Xe=U(2),we=U(3),De=U(4),Le=U(5),Fe=U(6),ie=[{name:"Ionian / Major",scale:Pe,rootIntervalToIonian:T(0,0,M)},{name:"Dorian",scale:Ae,rootIntervalToIonian:T(0,1,M)},{name:"Phrygian",scale:Xe,rootIntervalToIonian:T(0,2,M)},{name:"Lydian",scale:we,rootIntervalToIonian:T(0,3,M)},{name:"Mixolydian",scale:De,rootIntervalToIonian:T(0,4,M)},{name:"Aeolian / Natural Minor",scale:Le,rootIntervalToIonian:T(0,5,M)},{name:"Locrian",scale:Fe,rootIntervalToIonian:T(0,6,M)}];function de(e,l,t){const r=e.slice();r[10]=l[t];const o=r[0]+r[10].rootIntervalToIonian-r[1].rootIntervalToIonian;return r[11]=o,r}function ge(e,l,t){const r=e.slice();return r[14]=l[t],r}function ve(e,l,t){const r=e.slice();return r[17]=l[t],r[19]=t,r}function Ne(e){let l,t,r,o=e[3](e[17])+"",p,_;return{c(){l=F("g"),t=F("circle"),r=F("text"),p=D(o),this.h()},l(m){l=R(m,"g",{class:!0});var h=I(l);t=R(h,"circle",{style:!0,cx:!0,cy:!0,r:!0,stroke:!0,fill:!0,class:!0}),I(t).forEach(g),r=R(h,"text",{x:!0,y:!0,class:!0,"text-anchor":!0,dy:!0});var f=I(r);p=L(f,o),f.forEach(g),h.forEach(g),this.h()},h(){Q(t,"stroke-width","1.6871"),Q(t,"stroke-miterlimit","10"),a(t,"cx",e[4](e[19]).x),a(t,"cy",e[4](e[19]).y),a(t,"r",30),a(t,"stroke","black"),a(t,"fill","transparent"),a(t,"class","hidden transitionAll svelte-tp9bu9"),a(r,"x",e[4](e[19]).x),a(r,"y",e[4](e[19]).y),a(r,"class",_=te(`svgNoteName transitionAll ${e[6](e[19],e[0],e[1].scale)?"svgSelectedNoteName":""}`)+" svelte-tp9bu9"),a(r,"text-anchor","middle"),a(r,"dy",".3em"),a(l,"class","transitionAll svelte-tp9bu9")},m(m,h){W(m,l,h),u(l,t),u(l,r),u(r,p)},p(m,h){h&3&&_!==(_=te(`svgNoteName transitionAll ${m[6](m[19],m[0],m[1].scale)?"svgSelectedNoteName":""}`)+" svelte-tp9bu9")&&a(r,"class",_)},d(m){m&&g(l)}}}function be(e){let l,t,r,o,p,_,m=e[14].label+"",h,f;return{c(){l=F("g"),t=F("circle"),o=F("circle"),_=F("text"),h=D(m),this.h()},l(i){l=R(i,"g",{class:!0});var N=I(l);t=R(N,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0,class:!0}),I(t).forEach(g),o=R(N,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,class:!0,fill:!0}),I(o).forEach(g),_=R(N,"text",{x:!0,y:!0,"text-anchor":!0,dy:!0,transform:!0,class:!0});var A=I(_);h=L(A,m),A.forEach(g),N.forEach(g),this.h()},h(){Q(t,"stroke-width","1.6871"),Q(t,"stroke-miterlimit","10"),a(t,"cx",0),a(t,"cy",0),a(t,"r",30),a(t,"transform",r=`translate(${e[4](e[14].semitonesFromRoot+e[0]).x} ${e[4](e[14].semitonesFromRoot+e[0]).y})`),a(t,"stroke","black"),a(t,"fill","transparent"),a(t,"class","transitionAll svelte-tp9bu9"),Q(o,"stroke-width","1.6871"),Q(o,"stroke-miterlimit","10"),a(o,"cx",0),a(o,"cy",0),a(o,"r",30),a(o,"transform",p=`translate(${e[5](e[14],e[0]).x} ${e[5](e[14],e[0]).y})`),a(o,"class","hidden svelte-tp9bu9"),a(o,"fill","transparent"),a(_,"x",0),a(_,"y",0),a(_,"text-anchor","middle"),a(_,"dy",".3em"),a(_,"transform",f=`translate(${e[5](e[14],e[0]).x} ${e[5](e[14],e[0]).y})`),a(_,"class","svgNoteName scaleNote transitionAll svelte-tp9bu9"),a(l,"class","transitionNote")},m(i,N){W(i,l,N),u(l,t),u(l,o),u(l,_),u(_,h)},p(i,N){N&3&&r!==(r=`translate(${i[4](i[14].semitonesFromRoot+i[0]).x} ${i[4](i[14].semitonesFromRoot+i[0]).y})`)&&a(t,"transform",r),N&3&&p!==(p=`translate(${i[5](i[14],i[0]).x} ${i[5](i[14],i[0]).y})`)&&a(o,"transform",p),N&2&&m!==(m=i[14].label+"")&&x(h,m),N&3&&f!==(f=`translate(${i[5](i[14],i[0]).x} ${i[5](i[14],i[0]).y})`)&&a(_,"transform",f)},d(i){i&&g(l)}}}function Ie(e){let l,t,r=e[3](v[P(e[11],v.length)])+"",o,p,_=e[10].name+"",m,h,f,i,N;function A(){return e[9](e[10],e[11])}return{c(){l=X("button"),t=X("span"),o=D(r),p=j(),m=D(_),h=j(),this.h()},l(c){l=w(c,"BUTTON",{class:!0});var d=I(l);t=w(d,"SPAN",{class:!0});var $=I(t);o=L($,r),$.forEach(g),p=G(d),m=L(d,_),h=G(d),d.forEach(g),this.h()},h(){a(t,"class","noteLabel svelte-tp9bu9"),a(l,"class",f=te(e[10]===e[1]?"selectedTab":"")+" svelte-tp9bu9")},m(c,d){W(c,l,d),u(l,t),u(t,o),u(l,p),u(l,m),u(l,h),i||(N=ne(l,"click",A),i=!0)},p(c,d){e=c,d&3&&r!==(r=e[3](v[P(e[11],v.length)])+"")&&x(o,r),d&2&&f!==(f=te(e[10]===e[1]?"selectedTab":"")+" svelte-tp9bu9")&&a(l,"class",f)},d(c){c&&g(l),i=!1,N()}}}function Re(e){let l,t=e[3](v[P(e[0],v.length)])+"",r,o,p=e[1].name+"",_,m,h,f,i,N,A,c,d,$,V,B,Y=e[3](v[P(e[0],v.length)])+"",ee,le,O,re,se,q,ae,ce,z=[...v],y=[];for(let n=0;n<z.length;n+=1)y[n]=Ne(ve(e,z,n));let H=[...e[1].scale],k=[];for(let n=0;n<H.length;n+=1)k[n]=be(ge(e,H,n));let J=ie,S=[];for(let n=0;n<J.length;n+=1)S[n]=Ie(de(e,J,n));return{c(){l=X("h1"),r=D(t),o=j(),_=D(p),m=j(),h=X("div"),f=F("svg"),i=F("circle");for(let n=0;n<y.length;n+=1)y[n].c();N=me();for(let n=0;n<k.length;n+=1)k[n].c();A=j(),c=X("div"),d=X("button"),$=D("-"),V=j(),B=X("span"),ee=D(Y),le=j(),O=X("button"),re=D("+"),se=j(),q=X("div");for(let n=0;n<S.length;n+=1)S[n].c();this.h()},l(n){l=w(n,"H1",{class:!0});var b=I(l);r=L(b,t),o=G(b),_=L(b,p),b.forEach(g),m=G(n),h=w(n,"DIV",{class:!0,"data-sveltekit-preload-data":!0});var s=I(h);f=R(s,"svg",{id:!0,viewBox:!0,xmlns:!0,class:!0});var C=I(f);i=R(C,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),I(i).forEach(g);for(let E=0;E<y.length;E+=1)y[E].l(C);N=me();for(let E=0;E<k.length;E+=1)k[E].l(C);C.forEach(g),A=G(s),c=w(s,"DIV",{});var K=I(c);d=w(K,"BUTTON",{class:!0});var he=I(d);$=L(he,"-"),he.forEach(g),V=G(K),B=w(K,"SPAN",{class:!0});var ue=I(B);ee=L(ue,Y),ue.forEach(g),le=G(K),O=w(K,"BUTTON",{class:!0});var fe=I(O);re=L(fe,"+"),fe.forEach(g),K.forEach(g),se=G(s),q=w(s,"DIV",{});var _e=I(q);for(let E=0;E<S.length;E+=1)S[E].l(_e);_e.forEach(g),s.forEach(g),this.h()},h(){a(l,"class","svelte-tp9bu9"),a(i,"cx",e[2].x),a(i,"cy",e[2].y),a(i,"r",Z+30),a(i,"stroke","grey"),a(i,"stroke-width",1),a(i,"fill","transparent"),a(f,"id","boxOfNotes"),a(f,"viewBox","0 0 800 800"),a(f,"xmlns","http://www.w3.org/2000/svg"),a(f,"class","svelte-tp9bu9"),a(d,"class","svelte-tp9bu9"),a(B,"class","noteLabel svelte-tp9bu9"),a(O,"class","svelte-tp9bu9"),a(h,"class","appContainer svelte-tp9bu9"),a(h,"data-sveltekit-preload-data","hover")},m(n,b){W(n,l,b),u(l,r),u(l,o),u(l,_),W(n,m,b),W(n,h,b),u(h,f),u(f,i);for(let s=0;s<y.length;s+=1)y[s].m(f,null);u(f,N);for(let s=0;s<k.length;s+=1)k[s].m(f,null);u(h,A),u(h,c),u(c,d),u(d,$),u(c,V),u(c,B),u(B,ee),u(c,le),u(c,O),u(O,re),u(h,se),u(h,q);for(let s=0;s<S.length;s+=1)S[s].m(q,null);ae||(ce=[ne(d,"click",e[7]),ne(O,"click",e[8])],ae=!0)},p(n,[b]){if(b&1&&t!==(t=n[3](v[P(n[0],v.length)])+"")&&x(r,t),b&2&&p!==(p=n[1].name+"")&&x(_,p),b&91){z=[...v];let s;for(s=0;s<z.length;s+=1){const C=ve(n,z,s);y[s]?y[s].p(C,b):(y[s]=Ne(C),y[s].c(),y[s].m(f,N))}for(;s<y.length;s+=1)y[s].d(1);y.length=z.length}if(b&51){H=[...n[1].scale];let s;for(s=0;s<H.length;s+=1){const C=ge(n,H,s);k[s]?k[s].p(C,b):(k[s]=be(C),k[s].c(),k[s].m(f,null))}for(;s<k.length;s+=1)k[s].d(1);k.length=H.length}if(b&1&&Y!==(Y=n[3](v[P(n[0],v.length)])+"")&&x(ee,Y),b&11){J=ie;let s;for(s=0;s<J.length;s+=1){const C=de(n,J,s);S[s]?S[s].p(C,b):(S[s]=Ie(C),S[s].c(),S[s].m(q,null))}for(;s<S.length;s+=1)S[s].d(1);S.length=J.length}},i:pe,o:pe,d(n){n&&g(l),n&&g(m),n&&g(h),oe(y,n),oe(k,n),oe(S,n),ae=!1,Ce(ce)}}}const Z=330;function $e(e,l,t){const r={x:400,y:400};let o=0,p=ie[0];return[o,p,r,c=>c.preferSharp?c.sharpNote:c.flatNote,c=>({x:r.x+(Z-10)*Math.cos(c*2*Math.PI/v.length-.5*Math.PI),y:r.y+(Z-10)*Math.sin(c*2*Math.PI/v.length-.5*Math.PI)}),(c,d)=>({x:r.x+(Z-80)*Math.cos((c.semitonesFromRoot+d)*2*Math.PI/v.length-.5*Math.PI),y:r.y+(Z-80)*Math.sin((c.semitonesFromRoot+d)*2*Math.PI/v.length-.5*Math.PI)}),(c,d,$)=>{let V=P(c-d,v.length);return V<0&&(V=V+v.length),$.some(B=>B.semitonesFromRoot===V)},()=>{t(0,o=o-1),o<0&&t(0,o=o+12)},()=>{t(0,o=o+1),o>=12&&t(0,o=o-12)},(c,d)=>{t(1,p=c),t(0,o=P(d,v.length))}]}class Be extends ye{constructor(l){super(),ke(this,l,$e,Re,Se,{})}}export{Be as default};

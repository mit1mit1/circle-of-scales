import{S as ot,i as nt,s as at,k as y,q as S,a as B,J,e as He,l as C,m as b,r as T,c as F,h as d,K,n as r,b as Q,G as c,L as ge,u as z,H as ze,M as ve,N as rt,p as Ee,O as ee}from"../chunks/index.9fc21f1b.js";const O=(e,l)=>{const s=e%l;return s<0?s+l:s},it=e=>{if(isNaN(e))return"NaN";const l=String(+e).split("")??[],s=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let t="",a=3;for(;a--;)t=(s[+(l.pop()??"")+a*10]||"")+t;return Array(+l.join("")+1).join("M")+t},I=[{sharpNote:"C",flatNote:"C"},{sharpNote:"C#",flatNote:"D♭",preferSharp:!0},{sharpNote:"D",flatNote:"D"},{sharpNote:"D#",flatNote:"E♭",preferSharp:!1},{sharpNote:"E",flatNote:"E"},{sharpNote:"F",flatNote:"F"},{sharpNote:"F#",flatNote:"G♭",preferSharp:!0},{sharpNote:"G",flatNote:"G"},{sharpNote:"G#",flatNote:"A♭",preferSharp:!1},{sharpNote:"A",flatNote:"A"},{sharpNote:"A#",flatNote:"B♭",preferSharp:!1},{sharpNote:"A",flatNote:"B"}],R=[2,2,1,2,2,2,1],H=[2,2,3,2,3],j=(e,l,s)=>{let t=0;for(let a=e;a<l;a++)t+=s[O(a,s.length)];return t},ct=(e,l)=>e===4&&l===7?"major":e===3&&l===7?"minor":e===3&&l===6?"diminished":"bizarre",ut=(e,l,s)=>{const t=it(O(e+1,s.length+1)),a=e+l,m=ct(j(a,a+2,s),j(a,a+4,s));return m==="major"?t:m==="minor"?t.toLowerCase():m==="diminished"?`${t.toLowerCase()}°`:t},q=(e,l)=>{const s=[];for(let t=0;t<l.length;t++)s.push({semitonesFromRoot:j(e,e+t,l),label:ut(t,e,l)});return s},Je=(e,l)=>{const s=l+1,t=e.semitonesFromRoot-j(0,l,R);if(t===1)return`A${s}`;if([1,4,5].includes(s)){if(t===0)return`P${s}`;if(t===-1)return`d${s}`}return t===0?`M${s}`:t===-1?`m${s}`:t===-2?`d${s}`:`${e.semitonesFromRoot}s`},ht=q(0,R),ft=q(1,R),_t=q(2,R),dt=q(3,R),mt=q(4,R),vt=q(5,R),gt=q(6,R),bt=[{name:"Ionian / Major",scale:ht,rootIntervalToIonian:j(0,0,R)},{name:"Dorian",scale:ft,rootIntervalToIonian:j(0,1,R)},{name:"Phrygian",scale:_t,rootIntervalToIonian:j(0,2,R)},{name:"Lydian",scale:dt,rootIntervalToIonian:j(0,3,R)},{name:"Mixolydian",scale:mt,rootIntervalToIonian:j(0,4,R)},{name:"Aeolian / Natural Minor",scale:vt,rootIntervalToIonian:j(0,5,R)},{name:"Locrian",scale:gt,rootIntervalToIonian:j(0,6,R)}],pt=q(0,H),It=q(1,H),Nt=q(2,H),kt=q(3,H),yt=q(4,H),Ct=[{name:"Major",scale:pt,rootIntervalToIonian:j(0,0,H)},{name:"Suspended / Egyptian",scale:It,rootIntervalToIonian:j(0,1,H)},{name:"Blues minor / Man Gong",scale:Nt,rootIntervalToIonian:j(0,2,H)},{name:"Blues major",scale:kt,rootIntervalToIonian:j(0,3,H)},{name:"Minor",scale:yt,rootIntervalToIonian:j(0,4,H)}],Be=[{label:"Diatonic",modes:bt},{label:"(Major) Pentatonic",modes:Ct}];function Ke(e,l,s){const t=e.slice();t[17]=l[s];const a=t[1];return t[18]=a,t}function Qe(e,l,s){const t=e.slice();t[17]=l[s];const a=t[1]+t[17].rootIntervalToIonian-t[3].rootIntervalToIonian;return t[18]=a,t}function We(e,l,s){const t=e.slice();return t[23]=l[s],t}function Ye(e,l,s){const t=e.slice();t[26]=l[s],t[31]=s;const a=t[0]?t[9](t[3].scale[O(t[31]-t[2].modes.findIndex(g=>g===t[3]),t[3].scale.length)].semitonesFromRoot+t[1],t[5]):t[9](t[26].semitonesFromRoot+t[1],t[5]);t[27]=a;const m=t[10](t[26],t[1],t[6]);t[28]=m;const v=t[10](t[26],t[1],t[7]);return t[29]=v,t}function Ze(e,l,s){const t=e.slice();t[32]=l[s],t[31]=s;const a=t[9](t[31],t[5]);return t[27]=a,t}function xe(e){let l,s,t,a,m=e[8](e[32])+"",v,g;return{c(){l=J("g"),s=J("circle"),a=J("text"),v=S(m),this.h()},l(i){l=K(i,"g",{});var u=b(l);s=K(u,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0}),b(s).forEach(d),a=K(u,"text",{x:!0,y:!0,class:!0,"text-anchor":!0,dy:!0});var f=b(a);v=T(f,m),f.forEach(d),u.forEach(d),this.h()},h(){Ee(s,"stroke-width","1.6871"),Ee(s,"stroke-miterlimit","10"),r(s,"cx",0),r(s,"cy",0),r(s,"r",30),r(s,"transform",`translate(${e[27].x} ${e[27].y})`),r(s,"stroke","transparent"),r(s,"fill",t=e[31]===e[1]?"yellow":"var(--base-background-color)"),r(a,"x",e[27].x),r(a,"y",e[27].y),r(a,"class",g=ee(`svgNoteName ${e[11](e[31],e[1],e[3].scale)?"svgSelectedNoteName":""}`)+" svelte-ubs13e"),r(a,"text-anchor","middle"),r(a,"dy",".3em")},m(i,u){Q(i,l,u),c(l,s),c(l,a),c(a,v)},p(i,u){u[0]&2&&t!==(t=i[31]===i[1]?"yellow":"var(--base-background-color)")&&r(s,"fill",t),u[0]&10&&g!==(g=ee(`svgNoteName ${i[11](i[31],i[1],i[3].scale)?"svgSelectedNoteName":""}`)+" svelte-ubs13e")&&r(a,"class",g)},d(i){i&&d(l)}}}function et(e){let l,s,t,a,m=e[26].label+"",v,g,i,u=Je(e[26],e[31])+"",f,D;return{c(){l=J("circle"),t=J("g"),a=J("text"),v=S(m),i=J("text"),f=S(u),this.h()},l(p){l=K(p,"circle",{style:!0,cx:!0,cy:!0,r:!0,transform:!0,stroke:!0,fill:!0,class:!0}),b(l).forEach(d),t=K(p,"g",{class:!0});var h=b(t);a=K(h,"text",{x:!0,y:!0,"text-anchor":!0,dy:!0,transform:!0,class:!0});var _=b(a);v=T(_,m),_.forEach(d),i=K(h,"text",{x:!0,y:!0,"text-anchor":!0,dy:!0,transform:!0,class:!0});var G=b(i);f=T(G,u),G.forEach(d),h.forEach(d),this.h()},h(){Ee(l,"stroke-width","1.6871"),Ee(l,"stroke-miterlimit","10"),r(l,"cx",0),r(l,"cy",0),r(l,"r",30),r(l,"transform",s=`translate(${e[27].x} ${e[27].y})`),r(l,"stroke","black"),r(l,"fill","transparent"),r(l,"class","transitionAll svelte-ubs13e"),r(a,"x",0),r(a,"y",0),r(a,"text-anchor","middle"),r(a,"dy",".3em"),r(a,"transform",g=`translate(${e[28].x} ${e[28].y})`),r(a,"class","svgNoteName scaleNote transitionAll svelte-ubs13e"),r(i,"x",0),r(i,"y",0),r(i,"text-anchor","middle"),r(i,"dy",".3em"),r(i,"transform",D=`translate(${e[29].x} ${e[29].y})`),r(i,"class","svgNoteName scaleNote transitionAll svelte-ubs13e"),r(t,"class","transitionNote")},m(p,h){Q(p,l,h),Q(p,t,h),c(t,a),c(a,v),c(t,i),c(i,f)},p(p,h){h[0]&15&&s!==(s=`translate(${p[27].x} ${p[27].y})`)&&r(l,"transform",s),h[0]&8&&m!==(m=p[26].label+"")&&z(v,m),h[0]&10&&g!==(g=`translate(${p[28].x} ${p[28].y})`)&&r(a,"transform",g),h[0]&8&&u!==(u=Je(p[26],p[31])+"")&&z(f,u),h[0]&10&&D!==(D=`translate(${p[29].x} ${p[29].y})`)&&r(i,"transform",D)},d(p){p&&d(l),p&&d(t)}}}function tt(e){let l,s=e[23].label+"",t,a,m,v,g;function i(){return e[14](e[23])}return{c(){l=y("button"),t=S(s),a=B(),this.h()},l(u){l=C(u,"BUTTON",{class:!0});var f=b(l);t=T(f,s),a=F(f),f.forEach(d),this.h()},h(){r(l,"class",m=ee(e[2]===e[23]?"selectedTab":"")+" svelte-ubs13e")},m(u,f){Q(u,l,f),c(l,t),c(l,a),v||(g=ge(l,"click",i),v=!0)},p(u,f){e=u,f[0]&4&&m!==(m=ee(e[2]===e[23]?"selectedTab":"")+" svelte-ubs13e")&&r(l,"class",m)},d(u){u&&d(l),v=!1,g()}}}function lt(e){let l,s,t=e[8](I[O(e[18],I.length)])+"",a,m,v=e[17].name+"",g,i,u,f,D;function p(){return e[15](e[17],e[18])}return{c(){l=y("button"),s=y("span"),a=S(t),m=B(),g=S(v),i=B(),this.h()},l(h){l=C(h,"BUTTON",{class:!0});var _=b(l);s=C(_,"SPAN",{class:!0});var G=b(s);a=T(G,t),G.forEach(d),m=F(_),g=T(_,v),i=F(_),_.forEach(d),this.h()},h(){r(s,"class","noteLabel svelte-ubs13e"),r(l,"class",u=ee(e[17]===e[3]&&e[0]?"selectedTab":"")+" svelte-ubs13e")},m(h,_){Q(h,l,_),c(l,s),c(s,a),c(l,m),c(l,g),c(l,i),f||(D=ge(l,"click",p),f=!0)},p(h,_){e=h,_[0]&14&&t!==(t=e[8](I[O(e[18],I.length)])+"")&&z(a,t),_[0]&4&&v!==(v=e[17].name+"")&&z(g,v),_[0]&13&&u!==(u=ee(e[17]===e[3]&&e[0]?"selectedTab":"")+" svelte-ubs13e")&&r(l,"class",u)},d(h){h&&d(l),f=!1,D()}}}function st(e){let l,s,t=e[8](I[O(e[18],I.length)])+"",a,m,v=e[17].name+"",g,i,u,f,D;function p(){return e[16](e[17],e[18])}return{c(){l=y("button"),s=y("span"),a=S(t),m=B(),g=S(v),i=B(),this.h()},l(h){l=C(h,"BUTTON",{class:!0});var _=b(l);s=C(_,"SPAN",{class:!0});var G=b(s);a=T(G,t),G.forEach(d),m=F(_),g=T(_,v),i=F(_),_.forEach(d),this.h()},h(){r(s,"class","noteLabel svelte-ubs13e"),r(l,"class",u=ee(e[17]===e[3]&&!e[0]?"selectedTab":"")+" svelte-ubs13e")},m(h,_){Q(h,l,_),c(l,s),c(s,a),c(l,m),c(l,g),c(l,i),f||(D=ge(l,"click",p),f=!0)},p(h,_){e=h,_[0]&2&&t!==(t=e[8](I[O(e[18],I.length)])+"")&&z(a,t),_[0]&4&&v!==(v=e[17].name+"")&&z(g,v),_[0]&13&&u!==(u=ee(e[17]===e[3]&&!e[0]?"selectedTab":"")+" svelte-ubs13e")&&r(l,"class",u)},d(h){h&&d(l),f=!1,D()}}}function Et(e){let l,s=e[8](I[O(e[1],I.length)])+"",t,a,m=e[3].name+"",v,g,i,u,f,D,p,h,_,G,W,be,pe,te,N=e[8](I[O(e[1],I.length)])+"",P,U,$,fe,Me,le,Se,Te,se,_e,Y,Z,Pe,de=e[2].label+"",Ie,De,we,Le,me,x,ne,Xe,Ae,Ve,Fe,ae=[...I],w=[];for(let n=0;n<ae.length;n+=1)w[n]=xe(Ze(e,ae,n));let re=[...e[3].scale],L=[];for(let n=0;n<re.length;n+=1)L[n]=et(Ye(e,re,n));let ie=Be,X=[];for(let n=0;n<ie.length;n+=1)X[n]=tt(We(e,ie,n));let ce=e[2].modes,A=[];for(let n=0;n<ce.length;n+=1)A[n]=lt(Qe(e,ce,n));let ue=e[2].modes,V=[];for(let n=0;n<ue.length;n+=1)V[n]=st(Ke(e,ue,n));return{c(){l=y("h1"),t=S(s),a=B(),v=S(m),g=B(),i=y("div"),u=J("svg"),f=J("circle");for(let n=0;n<w.length;n+=1)w[n].c();D=He();for(let n=0;n<L.length;n+=1)L[n].c();p=B(),h=y("div"),_=y("div"),G=S(`Root note
			`),W=y("button"),be=S("-"),pe=B(),te=y("span"),P=S(N),U=B(),$=y("button"),fe=S("+"),Me=B(),le=y("div"),Se=S(`Mode type
			`);for(let n=0;n<X.length;n+=1)X[n].c();Te=B(),se=y("div"),_e=y("div"),Y=y("div"),Z=y("h2"),Pe=S("Equivalent "),Ie=S(de),De=S(" modes"),we=B();for(let n=0;n<A.length;n+=1)A[n].c();Le=B(),me=y("div"),x=y("div"),ne=y("h2"),Xe=S("Modes by modification"),Ae=B();for(let n=0;n<V.length;n+=1)V[n].c();this.h()},l(n){l=C(n,"H1",{class:!0});var k=b(l);t=T(k,s),a=F(k),v=T(k,m),k.forEach(d),g=F(n),i=C(n,"DIV",{class:!0,"data-sveltekit-preload-data":!0});var o=b(i);u=K(o,"svg",{id:!0,viewBox:!0,xmlns:!0,class:!0});var E=b(u);f=K(E,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,class:!0}),b(f).forEach(d);for(let M=0;M<w.length;M+=1)w[M].l(E);D=He();for(let M=0;M<L.length;M+=1)L[M].l(E);E.forEach(d),p=F(o),h=C(o,"DIV",{id:!0,class:!0});var he=b(h);_=C(he,"DIV",{});var oe=b(_);G=T(oe,`Root note
			`),W=C(oe,"BUTTON",{class:!0});var Re=b(W);be=T(Re,"-"),Re.forEach(d),pe=F(oe),te=C(oe,"SPAN",{class:!0});var Oe=b(te);P=T(Oe,N),Oe.forEach(d),U=F(oe),$=C(oe,"BUTTON",{class:!0});var Ge=b($);fe=T(Ge,"+"),Ge.forEach(d),oe.forEach(d),Me=F(he),le=C(he,"DIV",{});var je=b(le);Se=T(je,`Mode type
			`);for(let M=0;M<X.length;M+=1)X[M].l(je);je.forEach(d),Te=F(he),se=C(he,"DIV",{});var Ne=b(se);_e=C(Ne,"DIV",{});var $e=b(_e);Y=C($e,"DIV",{});var ke=b(Y);Z=C(ke,"H2",{class:!0});var ye=b(Z);Pe=T(ye,"Equivalent "),Ie=T(ye,de),De=T(ye," modes"),ye.forEach(d),we=F(ke);for(let M=0;M<A.length;M+=1)A[M].l(ke);ke.forEach(d),$e.forEach(d),Le=F(Ne),me=C(Ne,"DIV",{});var qe=b(me);x=C(qe,"DIV",{});var Ce=b(x);ne=C(Ce,"H2",{class:!0});var Ue=b(ne);Xe=T(Ue,"Modes by modification"),Ue.forEach(d),Ae=F(Ce);for(let M=0;M<V.length;M+=1)V[M].l(Ce);Ce.forEach(d),qe.forEach(d),Ne.forEach(d),he.forEach(d),o.forEach(d),this.h()},h(){r(l,"class","svelte-ubs13e"),r(f,"cx",e[4].xCentre),r(f,"cy",e[4].yCentre),r(f,"r",e[4].radius),r(f,"stroke","grey"),r(f,"stroke-width",1),r(f,"fill","var(--base-background-color)"),r(f,"class","background svelte-ubs13e"),r(u,"id","boxOfNotes"),r(u,"viewBox","0 0 800 800"),r(u,"xmlns","http://www.w3.org/2000/svg"),r(u,"class","svelte-ubs13e"),r(W,"class","svelte-ubs13e"),r(te,"class","noteLabel svelte-ubs13e"),r($,"class","svelte-ubs13e"),r(Z,"class","svelte-ubs13e"),r(ne,"class","svelte-ubs13e"),r(h,"id","boxOfButtons"),r(h,"class","svelte-ubs13e"),r(i,"class","appContainer svelte-ubs13e"),r(i,"data-sveltekit-preload-data","hover")},m(n,k){Q(n,l,k),c(l,t),c(l,a),c(l,v),Q(n,g,k),Q(n,i,k),c(i,u),c(u,f);for(let o=0;o<w.length;o+=1)w[o].m(u,null);c(u,D);for(let o=0;o<L.length;o+=1)L[o].m(u,null);c(i,p),c(i,h),c(h,_),c(_,G),c(_,W),c(W,be),c(_,pe),c(_,te),c(te,P),c(_,U),c(_,$),c($,fe),c(h,Me),c(h,le),c(le,Se);for(let o=0;o<X.length;o+=1)X[o].m(le,null);c(h,Te),c(h,se),c(se,_e),c(_e,Y),c(Y,Z),c(Z,Pe),c(Z,Ie),c(Z,De),c(Y,we);for(let o=0;o<A.length;o+=1)A[o].m(Y,null);c(se,Le),c(se,me),c(me,x),c(x,ne),c(ne,Xe),c(x,Ae);for(let o=0;o<V.length;o+=1)V[o].m(x,null);Ve||(Fe=[ge(W,"click",e[12]),ge($,"click",e[13])],Ve=!0)},p(n,k){if(k[0]&2&&s!==(s=n[8](I[O(n[1],I.length)])+"")&&z(t,s),k[0]&8&&m!==(m=n[3].name+"")&&z(v,m),k[0]&2858){ae=[...I];let o;for(o=0;o<ae.length;o+=1){const E=Ze(n,ae,o);w[o]?w[o].p(E,k):(w[o]=xe(E),w[o].c(),w[o].m(u,D))}for(;o<w.length;o+=1)w[o].d(1);w.length=ae.length}if(k[0]&1775){re=[...n[3].scale];let o;for(o=0;o<re.length;o+=1){const E=Ye(n,re,o);L[o]?L[o].p(E,k):(L[o]=et(E),L[o].c(),L[o].m(u,null))}for(;o<L.length;o+=1)L[o].d(1);L.length=re.length}if(k[0]&2&&N!==(N=n[8](I[O(n[1],I.length)])+"")&&z(P,N),k[0]&12){ie=Be;let o;for(o=0;o<ie.length;o+=1){const E=We(n,ie,o);X[o]?X[o].p(E,k):(X[o]=tt(E),X[o].c(),X[o].m(le,null))}for(;o<X.length;o+=1)X[o].d(1);X.length=ie.length}if(k[0]&4&&de!==(de=n[2].label+"")&&z(Ie,de),k[0]&271){ce=n[2].modes;let o;for(o=0;o<ce.length;o+=1){const E=Qe(n,ce,o);A[o]?A[o].p(E,k):(A[o]=lt(E),A[o].c(),A[o].m(Y,null))}for(;o<A.length;o+=1)A[o].d(1);A.length=ce.length}if(k[0]&271){ue=n[2].modes;let o;for(o=0;o<ue.length;o+=1){const E=Ke(n,ue,o);V[o]?V[o].p(E,k):(V[o]=st(E),V[o].c(),V[o].m(x,null))}for(;o<V.length;o+=1)V[o].d(1);V.length=ue.length}},i:ze,o:ze,d(n){n&&d(l),n&&d(g),n&&d(i),ve(w,n),ve(L,n),ve(X,n),ve(A,n),ve(V,n),Ve=!1,rt(Fe)}}}function Mt(e,l,s){const t={xCentre:400,yCentre:400,radius:300};let a=!0;const m={...t,radius:t.radius},v={...t,radius:t.radius-70},g={...t,radius:t.radius+70};let i=0,u=Be[0],f=u.modes[0];return[a,i,u,f,t,m,v,g,N=>N.preferSharp?N.sharpNote:N.flatNote,(N,P)=>({x:P.xCentre+P.radius*Math.cos(N*2*Math.PI/I.length-.5*Math.PI),y:P.yCentre+P.radius*Math.sin(N*2*Math.PI/I.length-.5*Math.PI)}),(N,P,U)=>({x:U.xCentre+U.radius*Math.cos((N.semitonesFromRoot+P)*2*Math.PI/I.length-.5*Math.PI),y:U.yCentre+U.radius*Math.sin((N.semitonesFromRoot+P)*2*Math.PI/I.length-.5*Math.PI)}),(N,P,U)=>{let $=O(N-P,I.length);return $<0&&($=$+I.length),U.some(fe=>fe.semitonesFromRoot===$)},()=>{s(1,i=i-1),i<0&&s(1,i=i+12)},()=>{s(1,i=i+1),i>=12&&s(1,i=i-12)},N=>{u!==N&&(s(2,u=N),s(3,f=N.modes[0]))},(N,P)=>{s(3,f=N),s(1,i=O(P,I.length)),s(0,a=!0)},(N,P)=>{s(3,f=N),s(1,i=O(P,I.length)),s(0,a=!1)}]}class Tt extends ot{constructor(l){super(),nt(this,l,Mt,Et,at,{},null,[-1,-1])}}export{Tt as default};
